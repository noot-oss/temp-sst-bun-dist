var ak=Object.create;var fu=Object.defineProperty;var ck=Object.getOwnPropertyDescriptor;var uk=Object.getOwnPropertyNames;var dk=Object.getPrototypeOf,lk=Object.prototype.hasOwnProperty;var q=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Le=(e,t)=>()=>(e&&(t=e(e=0)),t);var c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kh=(e,t)=>{for(var r in t)fu(e,r,{get:t[r],enumerable:!0})},t0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of uk(t))!lk.call(e,i)&&i!==r&&fu(e,i,{get:()=>t[i],enumerable:!(n=ck(t,i))||n.enumerable});return e};var pk=(e,t,r)=>(r=e!=null?ak(dk(e)):{},t0(t||!e||!e.__esModule?fu(r,"default",{value:e,enumerable:!0}):r,e)),S=e=>t0(fu({},"__esModule",{value:!0}),e);var b={};kh(b,{__addDisposableResource:()=>_S,__assign:()=>od,__asyncDelegator:()=>cS,__asyncGenerator:()=>aS,__asyncValues:()=>uS,__await:()=>Co,__awaiter:()=>tS,__classPrivateFieldGet:()=>fS,__classPrivateFieldIn:()=>hS,__classPrivateFieldSet:()=>mS,__createBinding:()=>ad,__decorate:()=>X0,__disposeResources:()=>yS,__esDecorate:()=>Zk,__exportStar:()=>nS,__extends:()=>J0,__generator:()=>rS,__importDefault:()=>pS,__importStar:()=>lS,__makeTemplateObject:()=>dS,__metadata:()=>eS,__param:()=>Z0,__propKey:()=>tF,__read:()=>w_,__rest:()=>Y0,__runInitializers:()=>eF,__setFunctionName:()=>rF,__spread:()=>iS,__spreadArray:()=>sS,__spreadArrays:()=>oS,__values:()=>sd,default:()=>oF});function J0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");v_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Y0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function X0(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function Z0(e,t){return function(r,n){t(r,n,e)}}function Zk(e,t,r,n,i,o){function s(K){if(K!==void 0&&typeof K!="function")throw new TypeError("Function expected");return K}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,p=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),f,m=!1,h=r.length-1;h>=0;h--){var y={};for(var E in n)y[E]=E==="access"?{}:n[E];for(var E in n.access)y.access[E]=n.access[E];y.addInitializer=function(K){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(K||null))};var w=(0,r[h])(a==="accessor"?{get:p.get,set:p.set}:p[u],y);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=s(w.get))&&(p.get=f),(f=s(w.set))&&(p.set=f),(f=s(w.init))&&i.unshift(f)}else(f=s(w))&&(a==="field"?i.unshift(f):p[u]=f)}l&&Object.defineProperty(l,n.name,p),m=!0}function eF(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function tF(e){return typeof e=="symbol"?e:"".concat(e)}function rF(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function eS(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function tS(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})}function rS(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(p){return u([l,p])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(p){l=[6,p],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function nS(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ad(t,e,r)}function sd(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w_(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function iS(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w_(arguments[t]));return e}function oS(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function sS(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Co(e){return this instanceof Co?(this.v=e,this):new Co(e)}function aS(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(h){return new Promise(function(y,E){o.push([m,h,y,E])>1||a(m,h)})})}function a(m,h){try{u(n[m](h))}catch(y){f(o[0][3],y)}}function u(m){m.value instanceof Co?Promise.resolve(m.value.v).then(l,p):f(o[0][2],m)}function l(m){a("next",m)}function p(m){a("throw",m)}function f(m,h){m(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function cS(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(s){return(r=!r)?{value:Co(e[i](s)),done:!1}:o?o(s):s}:o}}function uS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof sd=="function"?sd(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(a,u){s=e[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}function dS(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function lS(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ad(t,e,r);return nF(t,e),t}function pS(e){return e&&e.__esModule?e:{default:e}}function fS(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function mS(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function hS(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function _S(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function yS(e){function t(n){e.error=e.hasError?new iF(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(o){return t(o),r()})}catch(o){t(o)}}if(e.hasError)throw e.error}return r()}var v_,od,ad,nF,iF,oF,N=Le(()=>{v_=function(e,t){return v_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},v_(e,t)};od=function(){return od=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},od.apply(this,arguments)};ad=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};nF=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};iF=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};oF={__extends:J0,__assign:od,__rest:Y0,__decorate:X0,__param:Z0,__metadata:eS,__awaiter:tS,__generator:rS,__createBinding:ad,__exportStar:nS,__values:sd,__read:w_,__spread:iS,__spreadArrays:oS,__spreadArray:sS,__await:Co,__asyncGenerator:aS,__asyncDelegator:cS,__asyncValues:uS,__makeTemplateObject:dS,__importStar:lS,__importDefault:pS,__classPrivateFieldGet:fS,__classPrivateFieldSet:mS,__classPrivateFieldIn:hS,__addDisposableResource:_S,__disposeResources:yS}});var ES=c(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0})});var vS=c(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.HttpAuthLocation=void 0;var sF;(function(e){e.HEADER="header",e.QUERY="query"})(sF=Va.HttpAuthLocation||(Va.HttpAuthLocation={}))});var SS=c(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0})});var NS=c(bS=>{"use strict";Object.defineProperty(bS,"__esModule",{value:!0})});var CS=c(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0})});var AS=c(OS=>{"use strict";Object.defineProperty(OS,"__esModule",{value:!0})});var TS=c(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0})});var RS=c(IS=>{"use strict";Object.defineProperty(IS,"__esModule",{value:!0})});var MS=c(qS=>{"use strict";Object.defineProperty(qS,"__esModule",{value:!0})});var DS=c($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var S_=(N(),S(b));S_.__exportStar(TS(),$a);S_.__exportStar(RS(),$a);S_.__exportStar(MS(),$a)});var FS=c(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0})});var US=c(LS=>{"use strict";Object.defineProperty(LS,"__esModule",{value:!0})});var jS=c(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.EndpointURLScheme=void 0;var aF;(function(e){e.HTTP="http",e.HTTPS="https"})(aF=za.EndpointURLScheme||(za.EndpointURLScheme={}))});var WS=c(BS=>{"use strict";Object.defineProperty(BS,"__esModule",{value:!0})});var $S=c(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0})});var HS=c(zS=>{"use strict";Object.defineProperty(zS,"__esModule",{value:!0})});var QS=c(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0})});var JS=c(KS=>{"use strict";Object.defineProperty(KS,"__esModule",{value:!0})});var YS=c(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Ha=(N(),S(b));Ha.__exportStar(WS(),Ni);Ha.__exportStar($S(),Ni);Ha.__exportStar(HS(),Ni);Ha.__exportStar(QS(),Ni);Ha.__exportStar(JS(),Ni)});var ZS=c(XS=>{"use strict";Object.defineProperty(XS,"__esModule",{value:!0})});var N_=c(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.resolveChecksumRuntimeConfig=Hr.getChecksumConfiguration=Hr.AlgorithmId=void 0;var b_;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(b_=Hr.AlgorithmId||(Hr.AlgorithmId={}));var cF=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>b_.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>b_.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}};Hr.getChecksumConfiguration=cF;var uF=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};Hr.resolveChecksumRuntimeConfig=uF});var tb=c(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.resolveDefaultRuntimeConfig=Oo.getDefaultClientConfiguration=void 0;var eb=N_(),dF=e=>({...(0,eb.getChecksumConfiguration)(e)});Oo.getDefaultClientConfiguration=dF;var lF=e=>({...(0,eb.resolveChecksumRuntimeConfig)(e)});Oo.resolveDefaultRuntimeConfig=lF});var nb=c(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0})});var ob=c(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.AlgorithmId=void 0;var ib=(N(),S(b));ib.__exportStar(tb(),Ao);ib.__exportStar(nb(),Ao);var pF=N_();Object.defineProperty(Ao,"AlgorithmId",{enumerable:!0,get:function(){return pF.AlgorithmId}})});var sb=c(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.FieldPosition=void 0;var fF;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(fF=Ga.FieldPosition||(Ga.FieldPosition={}))});var cb=c(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0})});var db=c(ub=>{"use strict";Object.defineProperty(ub,"__esModule",{value:!0})});var pb=c(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});var lb=(N(),S(b));lb.__exportStar(cb(),cd);lb.__exportStar(db(),cd)});var mb=c(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0})});var _b=c(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0})});var gb=c(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0})});var vb=c(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0})});var Sb=c(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0})});var Nb=c(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0})});var Cb=c(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0})});var Ab=c(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0})});var Tb=c(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0})});var Rb=c(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0})});var Mb=c(qb=>{"use strict";Object.defineProperty(qb,"__esModule",{value:!0})});var kb=c(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0})});var Lb=c(Fb=>{"use strict";Object.defineProperty(Fb,"__esModule",{value:!0})});var Ub=c(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.RequestHandlerProtocol=void 0;var mF;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(mF=Qa.RequestHandlerProtocol||(Qa.RequestHandlerProtocol={}))});var Bb=c(jb=>{"use strict";Object.defineProperty(jb,"__esModule",{value:!0})});var Vb=c(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0})});var zb=c($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0})});var Gb=c(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0})});var Kb=c(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0})});var Po=c(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});var B=(N(),S(b));B.__exportStar(ES(),U);B.__exportStar(vS(),U);B.__exportStar(SS(),U);B.__exportStar(NS(),U);B.__exportStar(CS(),U);B.__exportStar(AS(),U);B.__exportStar(DS(),U);B.__exportStar(FS(),U);B.__exportStar(US(),U);B.__exportStar(jS(),U);B.__exportStar(YS(),U);B.__exportStar(ZS(),U);B.__exportStar(ob(),U);B.__exportStar(sb(),U);B.__exportStar(pb(),U);B.__exportStar(mb(),U);B.__exportStar(_b(),U);B.__exportStar(gb(),U);B.__exportStar(vb(),U);B.__exportStar(Sb(),U);B.__exportStar(Nb(),U);B.__exportStar(Cb(),U);B.__exportStar(Ab(),U);B.__exportStar(Tb(),U);B.__exportStar(Rb(),U);B.__exportStar(Mb(),U);B.__exportStar(kb(),U);B.__exportStar(Lb(),U);B.__exportStar(Ub(),U);B.__exportStar(Bb(),U);B.__exportStar(Vb(),U);B.__exportStar(zb(),U);B.__exportStar(Gb(),U);B.__exportStar(Kb(),U)});var Jb=c(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.Field=void 0;var hF=Po(),x_=class{constructor({name:t,kind:r=hF.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}};ud.Field=x_});var Yb=c(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.Fields=void 0;var C_=class{constructor({fields:t=[],encoding:r="utf-8"}){this.entries={},t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}};dd.Fields=C_});var Zb=c(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0})});var eN=c(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.HttpRequest=void 0;var O_=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=_F(t.query)),t}};ld.HttpRequest=O_;function _F(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}});var tN=c(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.HttpResponse=void 0;var A_=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};pd.HttpResponse=A_});var rN=c(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.isValidHostname=void 0;function yF(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}fd.isValidHostname=yF});var iN=c(nN=>{"use strict";Object.defineProperty(nN,"__esModule",{value:!0})});var et=c(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});var xi=(N(),S(b));xi.__exportStar(Jb(),Gr);xi.__exportStar(Yb(),Gr);xi.__exportStar(Zb(),Gr);xi.__exportStar(eN(),Gr);xi.__exportStar(tN(),Gr);xi.__exportStar(rN(),Gr);xi.__exportStar(iN(),Gr)});var Ka=c(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.getHostHeaderPlugin=It.hostHeaderMiddlewareOptions=It.hostHeaderMiddleware=It.resolveHostHeaderConfig=void 0;var gF=et();function EF(e){return e}It.resolveHostHeaderConfig=EF;var vF=e=>t=>async r=>{if(!gF.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(r)};It.hostHeaderMiddleware=vF;It.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var wF=e=>({applyToStack:t=>{t.add((0,It.hostHeaderMiddleware)(e),It.hostHeaderMiddlewareOptions)}});It.getHostHeaderPlugin=wF});var oN=c(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.getLoggerPlugin=or.loggerMiddlewareOptions=or.loggerMiddleware=void 0;var SF=()=>(e,t)=>async r=>{var n,i;try{let o=await e(r),{clientName:s,commandName:a,logger:u,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:p,overrideOutputFilterSensitiveLog:f}=l,m=p??t.inputFilterSensitiveLog,h=f??t.outputFilterSensitiveLog,{$metadata:y,...E}=o.output;return(n=u?.info)===null||n===void 0||n.call(u,{clientName:s,commandName:a,input:m(r.input),output:h(E),metadata:y}),o}catch(o){let{clientName:s,commandName:a,logger:u,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:p}=l,f=p??t.inputFilterSensitiveLog;throw(i=u?.error)===null||i===void 0||i.call(u,{clientName:s,commandName:a,input:f(r.input),error:o,metadata:o.$metadata}),o}};or.loggerMiddleware=SF;or.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var bF=e=>({applyToStack:t=>{t.add((0,or.loggerMiddleware)(),or.loggerMiddlewareOptions)}});or.getLoggerPlugin=bF});var Ja=c(P_=>{"use strict";Object.defineProperty(P_,"__esModule",{value:!0});var NF=(N(),S(b));NF.__exportStar(oN(),P_)});var Ya=c(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.getRecursionDetectionPlugin=sr.addRecursionDetectionMiddlewareOptions=sr.recursionDetectionMiddleware=void 0;var xF=et(),sN="X-Amzn-Trace-Id",CF="AWS_LAMBDA_FUNCTION_NAME",OF="_X_AMZN_TRACE_ID",AF=e=>t=>async r=>{let{request:n}=r;if(!xF.HttpRequest.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(sN))return t(r);let i=process.env[CF],o=process.env[OF],s=a=>typeof a=="string"&&a.length>0;return s(i)&&s(o)&&(n.headers[sN]=o),t({...r,request:n})};sr.recursionDetectionMiddleware=AF;sr.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var PF=e=>({applyToStack:t=>{t.add((0,sr.recursionDetectionMiddleware)(e),sr.addRecursionDetectionMiddlewareOptions)}});sr.getRecursionDetectionPlugin=PF});var Xa=c(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.ProviderError=void 0;var T_=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};md.ProviderError=T_});var aN=c(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.CredentialsProviderError=void 0;var TF=Xa(),I_=class e extends TF.ProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};hd.CredentialsProviderError=I_});var cN=c(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.TokenProviderError=void 0;var IF=Xa(),R_=class e extends IF.ProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};_d.TokenProviderError=R_});var uN=c(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.chain=void 0;var RF=Xa(),qF=(...e)=>async()=>{if(e.length===0)throw new RF.ProviderError("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t};yd.chain=qF});var dN=c(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.fromStatic=void 0;var MF=e=>()=>Promise.resolve(e);gd.fromStatic=MF});var lN=c(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.memoize=void 0;var DF=(e,t,r)=>{let n,i,o,s=!1,a=async()=>{i||(i=e());try{n=await i,o=!0,s=!1}finally{i=void 0}return n};return t===void 0?async u=>((!o||u?.forceRefresh)&&(n=await a()),n):async u=>((!o||u?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(t(n)&&await a(),n))};Ed.memoize=DF});var X=c(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var To=(N(),S(b));To.__exportStar(aN(),An);To.__exportStar(Xa(),An);To.__exportStar(cN(),An);To.__exportStar(uN(),An);To.__exportStar(dN(),An);To.__exportStar(lN(),An)});var k_={};kh(k_,{__assign:()=>M_,__asyncDelegator:()=>QF,__asyncGenerator:()=>GF,__asyncValues:()=>KF,__await:()=>Za,__awaiter:()=>BF,__classPrivateFieldGet:()=>ZF,__classPrivateFieldSet:()=>eL,__createBinding:()=>VF,__decorate:()=>LF,__exportStar:()=>$F,__extends:()=>kF,__generator:()=>WF,__importDefault:()=>XF,__importStar:()=>YF,__makeTemplateObject:()=>JF,__metadata:()=>jF,__param:()=>UF,__read:()=>pN,__rest:()=>FF,__spread:()=>zF,__spreadArrays:()=>HF,__values:()=>D_});function kF(e,t){q_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function FF(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function LF(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function UF(e,t){return function(r,n){t(r,n,e)}}function jF(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function BF(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})}function WF(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(p){return u([l,p])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(p){l=[6,p],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function VF(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function $F(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function D_(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pN(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function zF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pN(arguments[t]));return e}function HF(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function Za(e){return this instanceof Za?(this.v=e,this):new Za(e)}function GF(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(h){return new Promise(function(y,E){o.push([m,h,y,E])>1||a(m,h)})})}function a(m,h){try{u(n[m](h))}catch(y){f(o[0][3],y)}}function u(m){m.value instanceof Za?Promise.resolve(m.value.v).then(l,p):f(o[0][2],m)}function l(m){a("next",m)}function p(m){a("throw",m)}function f(m,h){m(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function QF(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(s){return(r=!r)?{value:Za(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function KF(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof D_=="function"?D_(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(a,u){s=e[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}function JF(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function YF(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function XF(e){return e&&e.__esModule?e:{default:e}}function ZF(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function eL(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var q_,M_,F_=Le(()=>{q_=function(e,t){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},q_(e,t)};M_=function(){return M_=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},M_.apply(this,arguments)}});var fN=c(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.toUtf8=Io.fromUtf8=void 0;var tL=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let i=e.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(r+1<e.length&&(i&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let o=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)};Io.fromUtf8=tL;var rL=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let i=e[r];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){let o=e[++r];t+=String.fromCharCode((i&31)<<6|o&63)}else if(240<=i&&i<365){let s="%"+[i,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((i&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};Io.toUtf8=rL});var mN=c(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.toUtf8=Ro.fromUtf8=void 0;function nL(e){return new TextEncoder().encode(e)}Ro.fromUtf8=nL;function iL(e){return new TextDecoder("utf-8").decode(e)}Ro.toUtf8=iL});var yN=c(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.toUtf8=qo.fromUtf8=void 0;var hN=fN(),_N=mN(),oL=e=>typeof TextEncoder=="function"?(0,_N.fromUtf8)(e):(0,hN.fromUtf8)(e);qo.fromUtf8=oL;var sL=e=>typeof TextDecoder=="function"?(0,_N.toUtf8)(e):(0,hN.toUtf8)(e);qo.toUtf8=sL});var gN=c(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.convertToBuffer=void 0;var aL=yN(),cL=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:aL.fromUtf8;function uL(e){return e instanceof Uint8Array?e:typeof e=="string"?cL(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}vd.convertToBuffer=uL});var EN=c(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.isEmptyData=void 0;function dL(e){return typeof e=="string"?e.length===0:e.byteLength===0}wd.isEmptyData=dL});var vN=c(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.numToUint8=void 0;function lL(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Sd.numToUint8=lL});var wN=c(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.uint32ArrayFrom=void 0;function pL(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}bd.uint32ArrayFrom=pL});var L_=c(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.uint32ArrayFrom=ar.numToUint8=ar.isEmptyData=ar.convertToBuffer=void 0;var fL=gN();Object.defineProperty(ar,"convertToBuffer",{enumerable:!0,get:function(){return fL.convertToBuffer}});var mL=EN();Object.defineProperty(ar,"isEmptyData",{enumerable:!0,get:function(){return mL.isEmptyData}});var hL=vN();Object.defineProperty(ar,"numToUint8",{enumerable:!0,get:function(){return hL.numToUint8}});var _L=wN();Object.defineProperty(ar,"uint32ArrayFrom",{enumerable:!0,get:function(){return _L.uint32ArrayFrom}})});var NN=c(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.AwsCrc32=void 0;var SN=(F_(),S(k_)),U_=L_(),bN=xd(),yL=function(){function e(){this.crc32=new bN.Crc32}return e.prototype.update=function(t){(0,U_.isEmptyData)(t)||this.crc32.update((0,U_.convertToBuffer)(t))},e.prototype.digest=function(){return SN.__awaiter(this,void 0,void 0,function(){return SN.__generator(this,function(t){return[2,(0,U_.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new bN.Crc32},e}();Nd.AwsCrc32=yL});var xd=c(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.AwsCrc32=Pn.Crc32=Pn.crc32=void 0;var gL=(F_(),S(k_)),EL=L_();function vL(e){return new xN().update(e).digest()}Pn.crc32=vL;var xN=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var i=gL.__values(t),o=i.next();!o.done;o=i.next()){var s=o.value;this.checksum=this.checksum>>>8^SL[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Pn.Crc32=xN;var wL=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],SL=(0,EL.uint32ArrayFrom)(wL),bL=NN();Object.defineProperty(Pn,"AwsCrc32",{enumerable:!0,get:function(){return bL.AwsCrc32}})});var Do=c(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.toHex=Mo.fromHex=void 0;var CN={},j_={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),CN[e]=t,j_[t]=e}function NL(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in j_)t[r/2]=j_[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}Mo.fromHex=NL;function xL(e){let t="";for(let r=0;r<e.byteLength;r++)t+=CN[e[r]];return t}Mo.toHex=xL});var W_=c(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.Int64=void 0;var CL=Do(),B_=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&ON(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&ON(t),parseInt((0,CL.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};Cd.Int64=B_;function ON(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}});var z_=c(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.HeaderMarshaller=void 0;var ko=Do(),V_=W_(),$_=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let o of Object.keys(t)){let s=this.fromUtf8(o);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[o]))}let n=new Uint8Array(r.reduce((o,s)=>o+s.byteLength,0)),i=0;for(let o of r)n.set(o,i),i+=o.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(t.value,3),s;case"string":let a=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(a,3),l;case"timestamp":let p=new Uint8Array(9);return p[0]=8,p.set(V_.Int64.fromNumber(t.value.valueOf()).bytes,1),p;case"uuid":if(!DL.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set((0,ko.fromHex)(t.value.replace(/\-/g,"")),1),f}}parse(t){let r={},n=0;for(;n<t.byteLength;){let i=t.getUint8(n++),o=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,i));switch(n+=i,t.getUint8(n++)){case 0:r[o]={type:PN,value:!0};break;case 1:r[o]={type:PN,value:!1};break;case 2:r[o]={type:OL,value:t.getInt8(n++)};break;case 3:r[o]={type:AL,value:t.getInt16(n,!1)},n+=2;break;case 4:r[o]={type:PL,value:t.getInt32(n,!1)},n+=4;break;case 5:r[o]={type:TL,value:new V_.Int64(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let s=t.getUint16(n,!1);n+=2,r[o]={type:IL,value:new Uint8Array(t.buffer,t.byteOffset+n,s)},n+=s;break;case 7:let a=t.getUint16(n,!1);n+=2,r[o]={type:RL,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[o]={type:qL,value:new Date(new V_.Int64(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let u=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[o]={type:ML,value:`${(0,ko.toHex)(u.subarray(0,4))}-${(0,ko.toHex)(u.subarray(4,6))}-${(0,ko.toHex)(u.subarray(6,8))}-${(0,ko.toHex)(u.subarray(8,10))}-${(0,ko.toHex)(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}};Od.HeaderMarshaller=$_;var AN;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(AN||(AN={}));var PN="boolean",OL="byte",AL="short",PL="integer",TL="long",IL="binary",RL="string",qL="timestamp",ML="uuid",DL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/});var IN=c(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.splitMessage=void 0;var kL=xd(),TN=4,Tn=TN*2,Ci=4,FL=Tn+Ci*2;function LL({byteLength:e,byteOffset:t,buffer:r}){if(e<FL)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),i=n.getUint32(0,!1);if(e!==i)throw new Error("Reported message length does not match received message length");let o=n.getUint32(TN,!1),s=n.getUint32(Tn,!1),a=n.getUint32(e-Ci,!1),u=new kL.Crc32().update(new Uint8Array(r,t,Tn));if(s!==u.digest())throw new Error(`The prelude checksum specified in the message (${s}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,t+Tn,e-(Tn+Ci))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Tn+Ci,o),body:new Uint8Array(r,t+Tn+Ci+o,i-o-(Tn+Ci+Ci))}}Ad.splitMessage=LL});var RN=c(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.EventStreamCodec=void 0;var UL=xd(),jL=z_(),BL=IN(),H_=class{constructor(t,r){this.headerMarshaller=new jL.HeaderMarshaller(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),i=n.byteLength+r.byteLength+16,o=new Uint8Array(i),s=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new UL.Crc32;return s.setUint32(0,i,!1),s.setUint32(4,n.byteLength,!1),s.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),s.setUint32(i-4,a.update(o.subarray(8,i-4)).digest(),!1),o}decode(t){let{headers:r,body:n}=(0,BL.splitMessage)(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};Pd.EventStreamCodec=H_});var MN=c(qN=>{"use strict";Object.defineProperty(qN,"__esModule",{value:!0})});var DN=c(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.MessageDecoderStream=void 0;var G_=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};Td.MessageDecoderStream=G_});var kN=c(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.MessageEncoderStream=void 0;var Q_=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};Id.MessageEncoderStream=Q_});var FN=c(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.SmithyMessageDecoderStream=void 0;var K_=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};Rd.SmithyMessageDecoderStream=K_});var LN=c(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.SmithyMessageEncoderStream=void 0;var J_=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};qd.SmithyMessageEncoderStream=J_});var UN=c(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var In=(N(),S(b));In.__exportStar(RN(),cr);In.__exportStar(z_(),cr);In.__exportStar(W_(),cr);In.__exportStar(MN(),cr);In.__exportStar(DN(),cr);In.__exportStar(kN(),cr);In.__exportStar(FN(),cr);In.__exportStar(LN(),cr)});var jN=c(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.normalizeProvider=void 0;var WL=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Md.normalizeProvider=WL});var Oi=c(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});var VL=(N(),S(b));VL.__exportStar(jN(),Y_)});var X_=c(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.isArrayBuffer=void 0;var $L=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Dd.isArrayBuffer=$L});var Ai=c(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.fromString=Fo.fromArrayBuffer=void 0;var zL=X_(),Z_=q("buffer"),HL=(e,t=0,r=e.byteLength-t)=>{if(!(0,zL.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Z_.Buffer.from(e,t,r)};Fo.fromArrayBuffer=HL;var GL=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Z_.Buffer.from(e,t):Z_.Buffer.from(e)};Fo.fromString=GL});var ey=c(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.fromUtf8=void 0;var QL=Ai(),KL=e=>{let t=(0,QL.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};kd.fromUtf8=KL});var BN=c(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.toUint8Array=void 0;var JL=ey(),YL=e=>typeof e=="string"?(0,JL.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);Fd.toUint8Array=YL});var WN=c(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.toUtf8=void 0;var XL=Ai(),ZL=e=>(0,XL.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8");Ld.toUtf8=ZL});var ur=c(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var ty=(N(),S(b));ty.__exportStar(ey(),ec);ty.__exportStar(BN(),ec);ty.__exportStar(WN(),ec)});var Pi=c(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.MAX_PRESIGNED_TTL=x.KEY_TYPE_IDENTIFIER=x.MAX_CACHE_SIZE=x.UNSIGNED_PAYLOAD=x.EVENT_ALGORITHM_IDENTIFIER=x.ALGORITHM_IDENTIFIER_V4A=x.ALGORITHM_IDENTIFIER=x.UNSIGNABLE_PATTERNS=x.SEC_HEADER_PATTERN=x.PROXY_HEADER_PATTERN=x.ALWAYS_UNSIGNABLE_HEADERS=x.HOST_HEADER=x.TOKEN_HEADER=x.SHA256_HEADER=x.SIGNATURE_HEADER=x.GENERATED_HEADERS=x.DATE_HEADER=x.AMZ_DATE_HEADER=x.AUTH_HEADER=x.REGION_SET_PARAM=x.TOKEN_QUERY_PARAM=x.SIGNATURE_QUERY_PARAM=x.EXPIRES_QUERY_PARAM=x.SIGNED_HEADERS_QUERY_PARAM=x.AMZ_DATE_QUERY_PARAM=x.CREDENTIAL_QUERY_PARAM=x.ALGORITHM_QUERY_PARAM=void 0;x.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";x.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";x.AMZ_DATE_QUERY_PARAM="X-Amz-Date";x.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";x.EXPIRES_QUERY_PARAM="X-Amz-Expires";x.SIGNATURE_QUERY_PARAM="X-Amz-Signature";x.TOKEN_QUERY_PARAM="X-Amz-Security-Token";x.REGION_SET_PARAM="X-Amz-Region-Set";x.AUTH_HEADER="authorization";x.AMZ_DATE_HEADER=x.AMZ_DATE_QUERY_PARAM.toLowerCase();x.DATE_HEADER="date";x.GENERATED_HEADERS=[x.AUTH_HEADER,x.AMZ_DATE_HEADER,x.DATE_HEADER];x.SIGNATURE_HEADER=x.SIGNATURE_QUERY_PARAM.toLowerCase();x.SHA256_HEADER="x-amz-content-sha256";x.TOKEN_HEADER=x.TOKEN_QUERY_PARAM.toLowerCase();x.HOST_HEADER="host";x.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};x.PROXY_HEADER_PATTERN=/^proxy-/;x.SEC_HEADER_PATTERN=/^sec-/;x.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];x.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";x.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";x.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";x.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";x.MAX_CACHE_SIZE=50;x.KEY_TYPE_IDENTIFIER="aws4_request";x.MAX_PRESIGNED_TTL=60*60*24*7});var ny=c(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.clearCredentialCache=Rn.getSigningKey=Rn.createScope=void 0;var eU=Do(),tU=ur(),ry=Pi(),Lo={},Ud=[],rU=(e,t,r)=>`${e}/${t}/${r}/${ry.KEY_TYPE_IDENTIFIER}`;Rn.createScope=rU;var nU=async(e,t,r,n,i)=>{let o=await VN(e,t.secretAccessKey,t.accessKeyId),s=`${r}:${n}:${i}:${(0,eU.toHex)(o)}:${t.sessionToken}`;if(s in Lo)return Lo[s];for(Ud.push(s);Ud.length>ry.MAX_CACHE_SIZE;)delete Lo[Ud.shift()];let a=`AWS4${t.secretAccessKey}`;for(let u of[r,n,i,ry.KEY_TYPE_IDENTIFIER])a=await VN(e,a,u);return Lo[s]=a};Rn.getSigningKey=nU;var iU=()=>{Ud.length=0,Object.keys(Lo).forEach(e=>{delete Lo[e]})};Rn.clearCredentialCache=iU;var VN=(e,t,r)=>{let n=new e(t);return n.update((0,tU.toUint8Array)(r)),n.digest()}});var oy=c(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.getCanonicalHeaders=void 0;var iy=Pi(),oU=({headers:e},t,r)=>{let n={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let o=i.toLowerCase();(o in iy.ALWAYS_UNSIGNABLE_HEADERS||t?.has(o)||iy.PROXY_HEADER_PATTERN.test(o)||iy.SEC_HEADER_PATTERN.test(o))&&(!r||r&&!r.has(o))||(n[o]=e[i].trim().replace(/\s+/g," "))}return n};jd.getCanonicalHeaders=oU});var sy=c(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.escapeUri=void 0;var sU=e=>encodeURIComponent(e).replace(/[!'()*]/g,aU);Bd.escapeUri=sU;var aU=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`});var $N=c(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.escapeUriPath=void 0;var cU=sy(),uU=e=>e.split("/").map(cU.escapeUri).join("/");Wd.escapeUriPath=uU});var ay=c(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});var zN=(N(),S(b));zN.__exportStar(sy(),Vd);zN.__exportStar($N(),Vd)});var cy=c(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.getCanonicalQuery=void 0;var $d=ay(),dU=Pi(),lU=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===dU.SIGNATURE_HEADER)continue;t.push(n);let i=e[n];typeof i=="string"?r[n]=`${(0,$d.escapeUri)(n)}=${(0,$d.escapeUri)(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((o,s)=>o.concat([`${(0,$d.escapeUri)(n)}=${(0,$d.escapeUri)(s)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};zd.getCanonicalQuery=lU});var uy=c(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.getPayloadHash=void 0;var pU=X_(),fU=Do(),mU=ur(),HN=Pi(),hU=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===HN.SHA256_HEADER)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,pU.isArrayBuffer)(t)){let n=new r;return n.update((0,mU.toUint8Array)(t)),(0,fU.toHex)(await n.digest())}return HN.UNSIGNED_PAYLOAD};Hd.getPayloadHash=hU});var GN=c(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.deleteHeader=qn.getHeaderValue=qn.hasHeader=void 0;var _U=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};qn.hasHeader=_U;var yU=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return t[r]};qn.getHeaderValue=yU;var gU=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))e===r.toLowerCase()&&delete t[r]};qn.deleteHeader=gU});var dy=c(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.cloneQuery=Ti.cloneRequest=void 0;var EU=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?(0,Ti.cloneQuery)(t):void 0});Ti.cloneRequest=EU;var vU=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});Ti.cloneQuery=vU});var ly=c(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.moveHeadersToQuery=void 0;var wU=dy(),SU=(e,t={})=>{var r;let{headers:n,query:i={}}=typeof e.clone=="function"?e.clone():(0,wU.cloneRequest)(e);for(let o of Object.keys(n)){let s=o.toLowerCase();s.slice(0,6)==="x-amz-"&&!(!((r=t.unhoistableHeaders)===null||r===void 0)&&r.has(s))&&(i[o]=n[o],delete n[o])}return{...e,headers:n,query:i}};Gd.moveHeadersToQuery=SU});var py=c(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.prepareRequest=void 0;var bU=dy(),NU=Pi(),xU=e=>{e=typeof e.clone=="function"?e.clone():(0,bU.cloneRequest)(e);for(let t of Object.keys(e.headers))NU.GENERATED_HEADERS.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};Qd.prepareRequest=xU});var QN=c(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.toDate=Ii.iso8601=void 0;var CU=e=>(0,Ii.toDate)(e).toISOString().replace(/\.\d{3}Z$/,"Z");Ii.iso8601=CU;var OU=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;Ii.toDate=OU});var ZN=c(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.SignatureV4=void 0;var AU=UN(),Kd=Do(),KN=Oi(),tc=ur(),je=Pi(),Jd=ny(),JN=oy(),PU=cy(),fy=uy(),TU=GN(),IU=ly(),YN=py(),RU=QN(),my=class{constructor({applyChecksum:t,credentials:r,region:n,service:i,sha256:o,uriEscapePath:s=!0}){this.headerMarshaller=new AU.HeaderMarshaller(tc.toUtf8,tc.fromUtf8),this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=(0,KN.normalizeProvider)(n),this.credentialProvider=(0,KN.normalizeProvider)(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:s,signableHeaders:a,signingRegion:u,signingService:l}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let f=u??await this.regionProvider(),{longDate:m,shortDate:h}=Yd(n);if(i>je.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let y=(0,Jd.createScope)(h,f,l??this.service),E=(0,IU.moveHeadersToQuery)((0,YN.prepareRequest)(t),{unhoistableHeaders:s});p.sessionToken&&(E.query[je.TOKEN_QUERY_PARAM]=p.sessionToken),E.query[je.ALGORITHM_QUERY_PARAM]=je.ALGORITHM_IDENTIFIER,E.query[je.CREDENTIAL_QUERY_PARAM]=`${p.accessKeyId}/${y}`,E.query[je.AMZ_DATE_QUERY_PARAM]=m,E.query[je.EXPIRES_QUERY_PARAM]=i.toString(10);let w=(0,JN.getCanonicalHeaders)(E,o,a);return E.query[je.SIGNED_HEADERS_QUERY_PARAM]=XN(w),E.query[je.SIGNATURE_QUERY_PARAM]=await this.getSignature(m,y,this.getSigningKey(p,f,h,l),this.createCanonicalRequest(E,w,await(0,fy.getPayloadHash)(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:s}){let a=o??await this.regionProvider(),{shortDate:u,longDate:l}=Yd(n),p=(0,Jd.createScope)(u,a,s??this.service),f=await(0,fy.getPayloadHash)({headers:{},body:r},this.sha256),m=new this.sha256;m.update(t);let h=(0,Kd.toHex)(await m.digest()),y=[je.EVENT_ALGORITHM_IDENTIFIER,l,p,i,h,f].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:t.priorSignature}).then(s=>({message:t.message,signature:s}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=n??await this.regionProvider(),{shortDate:a}=Yd(r),u=new this.sha256(await this.getSigningKey(o,s,a,i));return u.update((0,tc.toUint8Array)(t)),(0,Kd.toHex)(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:o,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let u=o??await this.regionProvider(),l=(0,YN.prepareRequest)(t),{longDate:p,shortDate:f}=Yd(r),m=(0,Jd.createScope)(f,u,s??this.service);l.headers[je.AMZ_DATE_HEADER]=p,a.sessionToken&&(l.headers[je.TOKEN_HEADER]=a.sessionToken);let h=await(0,fy.getPayloadHash)(l,this.sha256);!(0,TU.hasHeader)(je.SHA256_HEADER,l.headers)&&this.applyChecksum&&(l.headers[je.SHA256_HEADER]=h);let y=(0,JN.getCanonicalHeaders)(l,i,n),E=await this.getSignature(p,m,this.getSigningKey(a,u,f,s),this.createCanonicalRequest(l,y,h));return l.headers[je.AUTH_HEADER]=`${je.ALGORITHM_IDENTIFIER} Credential=${a.accessKeyId}/${m}, SignedHeaders=${XN(y)}, Signature=${E}`,l}createCanonicalRequest(t,r,n){let i=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${(0,PU.getCanonicalQuery)(t)}
${i.map(o=>`${o}:${r[o]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(t,r,n){let i=new this.sha256;i.update((0,tc.toUint8Array)(n));let o=await i.digest();return`${je.ALGORITHM_IDENTIFIER}
${t}
${r}
${(0,Kd.toHex)(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,i){let o=await this.createStringToSign(t,r,i),s=new this.sha256(await n);return s.update((0,tc.toUint8Array)(o)),(0,Kd.toHex)(await s.digest())}getSigningKey(t,r,n,i){return(0,Jd.getSigningKey)(this.sha256,t,n,r,i||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};Xd.SignatureV4=my;var Yd=e=>{let t=(0,RU.iso8601)(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},XN=e=>Object.keys(e).sort().join(";")});var tx=c(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.prepareRequest=ut.moveHeadersToQuery=ut.getPayloadHash=ut.getCanonicalQuery=ut.getCanonicalHeaders=void 0;var ex=(N(),S(b));ex.__exportStar(ZN(),ut);var qU=oy();Object.defineProperty(ut,"getCanonicalHeaders",{enumerable:!0,get:function(){return qU.getCanonicalHeaders}});var MU=cy();Object.defineProperty(ut,"getCanonicalQuery",{enumerable:!0,get:function(){return MU.getCanonicalQuery}});var DU=uy();Object.defineProperty(ut,"getPayloadHash",{enumerable:!0,get:function(){return DU.getPayloadHash}});var kU=ly();Object.defineProperty(ut,"moveHeadersToQuery",{enumerable:!0,get:function(){return kU.moveHeadersToQuery}});var FU=py();Object.defineProperty(ut,"prepareRequest",{enumerable:!0,get:function(){return FU.prepareRequest}});ex.__exportStar(ny(),ut)});var nx=c(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.resolveSigV4AuthConfig=jo.resolveAwsAuthConfig=void 0;var LU=X(),hy=tx(),Uo=Oi(),UU=3e5,jU=e=>{let t=e.credentials?rx(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:i}=e,o;return e.signer?o=(0,Uo.normalizeProvider)(e.signer):e.regionInfoProvider?o=()=>(0,Uo.normalizeProvider)(e.region)().then(async s=>[await e.regionInfoProvider(s,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},s]).then(([s,a])=>{let{signingRegion:u,signingService:l}=s;e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||l||e.serviceId;let p={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},f=e.signerConstructor||hy.SignatureV4;return new f(p)}):o=async s=>{s=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,Uo.normalizeProvider)(e.region)(),properties:{}},s);let a=s.signingRegion,u=s.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||u||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},p=e.signerConstructor||hy.SignatureV4;return new p(l)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:o}};jo.resolveAwsAuthConfig=jU;var BU=e=>{let t=e.credentials?rx(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:i}=e,o;return e.signer?o=(0,Uo.normalizeProvider)(e.signer):o=(0,Uo.normalizeProvider)(new hy.SignatureV4({credentials:t,region:e.region,service:e.signingName,sha256:i,uriEscapePath:r})),{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:o}};jo.resolveSigV4AuthConfig=BU;var rx=e=>typeof e=="function"?(0,LU.memoize)(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<UU,t=>t.expiration!==void 0):(0,Uo.normalizeProvider)(e)});var _y=c(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.getSkewCorrectedDate=void 0;var WU=e=>new Date(Date.now()+e);Zd.getSkewCorrectedDate=WU});var ix=c(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.isClockSkewed=void 0;var VU=_y(),$U=(e,t)=>Math.abs((0,VU.getSkewCorrectedDate)(t).getTime()-e)>=3e5;el.isClockSkewed=$U});var ox=c(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.getUpdatedSystemClockOffset=void 0;var zU=ix(),HU=(e,t)=>{let r=Date.parse(e);return(0,zU.isClockSkewed)(r,t)?r-Date.now():t};tl.getUpdatedSystemClockOffset=HU});var ux=c(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.getSigV4AuthPlugin=vt.getAwsAuthPlugin=vt.awsAuthMiddlewareOptions=vt.awsAuthMiddleware=void 0;var cx=et(),GU=_y(),sx=ox(),QU=e=>(t,r)=>async function(n){var i,o,s,a;if(!cx.HttpRequest.isInstance(n.request))return t(n);let u=(s=(o=(i=r.endpointV2)===null||i===void 0?void 0:i.properties)===null||o===void 0?void 0:o.authSchemes)===null||s===void 0?void 0:s[0],l=u?.name==="sigv4a"?(a=u?.signingRegionSet)===null||a===void 0?void 0:a.join(","):void 0,p=await e.signer(u),f=await t({...n,request:await p.sign(n.request,{signingDate:(0,GU.getSkewCorrectedDate)(e.systemClockOffset),signingRegion:l||r.signing_region,signingService:r.signing_service})}).catch(h=>{var y;let E=(y=h.ServerTime)!==null&&y!==void 0?y:ax(h.$response);throw E&&(e.systemClockOffset=(0,sx.getUpdatedSystemClockOffset)(E,e.systemClockOffset)),h}),m=ax(f.response);return m&&(e.systemClockOffset=(0,sx.getUpdatedSystemClockOffset)(m,e.systemClockOffset)),f};vt.awsAuthMiddleware=QU;var ax=e=>{var t,r,n;return cx.HttpResponse.isInstance(e)?(r=(t=e.headers)===null||t===void 0?void 0:t.date)!==null&&r!==void 0?r:(n=e.headers)===null||n===void 0?void 0:n.Date:void 0};vt.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var KU=e=>({applyToStack:t=>{t.addRelativeTo((0,vt.awsAuthMiddleware)(e),vt.awsAuthMiddlewareOptions)}});vt.getAwsAuthPlugin=KU;vt.getSigV4AuthPlugin=vt.getAwsAuthPlugin});var Qr=c(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var dx=(N(),S(b));dx.__exportStar(nx(),rl);dx.__exportStar(ux(),rl)});var lx=c(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.resolveUserAgentConfig=void 0;function JU(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}nl.resolveUserAgentConfig=JU});var px=c((fme,YU)=>{YU.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"}});var yy=c(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getUserAgentPrefix=Gt.useDefaultPartitionInfo=Gt.setPartitionInfo=Gt.partition=void 0;var XU=(N(),S(b)),fx=XU.__importDefault(px()),mx=fx.default,hx="",ZU=e=>{let{partitions:t}=mx;for(let n of t){let{regions:i,outputs:o}=n;for(let[s,a]of Object.entries(i))if(s===e)return{...o,...a}}for(let n of t){let{regionRegex:i,outputs:o}=n;if(new RegExp(i).test(e))return{...o}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};Gt.partition=ZU;var ej=(e,t="")=>{mx=e,hx=t};Gt.setPartitionInfo=ej;var tj=()=>{(0,Gt.setPartitionInfo)(fx.default,"")};Gt.useDefaultPartitionInfo=tj;var rj=()=>hx;Gt.getUserAgentPrefix=rj});var ol=c(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.isIpAddress=void 0;var nj=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ij=e=>nj.test(e)||e.startsWith("[")&&e.endsWith("]");il.isIpAddress=ij});var _x=c(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.debugId=void 0;sl.debugId="endpoints"});var yx=c(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.toDebugString=void 0;function gy(e){return typeof e!="object"||e==null?e:"ref"in e?`$${gy(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(gy).join(", ")})`:JSON.stringify(e,null,2)}al.toDebugString=gy});var rc=c(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var gx=(N(),S(b));gx.__exportStar(_x(),cl);gx.__exportStar(yx(),cl)});var Ex=c(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.EndpointError=void 0;var Ey=class extends Error{constructor(t){super(t),this.name="EndpointError"}};ul.EndpointError=Ey});var wx=c(vx=>{"use strict";Object.defineProperty(vx,"__esModule",{value:!0})});var bx=c(Sx=>{"use strict";Object.defineProperty(Sx,"__esModule",{value:!0})});var xx=c(Nx=>{"use strict";Object.defineProperty(Nx,"__esModule",{value:!0})});var Ox=c(Cx=>{"use strict";Object.defineProperty(Cx,"__esModule",{value:!0})});var Px=c(Ax=>{"use strict";Object.defineProperty(Ax,"__esModule",{value:!0})});var Rt=c(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var Bo=(N(),S(b));Bo.__exportStar(Ex(),Mn);Bo.__exportStar(wx(),Mn);Bo.__exportStar(bx(),Mn);Bo.__exportStar(xx(),Mn);Bo.__exportStar(Ox(),Mn);Bo.__exportStar(Px(),Mn)});var vy=c(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.isValidHostLabel=void 0;var oj=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),sj=(e,t=!1)=>{if(!t)return oj.test(e);let r=e.split(".");for(let n of r)if(!(0,nc.isValidHostLabel)(n))return!1;return!0};nc.isValidHostLabel=sj});var Tx=c(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.isVirtualHostableS3Bucket=void 0;var aj=ol(),cj=vy(),uj=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!(0,ic.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,cj.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,aj.isIpAddress)(e))};ic.isVirtualHostableS3Bucket=uj});var Ix=c(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.parseArn=void 0;var dj=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,i,o,s,...a]=t;return r!=="arn"||n===""||i===""||a[0]===""?null:{partition:n,service:i,region:o,accountId:s,resourceId:a[0].includes("/")?a[0].split("/"):a}};dl.parseArn=dj});var Rx=c(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var wy=(N(),S(b));wy.__exportStar(Tx(),oc);wy.__exportStar(Ix(),oc);wy.__exportStar(yy(),oc)});var qx=c(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.booleanEquals=void 0;var lj=(e,t)=>e===t;ll.booleanEquals=lj});var Dx=c(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.getAttrPathList=void 0;var Mx=Rt(),pj=e=>{let t=e.split("."),r=[];for(let n of t){let i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new Mx.EndpointError(`Path: '${e}' does not end with ']'`);let o=n.slice(i+1,-1);if(Number.isNaN(parseInt(o)))throw new Mx.EndpointError(`Invalid array index: '${o}' in path: '${e}'`);i!==0&&r.push(n.slice(0,i)),r.push(o)}else r.push(n)}return r};pl.getAttrPathList=pj});var kx=c(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.getAttr=void 0;var fj=Rt(),mj=Dx(),hj=(e,t)=>(0,mj.getAttrPathList)(t).reduce((r,n)=>{if(typeof r!="object")throw new fj.EndpointError(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);fl.getAttr=hj});var Fx=c(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.isSet=void 0;var _j=e=>e!=null;ml.isSet=_j});var Lx=c(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.not=void 0;var yj=e=>!e;hl.not=yj});var jx=c(Ux=>{"use strict";Object.defineProperty(Ux,"__esModule",{value:!0})});var Bx=c(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.HttpAuthLocation=void 0;var gj=Po();Object.defineProperty(_l,"HttpAuthLocation",{enumerable:!0,get:function(){return gj.HttpAuthLocation}})});var Vx=c(Wx=>{"use strict";Object.defineProperty(Wx,"__esModule",{value:!0})});var zx=c($x=>{"use strict";Object.defineProperty($x,"__esModule",{value:!0})});var Gx=c(Hx=>{"use strict";Object.defineProperty(Hx,"__esModule",{value:!0})});var Kx=c(Qx=>{"use strict";Object.defineProperty(Qx,"__esModule",{value:!0})});var Yx=c(Jx=>{"use strict";Object.defineProperty(Jx,"__esModule",{value:!0})});var Zx=c(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0})});var tC=c(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0})});var rC=c(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.HostAddressType=void 0;var Ej;(function(e){e.AAAA="AAAA",e.A="A"})(Ej=sc.HostAddressType||(sc.HostAddressType={}))});var iC=c(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0})});var oC=c(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.EndpointURLScheme=void 0;var vj=Po();Object.defineProperty(yl,"EndpointURLScheme",{enumerable:!0,get:function(){return vj.EndpointURLScheme}})});var aC=c(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0})});var uC=c(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0})});var lC=c(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0})});var fC=c(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0})});var hC=c(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0})});var yC=c(_C=>{"use strict";Object.defineProperty(_C,"__esModule",{value:!0})});var EC=c(gC=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0})});var vC=c(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});var ac=(N(),S(b));ac.__exportStar(lC(),Ri);ac.__exportStar(fC(),Ri);ac.__exportStar(hC(),Ri);ac.__exportStar(yC(),Ri);ac.__exportStar(EC(),Ri)});var SC=c(wC=>{"use strict";Object.defineProperty(wC,"__esModule",{value:!0})});var NC=c(bC=>{"use strict";Object.defineProperty(bC,"__esModule",{value:!0})});var CC=c(xC=>{"use strict";Object.defineProperty(xC,"__esModule",{value:!0})});var AC=c(OC=>{"use strict";Object.defineProperty(OC,"__esModule",{value:!0})});var TC=c(PC=>{"use strict";Object.defineProperty(PC,"__esModule",{value:!0})});var RC=c(IC=>{"use strict";Object.defineProperty(IC,"__esModule",{value:!0})});var MC=c(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0})});var kC=c(DC=>{"use strict";Object.defineProperty(DC,"__esModule",{value:!0})});var LC=c(FC=>{"use strict";Object.defineProperty(FC,"__esModule",{value:!0})});var jC=c(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0})});var WC=c(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0})});var $C=c(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0})});var zC=c(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.RequestHandlerProtocol=void 0;var wj=Po();Object.defineProperty(gl,"RequestHandlerProtocol",{enumerable:!0,get:function(){return wj.RequestHandlerProtocol}})});var GC=c(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0})});var KC=c(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0})});var YC=c(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0})});var XC=c($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var H=(N(),S(b));H.__exportStar(jx(),$);H.__exportStar(Bx(),$);H.__exportStar(Vx(),$);H.__exportStar(zx(),$);H.__exportStar(Gx(),$);H.__exportStar(Kx(),$);H.__exportStar(Yx(),$);H.__exportStar(Zx(),$);H.__exportStar(tC(),$);H.__exportStar(rC(),$);H.__exportStar(iC(),$);H.__exportStar(oC(),$);H.__exportStar(aC(),$);H.__exportStar(uC(),$);H.__exportStar(vC(),$);H.__exportStar(SC(),$);H.__exportStar(NC(),$);H.__exportStar(CC(),$);H.__exportStar(AC(),$);H.__exportStar(TC(),$);H.__exportStar(RC(),$);H.__exportStar(MC(),$);H.__exportStar(kC(),$);H.__exportStar(LC(),$);H.__exportStar(jC(),$);H.__exportStar(WC(),$);H.__exportStar($C(),$);H.__exportStar(zC(),$);H.__exportStar(GC(),$);H.__exportStar(KC(),$);H.__exportStar(YC(),$)});var ZC=c(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.parseURL=void 0;var by=XC(),Sj=ol(),Sy={[by.EndpointURLScheme.HTTP]:80,[by.EndpointURLScheme.HTTPS]:443},bj=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:m,port:h,protocol:y="",path:E="",query:w={}}=e,K=new URL(`${y}//${m}${h?`:${h}`:""}${E}`);return K.search=Object.entries(w).map(([J,yn])=>`${J}=${yn}`).join("&"),K}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:i,pathname:o,protocol:s,search:a}=t;if(a)return null;let u=s.slice(0,-1);if(!Object.values(by.EndpointURLScheme).includes(u))return null;let l=(0,Sj.isIpAddress)(i),p=r.includes(`${n}:${Sy[u]}`)||typeof e=="string"&&e.includes(`${n}:${Sy[u]}`),f=`${n}${p?`:${Sy[u]}`:""}`;return{scheme:u,authority:f,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}};El.parseURL=bj});var eO=c(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.stringEquals=void 0;var Nj=(e,t)=>e===t;vl.stringEquals=Nj});var tO=c(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.substring=void 0;var xj=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);wl.substring=xj});var rO=c(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.uriEncode=void 0;var Cj=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);Sl.uriEncode=Cj});var Ny=c(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.aws=void 0;var dr=(N(),S(b));wt.aws=dr.__importStar(Rx());dr.__exportStar(qx(),wt);dr.__exportStar(kx(),wt);dr.__exportStar(Fx(),wt);dr.__exportStar(vy(),wt);dr.__exportStar(Lx(),wt);dr.__exportStar(ZC(),wt);dr.__exportStar(eO(),wt);dr.__exportStar(tO(),wt);dr.__exportStar(rO(),wt)});var xy=c(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.evaluateTemplate=void 0;var Oj=Ny(),Aj=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let o=e.indexOf("{",i);if(o===-1){r.push(e.slice(i));break}r.push(e.slice(i,o));let s=e.indexOf("}",o);if(s===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[s+1]==="}"&&(r.push(e.slice(o+1,s)),i=s+2);let a=e.substring(o+1,s);if(a.includes("#")){let[u,l]=a.split("#");r.push((0,Oj.getAttr)(n[u],l))}else r.push(n[a]);i=s+1}return r.join("")};bl.evaluateTemplate=Aj});var nO=c(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.getReferenceValue=void 0;var Pj=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];Nl.getReferenceValue=Pj});var cc=c(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.evaluateExpression=void 0;var Tj=Rt(),Ij=Cy(),Rj=xy(),qj=nO(),Mj=(e,t,r)=>{if(typeof e=="string")return(0,Rj.evaluateTemplate)(e,r);if(e.fn)return(0,Ij.callFunction)(e,r);if(e.ref)return(0,qj.getReferenceValue)(e,r);throw new Tj.EndpointError(`'${t}': ${String(e)} is not a string, function or reference.`)};xl.evaluateExpression=Mj});var Cy=c(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.callFunction=void 0;var Dj=(N(),S(b)),kj=Dj.__importStar(Ny()),Fj=cc(),Lj=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:(0,Fj.evaluateExpression)(i,"arg",r));return e.split(".").reduce((i,o)=>i[o],kj)(...n)};Cl.callFunction=Lj});var iO=c(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.evaluateCondition=void 0;var Oy=rc(),Uj=Rt(),jj=Cy(),Bj=({assign:e,...t},r)=>{var n,i;if(e&&e in r.referenceRecord)throw new Uj.EndpointError(`'${e}' is already defined in Reference Record.`);let o=(0,jj.callFunction)(t,r);return(i=(n=r.logger)===null||n===void 0?void 0:n.debug)===null||i===void 0||i.call(n,Oy.debugId,`evaluateCondition: ${(0,Oy.toDebugString)(t)} = ${(0,Oy.toDebugString)(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}};Ol.evaluateCondition=Bj});var Pl=c(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.evaluateConditions=void 0;var oO=rc(),Wj=iO(),Vj=(e=[],t)=>{var r,n;let i={};for(let o of e){let{result:s,toAssign:a}=(0,Wj.evaluateCondition)(o,{...t,referenceRecord:{...t.referenceRecord,...i}});if(!s)return{result:s};a&&(i[a.name]=a.value,(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,oO.debugId,`assign: ${a.name} := ${(0,oO.toDebugString)(a.value)}`))}return{result:!0,referenceRecord:i}};Al.evaluateConditions=Vj});var sO=c(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.getEndpointHeaders=void 0;var $j=Rt(),zj=cc(),Hj=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:i.map(o=>{let s=(0,zj.evaluateExpression)(o,"Header value entry",t);if(typeof s!="string")throw new $j.EndpointError(`Header '${n}' value '${s}' is not a string`);return s})}),{});Tl.getEndpointHeaders=Hj});var cO=c(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.getEndpointProperty=void 0;var aO=Rt(),Gj=xy(),Qj=Ay(),Kj=(e,t)=>{if(Array.isArray(e))return e.map(r=>(0,uc.getEndpointProperty)(r,t));switch(typeof e){case"string":return(0,Gj.evaluateTemplate)(e,t);case"object":if(e===null)throw new aO.EndpointError(`Unexpected endpoint property: ${e}`);return(0,Qj.getEndpointProperties)(e,t);case"boolean":return e;default:throw new aO.EndpointError(`Unexpected endpoint property type: ${typeof e}`)}};uc.getEndpointProperty=Kj});var Ay=c(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.getEndpointProperties=void 0;var Jj=cO(),Yj=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:(0,Jj.getEndpointProperty)(i,t)}),{});Il.getEndpointProperties=Yj});var uO=c(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.getEndpointUrl=void 0;var Xj=Rt(),Zj=cc(),eB=(e,t)=>{let r=(0,Zj.evaluateExpression)(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Xj.EndpointError(`Endpoint URL must be a string, got ${typeof r}`)};Rl.getEndpointUrl=eB});var lO=c(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.evaluateEndpointRule=void 0;var dO=rc(),tB=Pl(),rB=sO(),nB=Ay(),iB=uO(),oB=(e,t)=>{var r,n;let{conditions:i,endpoint:o}=e,{result:s,referenceRecord:a}=(0,tB.evaluateConditions)(i,t);if(!s)return;let u={...t,referenceRecord:{...t.referenceRecord,...a}},{url:l,properties:p,headers:f}=o;return(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,dO.debugId,`Resolving endpoint from template: ${(0,dO.toDebugString)(o)}`),{...f!=null&&{headers:(0,rB.getEndpointHeaders)(f,u)},...p!=null&&{properties:(0,nB.getEndpointProperties)(p,u)},url:(0,iB.getEndpointUrl)(l,u)}};ql.evaluateEndpointRule=oB});var pO=c(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.evaluateErrorRule=void 0;var sB=Rt(),aB=Pl(),cB=cc(),uB=(e,t)=>{let{conditions:r,error:n}=e,{result:i,referenceRecord:o}=(0,aB.evaluateConditions)(r,t);if(i)throw new sB.EndpointError((0,cB.evaluateExpression)(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))};Ml.evaluateErrorRule=uB});var fO=c(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.evaluateTreeRule=void 0;var dB=Pl(),lB=Py(),pB=(e,t)=>{let{conditions:r,rules:n}=e,{result:i,referenceRecord:o}=(0,dB.evaluateConditions)(r,t);if(i)return(0,lB.evaluateRules)(n,{...t,referenceRecord:{...t.referenceRecord,...o}})};Dl.evaluateTreeRule=pB});var Py=c(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.evaluateRules=void 0;var mO=Rt(),fB=lO(),mB=pO(),hB=fO(),_B=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=(0,fB.evaluateEndpointRule)(r,t);if(n)return n}else if(r.type==="error")(0,mB.evaluateErrorRule)(r,t);else if(r.type==="tree"){let n=(0,hB.evaluateTreeRule)(r,t);if(n)return n}else throw new mO.EndpointError(`Unknown endpoint rule: ${r}`);throw new mO.EndpointError("Rules evaluation failed")};kl.evaluateRules=_B});var hO=c(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});var yB=(N(),S(b));yB.__exportStar(Py(),Ty)});var _O=c(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.resolveEndpoint=void 0;var Fl=rc(),gB=Rt(),EB=hO(),vB=(e,t)=>{var r,n,i,o,s,a;let{endpointParams:u,logger:l}=t,{parameters:p,rules:f}=e;(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,`${Fl.debugId} Initial EndpointParams: ${(0,Fl.toDebugString)(u)}`);let m=Object.entries(p).filter(([,E])=>E.default!=null).map(([E,w])=>[E,w.default]);if(m.length>0)for(let[E,w]of m)u[E]=(i=u[E])!==null&&i!==void 0?i:w;let h=Object.entries(p).filter(([,E])=>E.required).map(([E])=>E);for(let E of h)if(u[E]==null)throw new gB.EndpointError(`Missing required parameter: '${E}'`);let y=(0,EB.evaluateRules)(f,{endpointParams:u,logger:l,referenceRecord:{}});if(!((o=t.endpointParams)===null||o===void 0)&&o.Endpoint)try{let E=new URL(t.endpointParams.Endpoint),{protocol:w,port:K}=E;y.url.protocol=w,y.url.port=K}catch{}return(a=(s=t.logger)===null||s===void 0?void 0:s.debug)===null||a===void 0||a.call(s,`${Fl.debugId} Resolved endpoint: ${(0,Fl.toDebugString)(y)}`),y};Ll.resolveEndpoint=vB});var Vo=c(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var Ul=(N(),S(b));Ul.__exportStar(yy(),Wo);Ul.__exportStar(ol(),Wo);Ul.__exportStar(_O(),Wo);Ul.__exportStar(Rt(),Wo)});var yO=c(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.UA_ESCAPE_CHAR=He.UA_VALUE_ESCAPE_REGEX=He.UA_NAME_ESCAPE_REGEX=He.UA_NAME_SEPARATOR=He.SPACE=He.X_AMZ_USER_AGENT=He.USER_AGENT=void 0;He.USER_AGENT="user-agent";He.X_AMZ_USER_AGENT="x-amz-user-agent";He.SPACE=" ";He.UA_NAME_SEPARATOR="/";He.UA_NAME_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;He.UA_VALUE_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;He.UA_ESCAPE_CHAR="-"});var gO=c(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.getUserAgentPlugin=lr.getUserAgentMiddlewareOptions=lr.userAgentMiddleware=void 0;var wB=Vo(),SB=et(),dt=yO(),bB=e=>(t,r)=>async n=>{var i,o;let{request:s}=n;if(!SB.HttpRequest.isInstance(s))return t(n);let{headers:a}=s,u=((i=r?.userAgent)===null||i===void 0?void 0:i.map(Iy))||[],l=(await e.defaultUserAgentProvider()).map(Iy),p=((o=e?.customUserAgent)===null||o===void 0?void 0:o.map(Iy))||[],f=(0,wB.getUserAgentPrefix)(),m=(f?[f]:[]).concat([...l,...u,...p]).join(dt.SPACE),h=[...l.filter(y=>y.startsWith("aws-sdk-")),...p].join(dt.SPACE);return e.runtime!=="browser"?(h&&(a[dt.X_AMZ_USER_AGENT]=a[dt.X_AMZ_USER_AGENT]?`${a[dt.USER_AGENT]} ${h}`:h),a[dt.USER_AGENT]=m):a[dt.X_AMZ_USER_AGENT]=m,t({...n,request:s})};lr.userAgentMiddleware=bB;var Iy=e=>{var t;let r=e[0].split(dt.UA_NAME_SEPARATOR).map(a=>a.replace(dt.UA_NAME_ESCAPE_REGEX,dt.UA_ESCAPE_CHAR)).join(dt.UA_NAME_SEPARATOR),n=(t=e[1])===null||t===void 0?void 0:t.replace(dt.UA_VALUE_ESCAPE_REGEX,dt.UA_ESCAPE_CHAR),i=r.indexOf(dt.UA_NAME_SEPARATOR),o=r.substring(0,i),s=r.substring(i+1);return o==="api"&&(s=s.toLowerCase()),[o,s,n].filter(a=>a&&a.length>0).reduce((a,u,l)=>{switch(l){case 0:return u;case 1:return`${a}/${u}`;default:return`${a}#${u}`}},"")};lr.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var NB=e=>({applyToStack:t=>{t.add((0,lr.userAgentMiddleware)(e),lr.getUserAgentMiddlewareOptions)}});lr.getUserAgentPlugin=NB});var dc=c(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var EO=(N(),S(b));EO.__exportStar(lx(),jl);EO.__exportStar(gO(),jl)});var vO=c(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.booleanSelector=qi.SelectorType=void 0;var xB;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(xB=qi.SelectorType||(qi.SelectorType={}));var CB=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};qi.booleanSelector=CB});var qy=c(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});var OB=(N(),S(b));OB.__exportStar(vO(),Ry)});var wO=c(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=qt.DEFAULT_USE_DUALSTACK_ENDPOINT=qt.CONFIG_USE_DUALSTACK_ENDPOINT=qt.ENV_USE_DUALSTACK_ENDPOINT=void 0;var Bl=qy();qt.ENV_USE_DUALSTACK_ENDPOINT="AWS_USE_DUALSTACK_ENDPOINT";qt.CONFIG_USE_DUALSTACK_ENDPOINT="use_dualstack_endpoint";qt.DEFAULT_USE_DUALSTACK_ENDPOINT=!1;qt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>(0,Bl.booleanSelector)(e,qt.ENV_USE_DUALSTACK_ENDPOINT,Bl.SelectorType.ENV),configFileSelector:e=>(0,Bl.booleanSelector)(e,qt.CONFIG_USE_DUALSTACK_ENDPOINT,Bl.SelectorType.CONFIG),default:!1}});var SO=c(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Mt.DEFAULT_USE_FIPS_ENDPOINT=Mt.CONFIG_USE_FIPS_ENDPOINT=Mt.ENV_USE_FIPS_ENDPOINT=void 0;var Wl=qy();Mt.ENV_USE_FIPS_ENDPOINT="AWS_USE_FIPS_ENDPOINT";Mt.CONFIG_USE_FIPS_ENDPOINT="use_fips_endpoint";Mt.DEFAULT_USE_FIPS_ENDPOINT=!1;Mt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>(0,Wl.booleanSelector)(e,Mt.ENV_USE_FIPS_ENDPOINT,Wl.SelectorType.ENV),configFileSelector:e=>(0,Wl.booleanSelector)(e,Mt.CONFIG_USE_FIPS_ENDPOINT,Wl.SelectorType.CONFIG),default:!1}});var NO=c(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.resolveCustomEndpointsConfig=void 0;var bO=Oi(),AB=e=>{var t,r;let{endpoint:n,urlParser:i}=e;return{...e,tls:(t=e.tls)!==null&&t!==void 0?t:!0,endpoint:(0,bO.normalizeProvider)(typeof n=="string"?i(n):n),isCustomEndpoint:!0,useDualstackEndpoint:(0,bO.normalizeProvider)((r=e.useDualstackEndpoint)!==null&&r!==void 0?r:!1)}};Vl.resolveCustomEndpointsConfig=AB});var xO=c($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.getEndpointFromRegion=void 0;var PB=async e=>{var t;let{tls:r=!0}=e,n=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:a}=(t=await e.regionInfoProvider(n,{useDualstackEndpoint:o,useFipsEndpoint:s}))!==null&&t!==void 0?t:{};if(!a)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${r?"https:":"http:"}//${a}`)};$l.getEndpointFromRegion=PB});var OO=c(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.resolveEndpointsConfig=void 0;var CO=Oi(),TB=xO(),IB=e=>{var t,r;let n=(0,CO.normalizeProvider)((t=e.useDualstackEndpoint)!==null&&t!==void 0?t:!1),{endpoint:i,useFipsEndpoint:o,urlParser:s}=e;return{...e,tls:(r=e.tls)!==null&&r!==void 0?r:!0,endpoint:i?(0,CO.normalizeProvider)(typeof i=="string"?s(i):i):()=>(0,TB.getEndpointFromRegion)({...e,useDualstackEndpoint:n,useFipsEndpoint:o}),isCustomEndpoint:!!i,useDualstackEndpoint:n}};zl.resolveEndpointsConfig=IB});var AO=c($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});var Hl=(N(),S(b));Hl.__exportStar(wO(),$o);Hl.__exportStar(SO(),$o);Hl.__exportStar(NO(),$o);Hl.__exportStar(OO(),$o)});var PO=c(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.NODE_REGION_CONFIG_FILE_OPTIONS=Dt.NODE_REGION_CONFIG_OPTIONS=Dt.REGION_INI_NAME=Dt.REGION_ENV_NAME=void 0;Dt.REGION_ENV_NAME="AWS_REGION";Dt.REGION_INI_NAME="region";Dt.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:e=>e[Dt.REGION_ENV_NAME],configFileSelector:e=>e[Dt.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};Dt.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var My=c(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.isFipsRegion=void 0;var RB=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));Gl.isFipsRegion=RB});var TO=c(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.getRealRegion=void 0;var qB=My(),MB=e=>(0,qB.isFipsRegion)(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;Ql.getRealRegion=MB});var RO=c(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.resolveRegionConfig=void 0;var IO=TO(),DB=My(),kB=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return(0,IO.getRealRegion)(t);let n=await t();return(0,IO.getRealRegion)(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return(0,DB.isFipsRegion)(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};Kl.resolveRegionConfig=kB});var MO=c(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var qO=(N(),S(b));qO.__exportStar(PO(),Jl);qO.__exportStar(RO(),Jl)});var kO=c(DO=>{"use strict";Object.defineProperty(DO,"__esModule",{value:!0})});var LO=c(FO=>{"use strict";Object.defineProperty(FO,"__esModule",{value:!0})});var UO=c(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.getHostnameFromVariants=void 0;var FB=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>{var n;return(n=e.find(({tags:i})=>t===i.includes("fips")&&r===i.includes("dualstack")))===null||n===void 0?void 0:n.hostname};Yl.getHostnameFromVariants=FB});var jO=c(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.getResolvedHostname=void 0;var LB=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0);Xl.getResolvedHostname=LB});var BO=c(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.getResolvedPartition=void 0;var UB=(e,{partitionHash:t})=>{var r;return(r=Object.keys(t||{}).find(n=>t[n].regions.includes(e)))!==null&&r!==void 0?r:"aws"};Zl.getResolvedPartition=UB});var WO=c(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.getResolvedSigningRegion=void 0;var jB=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let i=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(i);if(o)return o[0].slice(1,-1)}};ep.getResolvedSigningRegion=jB});var $O=c(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.getRegionInfo=void 0;var VO=UO(),BB=jO(),WB=BO(),VB=WO(),$B=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:i,partitionHash:o})=>{var s,a,u,l,p,f;let m=(0,WB.getResolvedPartition)(e,{partitionHash:o}),h=e in i?e:(a=(s=o[m])===null||s===void 0?void 0:s.endpoint)!==null&&a!==void 0?a:e,y={useFipsEndpoint:t,useDualstackEndpoint:r},E=(0,VO.getHostnameFromVariants)((u=i[h])===null||u===void 0?void 0:u.variants,y),w=(0,VO.getHostnameFromVariants)((l=o[m])===null||l===void 0?void 0:l.variants,y),K=(0,BB.getResolvedHostname)(h,{regionHostname:E,partitionHostname:w});if(K===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:h,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let J=(0,VB.getResolvedSigningRegion)(K,{signingRegion:(p=i[h])===null||p===void 0?void 0:p.signingRegion,regionRegex:o[m].regionRegex,useFipsEndpoint:t});return{partition:m,signingService:n,hostname:K,...J&&{signingRegion:J},...((f=i[h])===null||f===void 0?void 0:f.signingService)&&{signingService:i[h].signingService}}};tp.getRegionInfo=$B});var zO=c(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var Dy=(N(),S(b));Dy.__exportStar(kO(),lc);Dy.__exportStar(LO(),lc);Dy.__exportStar($O(),lc)});var pr=c(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var ky=(N(),S(b));ky.__exportStar(AO(),pc);ky.__exportStar(MO(),pc);ky.__exportStar(zO(),pc)});var fc=c(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getContentLengthPlugin=Kr.contentLengthMiddlewareOptions=Kr.contentLengthMiddleware=void 0;var zB=et(),HO="content-length";function GO(e){return t=>async r=>{let n=r.request;if(zB.HttpRequest.isInstance(n)){let{body:i,headers:o}=n;if(i&&Object.keys(o).map(s=>s.toLowerCase()).indexOf(HO)===-1)try{let s=e(i);n.headers={...n.headers,[HO]:String(s)}}catch{}}return t({...r,request:n})}}Kr.contentLengthMiddleware=GO;Kr.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var HB=e=>({applyToStack:t=>{t.add(GO(e.bodyLengthChecker),Kr.contentLengthMiddlewareOptions)}});Kr.getContentLengthPlugin=HB});var QO=c(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.isArnBucketName=lt.isDnsCompatibleBucketName=lt.S3_HOSTNAME_PATTERN=lt.DOT_PATTERN=lt.resolveParamsForS3=void 0;var GB=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(0,lt.isArnBucketName)(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!(0,lt.isDnsCompatibleBucketName)(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e};lt.resolveParamsForS3=GB;var QB=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,KB=/(\d+\.){3}\d+/,JB=/\.\./;lt.DOT_PATTERN=/\./;lt.S3_HOSTNAME_PATTERN=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;var YB=e=>QB.test(e)&&!KB.test(e)&&!JB.test(e);lt.isDnsCompatibleBucketName=YB;var XB=e=>{let[t,r,n,i,o,s]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,u=[t,r,n,o,s].filter(Boolean).length===5;if(a&&!u)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!o&&!!s};lt.isArnBucketName=XB});var KO=c(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});var ZB=(N(),S(b));ZB.__exportStar(QO(),Fy)});var JO=c(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.createConfigValueProvider=void 0;var eW=(e,t,r)=>{let n=async()=>{var i;let o=(i=r[e])!==null&&i!==void 0?i:r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:o,hostname:s,port:a,path:u}=i;return`${o}//${s}${a?":"+a:""}${u}`}}return i}:n};rp.createConfigValueProvider=eW});var Ly=c(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.resolveParams=Mi.getEndpointFromInstructions=void 0;var tW=KO(),rW=JO(),nW=async(e,t,r,n)=>{let i=await(0,Mi.resolveParams)(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)};Mi.getEndpointFromInstructions=nW;var iW=async(e,t,r)=>{var n;let i={},o=((n=t?.getEndpointParameterInstructions)===null||n===void 0?void 0:n.call(t))||{};for(let[s,a]of Object.entries(o))switch(a.type){case"staticContextParams":i[s]=a.value;break;case"contextParams":i[s]=e[a.name];break;case"clientContextParams":case"builtInParams":i[s]=await(0,rW.createConfigValueProvider)(a.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(i,r),String(r.serviceId).toLowerCase()==="s3"&&await(0,tW.resolveParamsForS3)(i),i};Mi.resolveParams=iW});var YO=c(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.parseQueryString=void 0;function oW(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in t?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i}return t}np.parseQueryString=oW});var Di=c(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.parseUrl=void 0;var sW=YO(),aW=e=>{if(typeof e=="string")return(0,mc.parseUrl)(new URL(e));let{hostname:t,pathname:r,port:n,protocol:i,search:o}=e,s;return o&&(s=(0,sW.parseQueryString)(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:i,path:r,query:s}};mc.parseUrl=aW});var Uy=c(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.toEndpointV1=void 0;var XO=Di(),cW=e=>typeof e=="object"?"url"in e?(0,XO.parseUrl)(e.url):e:(0,XO.parseUrl)(e);ip.toEndpointV1=cW});var eA=c(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});var ZO=(N(),S(b));ZO.__exportStar(Ly(),op);ZO.__exportStar(Uy(),op)});var jy=c(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.endpointMiddleware=void 0;var uW=Ly(),dW=({config:e,instructions:t})=>(r,n)=>async i=>{var o,s;let a=await(0,uW.getEndpointFromInstructions)(i.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=a,n.authSchemes=(o=a.properties)===null||o===void 0?void 0:o.authSchemes;let u=(s=n.authSchemes)===null||s===void 0?void 0:s[0];return u&&(n.signing_region=u.signingRegion,n.signing_service=u.signingName),r({...i})};sp.endpointMiddleware=dW});var By=c(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.deserializerMiddleware=void 0;var lW=(e,t)=>(r,n)=>async i=>{let{response:o}=await r(i);try{let s=await t(o,e);return{response:o,output:s}}catch(s){if(Object.defineProperty(s,"$response",{value:o}),!("$metadata"in s)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";s.message+=`
  `+a}throw s}};ap.deserializerMiddleware=lW});var Wy=c(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.serializerMiddleware=void 0;var pW=(e,t)=>(r,n)=>async i=>{var o;let s=!((o=n.endpointV2)===null||o===void 0)&&o.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await t(i.input,{...e,endpoint:s});return r({...i,request:a})};cp.serializerMiddleware=pW});var tA=c(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.getSerdePlugin=fr.serializerMiddlewareOption=fr.deserializerMiddlewareOption=void 0;var fW=By(),mW=Wy();fr.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};fr.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function hW(e,t,r){return{applyToStack:n=>{n.add((0,fW.deserializerMiddleware)(e,r),fr.deserializerMiddlewareOption),n.add((0,mW.serializerMiddleware)(e,t),fr.serializerMiddlewareOption)}}}fr.getSerdePlugin=hW});var _e=c(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var Vy=(N(),S(b));Vy.__exportStar(By(),hc);Vy.__exportStar(tA(),hc);Vy.__exportStar(Wy(),hc)});var rA=c(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.getEndpointPlugin=ki.endpointMiddlewareOptions=void 0;var _W=_e(),yW=jy();ki.endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:_W.serializerMiddlewareOption.name};var gW=(e,t)=>({applyToStack:r=>{r.addRelativeTo((0,yW.endpointMiddleware)({config:e,instructions:t}),ki.endpointMiddlewareOptions)}});ki.getEndpointPlugin=gW});var nA=c(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.resolveEndpointConfig=void 0;var $y=Oi(),EW=Uy(),vW=e=>{var t,r,n;let i=(t=e.tls)!==null&&t!==void 0?t:!0,{endpoint:o}=e,s=o!=null?async()=>(0,EW.toEndpointV1)(await(0,$y.normalizeProvider)(o)()):void 0;return{...e,endpoint:s,tls:i,isCustomEndpoint:!!o,useDualstackEndpoint:(0,$y.normalizeProvider)((r=e.useDualstackEndpoint)!==null&&r!==void 0?r:!1),useFipsEndpoint:(0,$y.normalizeProvider)((n=e.useFipsEndpoint)!==null&&n!==void 0?n:!1)}};up.resolveEndpointConfig=vW});var oA=c(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0})});var ee=c(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var _c=(N(),S(b));_c.__exportStar(eA(),Fi);_c.__exportStar(jy(),Fi);_c.__exportStar(rA(),Fi);_c.__exportStar(nA(),Fi);_c.__exportStar(oA(),Fi)});var dp=c(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.DEFAULT_RETRY_MODE=Jr.DEFAULT_MAX_ATTEMPTS=Jr.RETRY_MODES=void 0;var sA;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(sA=Jr.RETRY_MODES||(Jr.RETRY_MODES={}));Jr.DEFAULT_MAX_ATTEMPTS=3;Jr.DEFAULT_RETRY_MODE=sA.STANDARD});var aA=c(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.NODEJS_TIMEOUT_ERROR_CODES=kt.TRANSIENT_ERROR_STATUS_CODES=kt.TRANSIENT_ERROR_CODES=kt.THROTTLING_ERROR_CODES=kt.CLOCK_SKEW_ERROR_CODES=void 0;kt.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];kt.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];kt.TRANSIENT_ERROR_CODES=["TimeoutError","RequestTimeout","RequestTimeoutException"];kt.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504];kt.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"]});var gc=c(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.isServerError=St.isTransientError=St.isThrottlingError=St.isClockSkewError=St.isRetryableByTrait=void 0;var yc=aA(),wW=e=>e.$retryable!==void 0;St.isRetryableByTrait=wW;var SW=e=>yc.CLOCK_SKEW_ERROR_CODES.includes(e.name);St.isClockSkewError=SW;var bW=e=>{var t,r;return((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)===429||yc.THROTTLING_ERROR_CODES.includes(e.name)||((r=e.$retryable)===null||r===void 0?void 0:r.throttling)==!0};St.isThrottlingError=bW;var NW=e=>{var t;return yc.TRANSIENT_ERROR_CODES.includes(e.name)||yc.NODEJS_TIMEOUT_ERROR_CODES.includes(e?.code||"")||yc.TRANSIENT_ERROR_STATUS_CODES.includes(((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)||0)};St.isTransientError=NW;var xW=e=>{var t;if(((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!(0,St.isTransientError)(e)}return!1};St.isServerError=xW});var Hy=c(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.DefaultRateLimiter=void 0;var CW=gc(),zy=class{constructor(t){var r,n,i,o,s;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=t?.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(n=t?.minCapacity)!==null&&n!==void 0?n:1,this.minFillRate=(i=t?.minFillRate)!==null&&i!==void 0?i:.5,this.scaleConstant=(o=t?.scaleConstant)!==null&&o!==void 0?o:.4,this.smooth=(s=t?.smooth)!==null&&s!==void 0?s:.8;let a=this.getCurrentTimeInSeconds();this.lastThrottleTime=a,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),(0,CW.isThrottlingError)(t)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};lp.DefaultRateLimiter=zy});var zo=c(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.REQUEST_HEADER=Oe.INVOCATION_ID_HEADER=Oe.NO_RETRY_INCREMENT=Oe.TIMEOUT_RETRY_COST=Oe.RETRY_COST=Oe.INITIAL_RETRY_TOKENS=Oe.THROTTLING_RETRY_DELAY_BASE=Oe.MAXIMUM_RETRY_DELAY=Oe.DEFAULT_RETRY_DELAY_BASE=void 0;Oe.DEFAULT_RETRY_DELAY_BASE=100;Oe.MAXIMUM_RETRY_DELAY=20*1e3;Oe.THROTTLING_RETRY_DELAY_BASE=500;Oe.INITIAL_RETRY_TOKENS=500;Oe.RETRY_COST=5;Oe.TIMEOUT_RETRY_COST=10;Oe.NO_RETRY_INCREMENT=1;Oe.INVOCATION_ID_HEADER="amz-sdk-invocation-id";Oe.REQUEST_HEADER="amz-sdk-request"});var uA=c(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.getDefaultRetryBackoffStrategy=void 0;var cA=zo(),OW=()=>{let e=cA.DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:n=>Math.floor(Math.min(cA.MAXIMUM_RETRY_DELAY,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};pp.getDefaultRetryBackoffStrategy=OW});var dA=c(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.createDefaultRetryToken=void 0;var AW=zo(),PW=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(AW.MAXIMUM_RETRY_DELAY,e),getRetryCost:()=>r});fp.createDefaultRetryToken=PW});var hp=c(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.StandardRetryStrategy=void 0;var Gy=dp(),Dn=zo(),TW=uA(),lA=dA(),Qy=class{constructor(t){this.maxAttempts=t,this.mode=Gy.RETRY_MODES.STANDARD,this.capacity=Dn.INITIAL_RETRY_TOKENS,this.retryBackoffStrategy=(0,TW.getDefaultRetryBackoffStrategy)(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return(0,lA.createDefaultRetryToken)({retryDelay:Dn.DEFAULT_RETRY_DELAY_BASE,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let i=r.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?Dn.THROTTLING_RETRY_DELAY_BASE:Dn.DEFAULT_RETRY_DELAY_BASE);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(i);return this.capacity-=a,(0,lA.createDefaultRetryToken)({retryDelay:s,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){var r;this.capacity=Math.max(Dn.INITIAL_RETRY_TOKENS,this.capacity+((r=t.getRetryCost())!==null&&r!==void 0?r:Dn.NO_RETRY_INCREMENT))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Gy.DEFAULT_MAX_ATTEMPTS}`),Gy.DEFAULT_MAX_ATTEMPTS}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Dn.TIMEOUT_RETRY_COST:Dn.RETRY_COST}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};mp.StandardRetryStrategy=Qy});var pA=c(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.AdaptiveRetryStrategy=void 0;var IW=dp(),RW=Hy(),qW=hp(),Ky=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=IW.RETRY_MODES.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new RW.DefaultRateLimiter,this.standardRetryStrategy=new qW.StandardRetryStrategy(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};_p.AdaptiveRetryStrategy=Ky});var fA=c(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.ConfiguredRetryStrategy=void 0;var MW=zo(),DW=hp(),Jy=class extends DW.StandardRetryStrategy{constructor(t,r=MW.DEFAULT_RETRY_DELAY_BASE){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};yp.ConfiguredRetryStrategy=Jy});var hA=c(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0})});var Ft=c(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var Li=(N(),S(b));Li.__exportStar(pA(),Yr);Li.__exportStar(fA(),Yr);Li.__exportStar(Hy(),Yr);Li.__exportStar(hp(),Yr);Li.__exportStar(dp(),Yr);Li.__exportStar(zo(),Yr);Li.__exportStar(hA(),Yr)});import kW from"crypto";function Ec(){return gp>Ep.length-16&&(kW.randomFillSync(Ep),gp=0),Ep.slice(gp,gp+=16)}var Ep,gp,Yy=Le(()=>{Ep=new Uint8Array(256),gp=Ep.length});var _A,yA=Le(()=>{_A=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function FW(e){return typeof e=="string"&&_A.test(e)}var kn,vc=Le(()=>{yA();kn=FW});function LW(e,t=0){let r=(Be[e[t+0]]+Be[e[t+1]]+Be[e[t+2]]+Be[e[t+3]]+"-"+Be[e[t+4]]+Be[e[t+5]]+"-"+Be[e[t+6]]+Be[e[t+7]]+"-"+Be[e[t+8]]+Be[e[t+9]]+"-"+Be[e[t+10]]+Be[e[t+11]]+Be[e[t+12]]+Be[e[t+13]]+Be[e[t+14]]+Be[e[t+15]]).toLowerCase();if(!kn(r))throw TypeError("Stringified UUID is invalid");return r}var Be,Fn,wc=Le(()=>{vc();Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).substr(1));Fn=LW});function UW(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||gA,s=e.clockseq!==void 0?e.clockseq:Xy;if(o==null||s==null){let m=e.random||(e.rng||Ec)();o==null&&(o=gA=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),s==null&&(s=Xy=(m[6]<<8|m[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:eg+1,l=a-Zy+(u-eg)/1e4;if(l<0&&e.clockseq===void 0&&(s=s+1&16383),(l<0||a>Zy)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Zy=a,eg=u,Xy=s,a+=122192928e5;let p=((a&268435455)*1e4+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=p&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let m=0;m<6;++m)i[n+m]=o[m];return t||Fn(i)}var gA,Xy,Zy,eg,EA,vA=Le(()=>{Yy();wc();Zy=0,eg=0;EA=UW});function jW(e){if(!kn(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var vp,tg=Le(()=>{vc();vp=jW});function BW(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function wp(e,t,r){function n(i,o,s,a){if(typeof i=="string"&&(i=BW(i)),typeof o=="string"&&(o=vp(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=u[l];return s}return Fn(u)}try{n.name=e}catch{}return n.DNS=WW,n.URL=VW,n}var WW,VW,rg=Le(()=>{wc();tg();WW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",VW="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import $W from"crypto";function zW(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),$W.createHash("md5").update(e).digest()}var wA,SA=Le(()=>{wA=zW});var HW,bA,NA=Le(()=>{rg();SA();HW=wp("v3",48,wA),bA=HW});function GW(e,t,r){e=e||{};let n=e.random||(e.rng||Ec)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Fn(n)}var xA,CA=Le(()=>{Yy();wc();xA=GW});import QW from"crypto";function KW(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),QW.createHash("sha1").update(e).digest()}var OA,AA=Le(()=>{OA=KW});var JW,PA,TA=Le(()=>{rg();AA();JW=wp("v5",80,OA),PA=JW});var IA,RA=Le(()=>{IA="00000000-0000-0000-0000-000000000000"});function YW(e){if(!kn(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var qA,MA=Le(()=>{vc();qA=YW});var ng={};kh(ng,{NIL:()=>IA,parse:()=>vp,stringify:()=>Fn,v1:()=>EA,v3:()=>bA,v4:()=>xA,v5:()=>PA,validate:()=>kn,version:()=>qA});var ig=Le(()=>{vA();NA();CA();TA();RA();MA();vc();wc();tg()});var DA=c(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.getDefaultRetryQuota=void 0;var og=Ft(),XW=(e,t)=>{var r,n,i;let o=e,s=(r=t?.noRetryIncrement)!==null&&r!==void 0?r:og.NO_RETRY_INCREMENT,a=(n=t?.retryCost)!==null&&n!==void 0?n:og.RETRY_COST,u=(i=t?.timeoutRetryCost)!==null&&i!==void 0?i:og.TIMEOUT_RETRY_COST,l=e,p=y=>y.name==="TimeoutError"?u:a,f=y=>p(y)<=l;return Object.freeze({hasRetryTokens:f,retrieveRetryTokens:y=>{if(!f(y))throw new Error("No retry token available");let E=p(y);return l-=E,E},releaseRetryTokens:y=>{l+=y??s,l=Math.min(l,o)}})};Sp.getDefaultRetryQuota=XW});var sg=c(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.defaultDelayDecider=void 0;var ZW=Ft(),e2=(e,t)=>Math.floor(Math.min(ZW.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e));bp.defaultDelayDecider=e2});var ag=c(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.defaultRetryDecider=void 0;var Np=gc(),t2=e=>e?(0,Np.isRetryableByTrait)(e)||(0,Np.isClockSkewError)(e)||(0,Np.isThrottlingError)(e)||(0,Np.isTransientError)(e):!1;xp.defaultRetryDecider=t2});var cg=c(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.asSdkError=void 0;var r2=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);Cp.asSdkError=r2});var lg=c(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.StandardRetryStrategy=void 0;var ug=et(),n2=gc(),Ui=Ft(),i2=(ig(),S(ng)),o2=DA(),s2=sg(),a2=ag(),c2=cg(),dg=class{constructor(t,r){var n,i,o;this.maxAttemptsProvider=t,this.mode=Ui.RETRY_MODES.STANDARD,this.retryDecider=(n=r?.retryDecider)!==null&&n!==void 0?n:a2.defaultRetryDecider,this.delayDecider=(i=r?.delayDecider)!==null&&i!==void 0?i:s2.defaultDelayDecider,this.retryQuota=(o=r?.retryQuota)!==null&&o!==void 0?o:(0,o2.getDefaultRetryQuota)(Ui.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ui.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let i,o=0,s=0,a=await this.getMaxAttempts(),{request:u}=r;for(ug.HttpRequest.isInstance(u)&&(u.headers[Ui.INVOCATION_ID_HEADER]=(0,i2.v4)());;)try{ug.HttpRequest.isInstance(u)&&(u.headers[Ui.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:p}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(i),p.$metadata.attempts=o+1,p.$metadata.totalRetryDelay=s,{response:l,output:p}}catch(l){let p=(0,c2.asSdkError)(l);if(o++,this.shouldRetry(p,o,a)){i=this.retryQuota.retrieveRetryTokens(p);let f=this.delayDecider((0,n2.isThrottlingError)(p)?Ui.THROTTLING_RETRY_DELAY_BASE:Ui.DEFAULT_RETRY_DELAY_BASE,o),m=u2(p.$response),h=Math.max(m||0,f);s+=h,await new Promise(y=>setTimeout(y,h));continue}throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=o,p.$metadata.totalRetryDelay=s,p}}};Op.StandardRetryStrategy=dg;var u2=e=>{if(!ug.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3}});var FA=c(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.AdaptiveRetryStrategy=void 0;var kA=Ft(),d2=lg(),pg=class extends d2.StandardRetryStrategy{constructor(t,r){let{rateLimiter:n,...i}=r??{};super(t,i),this.rateLimiter=n??new kA.DefaultRateLimiter,this.mode=kA.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};Ap.AdaptiveRetryStrategy=pg});var UA=c(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.NODE_RETRY_MODE_CONFIG_OPTIONS=we.CONFIG_RETRY_MODE=we.ENV_RETRY_MODE=we.resolveRetryConfig=we.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=we.CONFIG_MAX_ATTEMPTS=we.ENV_MAX_ATTEMPTS=void 0;var LA=Oi(),Ho=Ft();we.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";we.CONFIG_MAX_ATTEMPTS="max_attempts";we.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:e=>{let t=e[we.ENV_MAX_ATTEMPTS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${we.ENV_MAX_ATTEMPTS} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[we.CONFIG_MAX_ATTEMPTS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${we.CONFIG_MAX_ATTEMPTS} mast be a number, got "${t}"`);return r},default:Ho.DEFAULT_MAX_ATTEMPTS};var l2=e=>{var t;let{retryStrategy:r}=e,n=(0,LA.normalizeProvider)((t=e.maxAttempts)!==null&&t!==void 0?t:Ho.DEFAULT_MAX_ATTEMPTS);return{...e,maxAttempts:n,retryStrategy:async()=>r||(await(0,LA.normalizeProvider)(e.retryMode)()===Ho.RETRY_MODES.ADAPTIVE?new Ho.AdaptiveRetryStrategy(n):new Ho.StandardRetryStrategy(n))}};we.resolveRetryConfig=l2;we.ENV_RETRY_MODE="AWS_RETRY_MODE";we.CONFIG_RETRY_MODE="retry_mode";we.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[we.ENV_RETRY_MODE],configFileSelector:e=>e[we.CONFIG_RETRY_MODE],default:Ho.DEFAULT_RETRY_MODE}});var BA=c(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.getOmitRetryHeadersPlugin=mr.omitRetryHeadersMiddlewareOptions=mr.omitRetryHeadersMiddleware=void 0;var p2=et(),jA=Ft(),f2=()=>e=>async t=>{let{request:r}=t;return p2.HttpRequest.isInstance(r)&&(delete r.headers[jA.INVOCATION_ID_HEADER],delete r.headers[jA.REQUEST_HEADER]),e(t)};mr.omitRetryHeadersMiddleware=f2;mr.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var m2=e=>({applyToStack:t=>{t.addRelativeTo((0,mr.omitRetryHeadersMiddleware)(),mr.omitRetryHeadersMiddlewareOptions)}});mr.getOmitRetryHeadersPlugin=m2});var VA=c(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.getRetryAfterHint=bt.getRetryPlugin=bt.retryMiddlewareOptions=bt.retryMiddleware=void 0;var mg=et(),fg=gc(),WA=Ft(),h2=(ig(),S(ng)),_2=cg(),y2=e=>(t,r)=>async n=>{let i=await e.retryStrategy(),o=await e.maxAttempts();if(g2(i)){i=i;let s=await i.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,l=0,{request:p}=n;for(mg.HttpRequest.isInstance(p)&&(p.headers[WA.INVOCATION_ID_HEADER]=(0,h2.v4)());;)try{mg.HttpRequest.isInstance(p)&&(p.headers[WA.REQUEST_HEADER]=`attempt=${u+1}; max=${o}`);let{response:f,output:m}=await t(n);return i.recordSuccess(s),m.$metadata.attempts=u+1,m.$metadata.totalRetryDelay=l,{response:f,output:m}}catch(f){let m=E2(f);a=(0,_2.asSdkError)(f);try{s=await i.refreshRetryTokenForRetry(s,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=l,a}u=s.getRetryCount();let h=s.getRetryDelay();l+=h,await new Promise(y=>setTimeout(y,h))}}else return i=i,i?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(t,n)};bt.retryMiddleware=y2;var g2=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",E2=e=>{let t={errorType:v2(e)},r=(0,bt.getRetryAfterHint)(e.$response);return r&&(t.retryAfterHint=r),t},v2=e=>(0,fg.isThrottlingError)(e)?"THROTTLING":(0,fg.isTransientError)(e)?"TRANSIENT":(0,fg.isServerError)(e)?"SERVER_ERROR":"CLIENT_ERROR";bt.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var w2=e=>({applyToStack:t=>{t.add((0,bt.retryMiddleware)(e),bt.retryMiddlewareOptions)}});bt.getRetryPlugin=w2;var S2=e=>{if(!mg.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};bt.getRetryAfterHint=S2});var Zr=c(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});var ji=(N(),S(b));ji.__exportStar(FA(),Xr);ji.__exportStar(lg(),Xr);ji.__exportStar(UA(),Xr);ji.__exportStar(sg(),Xr);ji.__exportStar(BA(),Xr);ji.__exportStar(ag(),Xr);ji.__exportStar(VA(),Xr)});var $A=c(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.NoOpLogger=void 0;var hg=class{trace(){}debug(){}info(){}warn(){}error(){}};Pp.NoOpLogger=hg});var GA=c(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.constructStack=void 0;var b2=()=>{let e=[],t=[],r=new Set,n=p=>p.sort((f,m)=>zA[m.step]-zA[f.step]||HA[m.priority||"normal"]-HA[f.priority||"normal"]),i=p=>{let f=!1,m=h=>h.name&&h.name===p?(f=!0,r.delete(p),!1):!0;return e=e.filter(m),t=t.filter(m),f},o=p=>{let f=!1,m=h=>h.middleware===p?(f=!0,h.name&&r.delete(h.name),!1):!0;return e=e.filter(m),t=t.filter(m),f},s=p=>(e.forEach(f=>{p.add(f.middleware,{...f})}),t.forEach(f=>{p.addRelativeTo(f.middleware,{...f})}),p),a=p=>{let f=[];return p.before.forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...a(m))}),f.push(p),p.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...a(m))}),f},u=(p=!1)=>{let f=[],m=[],h={};return e.forEach(E=>{let w={...E,before:[],after:[]};w.name&&(h[w.name]=w),f.push(w)}),t.forEach(E=>{let w={...E,before:[],after:[]};w.name&&(h[w.name]=w),m.push(w)}),m.forEach(E=>{if(E.toMiddleware){let w=h[E.toMiddleware];if(w===void 0){if(p)return;throw new Error(`${E.toMiddleware} is not found when adding ${E.name||"anonymous"} middleware ${E.relation} ${E.toMiddleware}`)}E.relation==="after"&&w.after.push(E),E.relation==="before"&&w.before.push(E)}}),n(f).map(a).reduce((E,w)=>(E.push(...w),E),[])},l={add:(p,f={})=>{let{name:m,override:h}=f,y={step:"initialize",priority:"normal",middleware:p,...f};if(m){if(r.has(m)){if(!h)throw new Error(`Duplicate middleware name '${m}'`);let E=e.findIndex(K=>K.name===m),w=e[E];if(w.step!==y.step||w.priority!==y.priority)throw new Error(`"${m}" middleware with ${w.priority} priority in ${w.step} step cannot be overridden by same-name middleware with ${y.priority} priority in ${y.step} step.`);e.splice(E,1)}r.add(m)}e.push(y)},addRelativeTo:(p,f)=>{let{name:m,override:h}=f,y={middleware:p,...f};if(m){if(r.has(m)){if(!h)throw new Error(`Duplicate middleware name '${m}'`);let E=t.findIndex(K=>K.name===m),w=t[E];if(w.toMiddleware!==y.toMiddleware||w.relation!==y.relation)throw new Error(`"${m}" middleware ${w.relation} "${w.toMiddleware}" middleware cannot be overridden by same-name middleware ${y.relation} "${y.toMiddleware}" middleware.`);t.splice(E,1)}r.add(m)}t.push(y)},clone:()=>s((0,Go.constructStack)()),use:p=>{p.applyToStack(l)},remove:p=>typeof p=="string"?i(p):o(p),removeByTag:p=>{let f=!1,m=h=>{let{tags:y,name:E}=h;return y&&y.includes(p)?(E&&r.delete(E),f=!0,!1):!0};return e=e.filter(m),t=t.filter(m),f},concat:p=>{let f=s((0,Go.constructStack)());return f.use(p),f},applyToStack:s,identify:()=>u(!0).map(p=>p.name+": "+(p.tags||[]).join(",")),resolve:(p,f)=>{for(let m of u().map(h=>h.middleware).reverse())p=m(p,f);return p}};return l};Go.constructStack=b2;var zA={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},HA={high:3,normal:2,low:1}});var yg=c(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});var N2=(N(),S(b));N2.__exportStar(GA(),_g)});var QA=c(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.Client=void 0;var x2=yg(),gg=class{constructor(t){this.middlewareStack=(0,x2.constructStack)(),this.config=t}send(t,r,n){let i=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,s=t.resolveMiddleware(this.middlewareStack,this.config,i);if(o)s(t).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return s(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};Tp.Client=gg});var KA=c(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.fromBase64=void 0;var C2=Ai(),O2=/^[A-Za-z0-9+/]*={0,2}$/,A2=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!O2.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,C2.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Ip.fromBase64=A2});var JA=c(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.toBase64=void 0;var P2=Ai(),T2=e=>(0,P2.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64");Rp.toBase64=T2});var Qo=c(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});var YA=(N(),S(b));YA.__exportStar(KA(),qp);YA.__exportStar(JA(),qp)});var tP=c(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.transformFromString=Ko.transformToString=void 0;var ZA=Qo(),eP=ur(),XA=Eg();function I2(e,t="utf-8"){return t==="base64"?(0,ZA.toBase64)(e):(0,eP.toUtf8)(e)}Ko.transformToString=I2;function R2(e,t){return t==="base64"?XA.Uint8ArrayBlobAdapter.mutate((0,ZA.fromBase64)(e)):XA.Uint8ArrayBlobAdapter.mutate((0,eP.fromUtf8)(e))}Ko.transformFromString=R2});var Eg=c(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.Uint8ArrayBlobAdapter=void 0;var rP=tP(),vg=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return(0,rP.transformFromString)(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return(0,rP.transformToString)(this,t)}};Mp.Uint8ArrayBlobAdapter=vg});var nP=c(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.getAwsChunkedEncodingStream=void 0;var q2=q("stream"),M2=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:i,checksumLocationName:o,streamHasher:s}=t,a=r!==void 0&&i!==void 0&&o!==void 0&&s!==void 0,u=a?s(i,e):void 0,l=new q2.Readable({read:()=>{}});return e.on("data",p=>{let f=n(p)||0;l.push(`${f.toString(16)}\r
`),l.push(p),l.push(`\r
`)}),e.on("end",async()=>{if(l.push(`0\r
`),a){let p=r(await u);l.push(`${o}:${p}\r
`),l.push(`\r
`)}l.push(null)}),l};Dp.getAwsChunkedEncodingStream=M2});var Sg=c(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.buildQueryString=void 0;var wg=ay();function D2(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,wg.escapeUri)(r),Array.isArray(n))for(let i=0,o=n.length;i<o;i++)t.push(`${r}=${(0,wg.escapeUri)(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${(0,wg.escapeUri)(n)}`),t.push(i)}}return t.join("&")}kp.buildQueryString=D2});var iP=c(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.NODEJS_TIMEOUT_ERROR_CODES=void 0;Fp.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var bg=c(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.getTransformedHeaders=void 0;var k2=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};Lp.getTransformedHeaders=k2});var oP=c(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.setConnectionTimeout=void 0;var F2=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",i=>{i.connecting?i.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};Up.setConnectionTimeout=F2});var sP=c(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.setSocketKeepAlive=void 0;var L2=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};jp.setSocketKeepAlive=L2});var aP=c(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.setSocketTimeout=void 0;var U2=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};Bp.setSocketTimeout=U2});var Ng=c(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.writeRequestBody=void 0;var j2=q("stream"),cP=1e3;async function B2(e,t,r=cP){var n;let i=(n=t.headers)!==null&&n!==void 0?n:{},o=i.Expect||i.expect,s=-1,a=!1;o==="100-continue"&&await Promise.race([new Promise(u=>{s=Number(setTimeout(u,Math.max(cP,r)))}),new Promise(u=>{e.on("continue",()=>{clearTimeout(s),u()}),e.on("error",()=>{a=!0,clearTimeout(s),u()})})]),a||W2(e,t.body)}Wp.writeRequestBody=B2;function W2(e,t){t instanceof j2.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}});var lP=c(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.NodeHttpHandler=Jo.DEFAULT_REQUEST_TIMEOUT=void 0;var V2=et(),$2=Sg(),uP=q("http"),dP=q("https"),z2=iP(),H2=bg(),G2=oP(),Q2=sP(),K2=aP(),J2=Ng();Jo.DEFAULT_REQUEST_TIMEOUT=0;var xg=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(this.resolveDefaultConfig(i))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:i,httpAgent:o,httpsAgent:s}=t||{},a=!0,u=50;return{connectionTimeout:n,requestTimeout:r??i,httpAgent:o||new uP.Agent({keepAlive:a,maxSockets:u}),httpsAgent:s||new dP.Agent({keepAlive:a,maxSockets:u})}}destroy(){var t,r,n,i;(r=(t=this.config)===null||t===void 0?void 0:t.httpAgent)===null||r===void 0||r.destroy(),(i=(n=this.config)===null||n===void 0?void 0:n.httpsAgent)===null||i===void 0||i.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,i)=>{var o,s;let a,u=async J=>{await a,n(J)},l=async J=>{await a,i(J)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let J=new Error("Request aborted");J.name="AbortError",l(J);return}let p=t.protocol==="https:",f=(0,$2.buildQueryString)(t.query||{}),m;if(t.username!=null||t.password!=null){let J=(o=t.username)!==null&&o!==void 0?o:"",yn=(s=t.password)!==null&&s!==void 0?s:"";m=`${J}:${yn}`}let h=t.path;f&&(h+=`?${f}`),t.fragment&&(h+=`#${t.fragment}`);let y={headers:t.headers,host:t.hostname,method:t.method,path:h,port:t.port,agent:p?this.config.httpsAgent:this.config.httpAgent,auth:m},w=(p?dP.request:uP.request)(y,J=>{let yn=new V2.HttpResponse({statusCode:J.statusCode||-1,reason:J.statusMessage,headers:(0,H2.getTransformedHeaders)(J.headers),body:J});u({response:yn})});w.on("error",J=>{z2.NODEJS_TIMEOUT_ERROR_CODES.includes(J.code)?l(Object.assign(J,{name:"TimeoutError"})):l(J)}),(0,G2.setConnectionTimeout)(w,l,this.config.connectionTimeout),(0,K2.setSocketTimeout)(w,l,this.config.requestTimeout),r&&(r.onabort=()=>{w.abort();let J=new Error("Request aborted");J.name="AbortError",l(J)});let K=y.agent;typeof K=="object"&&"keepAlive"in K&&(0,Q2.setSocketKeepAlive)(w,{keepAlive:K.keepAlive,keepAliveMsecs:K.keepAliveMsecs}),a=(0,J2.writeRequestBody)(w,t,this.config.requestTimeout).catch(i)})}};Jo.NodeHttpHandler=xg});var pP=c(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.NodeHttp2ConnectionPool=void 0;var Cg=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};Vp.NodeHttp2ConnectionPool=Cg});var fP=c($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.NodeHttp2ConnectionManager=void 0;var Y2=(N(),S(b)),X2=Y2.__importDefault(q("http2")),Z2=pP(),Og=class{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){let n=this.getUrlString(t),i=this.sessionCache.get(n);if(i){let u=i.poll();if(u&&!this.config.disableConcurrency)return u}let o=X2.default.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let s=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",s),o.on("error",s),o.on("frameError",s),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,s);let a=this.sessionCache.get(n)||new Z2.NodeHttp2ConnectionPool;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){var n;let i=this.getUrlString(t);(n=this.sessionCache.get(i))===null||n===void 0||n.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}};$p.NodeHttp2ConnectionManager=Og});var hP=c(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.NodeHttp2Handler=void 0;var eV=et(),tV=Sg(),mP=q("http2"),rV=bg(),nV=fP(),iV=Ng(),Ag=class{constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new nV.NodeHttp2ConnectionManager({}),this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(i||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:i}=this.config;return new Promise((o,s)=>{var a,u,l;let p=!1,f,m=async Ne=>{await f,o(Ne)},h=async Ne=>{await f,s(Ne)};if(r?.aborted){p=!0;let Ne=new Error("Request aborted");Ne.name="AbortError",h(Ne);return}let{hostname:y,method:E,port:w,protocol:K,query:J}=t,yn="";if(t.username!=null||t.password!=null){let Ne=(a=t.username)!==null&&a!==void 0?a:"",ca=(u=t.password)!==null&&u!==void 0?u:"";yn=`${Ne}:${ca}@`}let Zw=`${K}//${yn}${y}${w?`:${w}`:""}`,ok={destination:new URL(Zw)},fi=this.connectionManager.lease(ok,{requestTimeout:(l=this.config)===null||l===void 0?void 0:l.sessionTimeout,disableConcurrentStreams:i||!1}),to=Ne=>{i&&this.destroySession(fi),p=!0,h(Ne)},e0=(0,tV.buildQueryString)(J||{}),Dh=t.path;e0&&(Dh+=`?${e0}`),t.fragment&&(Dh+=`#${t.fragment}`);let $t=fi.request({...t.headers,[mP.constants.HTTP2_HEADER_PATH]:Dh,[mP.constants.HTTP2_HEADER_METHOD]:E});fi.ref(),$t.on("response",Ne=>{let ca=new eV.HttpResponse({statusCode:Ne[":status"]||-1,headers:(0,rV.getTransformedHeaders)(Ne),body:$t});p=!0,m({response:ca}),i&&(fi.close(),this.connectionManager.deleteSession(Zw,fi))}),n&&$t.setTimeout(n,()=>{$t.close();let Ne=new Error(`Stream timed out because of no activity for ${n} ms`);Ne.name="TimeoutError",to(Ne)}),r&&(r.onabort=()=>{$t.close();let Ne=new Error("Request aborted");Ne.name="AbortError",to(Ne)}),$t.on("frameError",(Ne,ca,sk)=>{to(new Error(`Frame type id ${Ne} in stream id ${sk} has failed with code ${ca}.`))}),$t.on("error",to),$t.on("aborted",()=>{to(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${$t.rstCode}.`))}),$t.on("close",()=>{fi.unref(),i&&fi.destroy(),p||to(new Error("Unexpected error: http2 request did not get a response"))}),f=(0,iV.writeRequestBody)($t,t,n)})}destroySession(t){t.destroyed||t.destroy()}};zp.NodeHttp2Handler=Ag});var _P=c(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.Collector=void 0;var oV=q("stream"),Pg=class extends oV.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};Hp.Collector=Pg});var yP=c(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.streamCollector=void 0;var sV=_P(),aV=e=>new Promise((t,r)=>{let n=new sV.Collector;e.pipe(n),e.on("error",i=>{n.end(),r(i)}),n.on("error",r),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.bufferedBytes));t(i)})});Gp.streamCollector=aV});var Yo=c(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var Tg=(N(),S(b));Tg.__exportStar(lP(),Sc);Tg.__exportStar(hP(),Sc);Tg.__exportStar(yP(),Sc)});var EP=c(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.sdkStreamMixin=void 0;var cV=Yo(),uV=Ai(),Ig=q("stream"),dV=q("util"),gP="The stream has already been transformed.",lV=e=>{var t,r;if(!(e instanceof Ig.Readable)){let o=((r=(t=e?.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let n=!1,i=async()=>{if(n)throw new Error(gP);return n=!0,await(0,cV.streamCollector)(e)};return Object.assign(e,{transformToByteArray:i,transformToString:async o=>{let s=await i();return o===void 0||Buffer.isEncoding(o)?(0,uV.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(o):new dV.TextDecoder(o).decode(s)},transformToWebStream:()=>{if(n)throw new Error(gP);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Ig.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return n=!0,Ig.Readable.toWeb(e)}})};Qp.sdkStreamMixin=lV});var vP=c(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var Rg=(N(),S(b));Rg.__exportStar(Eg(),bc);Rg.__exportStar(nP(),bc);Rg.__exportStar(EP(),bc)});var wP=c(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.collectBody=void 0;var qg=vP(),pV=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return qg.Uint8ArrayBlobAdapter.mutate(e);if(!e)return qg.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return qg.Uint8ArrayBlobAdapter.mutate(await r)};Kp.collectBody=pV});var SP=c(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.Command=void 0;var fV=yg(),Mg=class{constructor(){this.middlewareStack=(0,fV.constructStack)()}};Jp.Command=Mg});var bP=c(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.SENSITIVE_STRING=void 0;Yp.SENSITIVE_STRING="***SensitiveInformation***"});var NP=c(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.createAggregatedClient=void 0;var mV=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],i=async function(s,a,u){let l=new n(s);if(typeof a=="function")this.send(l,a);else if(typeof u=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},u)}else return this.send(l,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=i}};Xp.createAggregatedClient=mV});var kg=c(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.logger=v.strictParseByte=v.strictParseShort=v.strictParseInt32=v.strictParseInt=v.strictParseLong=v.limitedParseFloat32=v.limitedParseFloat=v.handleFloat=v.limitedParseDouble=v.strictParseFloat32=v.strictParseFloat=v.strictParseDouble=v.expectUnion=v.expectString=v.expectObject=v.expectNonNull=v.expectByte=v.expectShort=v.expectInt32=v.expectInt=v.expectLong=v.expectFloat32=v.expectNumber=v.expectBoolean=v.parseBoolean=void 0;var hV=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};v.parseBoolean=hV;var _V=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&v.logger.warn(Zp(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&v.logger.warn(Zp(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}};v.expectBoolean=_V;var yV=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&v.logger.warn(Zp(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}};v.expectNumber=yV;var gV=Math.ceil(2**127*(2-2**-23)),EV=e=>{let t=(0,v.expectNumber)(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>gV)throw new TypeError(`Expected 32-bit float, got ${e}`);return t};v.expectFloat32=EV;var vV=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};v.expectLong=vV;v.expectInt=v.expectLong;var wV=e=>Dg(e,32);v.expectInt32=wV;var SV=e=>Dg(e,16);v.expectShort=SV;var bV=e=>Dg(e,8);v.expectByte=bV;var Dg=(e,t)=>{let r=(0,v.expectLong)(e);if(r!==void 0&&NV(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},NV=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},xV=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e};v.expectNonNull=xV;var CV=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)};v.expectObject=CV;var OV=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return v.logger.warn(Zp(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};v.expectString=OV;var AV=e=>{if(e==null)return;let t=(0,v.expectObject)(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t};v.expectUnion=AV;var PV=e=>typeof e=="string"?(0,v.expectNumber)(Xo(e)):(0,v.expectNumber)(e);v.strictParseDouble=PV;v.strictParseFloat=v.strictParseDouble;var TV=e=>typeof e=="string"?(0,v.expectFloat32)(Xo(e)):(0,v.expectFloat32)(e);v.strictParseFloat32=TV;var IV=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Xo=e=>{let t=e.match(IV);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},RV=e=>typeof e=="string"?xP(e):(0,v.expectNumber)(e);v.limitedParseDouble=RV;v.handleFloat=v.limitedParseDouble;v.limitedParseFloat=v.limitedParseDouble;var qV=e=>typeof e=="string"?xP(e):(0,v.expectFloat32)(e);v.limitedParseFloat32=qV;var xP=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},MV=e=>typeof e=="string"?(0,v.expectLong)(Xo(e)):(0,v.expectLong)(e);v.strictParseLong=MV;v.strictParseInt=v.strictParseLong;var DV=e=>typeof e=="string"?(0,v.expectInt32)(Xo(e)):(0,v.expectInt32)(e);v.strictParseInt32=DV;var kV=e=>typeof e=="string"?(0,v.expectShort)(Xo(e)):(0,v.expectShort)(e);v.strictParseShort=kV;var FV=e=>typeof e=="string"?(0,v.expectByte)(Xo(e)):(0,v.expectByte)(e);v.strictParseByte=FV;var Zp=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`);v.logger={warn:console.warn}});var CP=c(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.parseEpochTimestamp=Lt.parseRfc7231DateTime=Lt.parseRfc3339DateTimeWithOffset=Lt.parseRfc3339DateTime=Lt.dateToUtcString=void 0;var Ln=kg(),LV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Lg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function UV(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds(),u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,p=s<10?`0${s}`:`${s}`,f=a<10?`0${a}`:`${a}`;return`${LV[n]}, ${u} ${Lg[r]} ${t} ${l}:${p}:${f} GMT`}Lt.dateToUtcString=UV;var jV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),BV=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=jV.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,u,l]=t,p=(0,Ln.strictParseShort)(Zo(n)),f=hr(i,"month",1,12),m=hr(o,"day",1,31);return Nc(p,f,m,{hours:s,minutes:a,seconds:u,fractionalMilliseconds:l})};Lt.parseRfc3339DateTime=BV;var WV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),VV=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=WV.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,u,l,p]=t,f=(0,Ln.strictParseShort)(Zo(n)),m=hr(i,"month",1,12),h=hr(o,"day",1,31),y=Nc(f,m,h,{hours:s,minutes:a,seconds:u,fractionalMilliseconds:l});return p.toUpperCase()!="Z"&&y.setTime(y.getTime()-r$(p)),y};Lt.parseRfc3339DateTimeWithOffset=VV;var $V=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),zV=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),HV=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),GV=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=$V.exec(e);if(t){let[r,n,i,o,s,a,u,l]=t;return Nc((0,Ln.strictParseShort)(Zo(o)),Fg(i),hr(n,"day",1,31),{hours:s,minutes:a,seconds:u,fractionalMilliseconds:l})}if(t=zV.exec(e),t){let[r,n,i,o,s,a,u,l]=t;return YV(Nc(KV(o),Fg(i),hr(n,"day",1,31),{hours:s,minutes:a,seconds:u,fractionalMilliseconds:l}))}if(t=HV.exec(e),t){let[r,n,i,o,s,a,u,l]=t;return Nc((0,Ln.strictParseShort)(Zo(l)),Fg(n),hr(i.trimLeft(),"day",1,31),{hours:o,minutes:s,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")};Lt.parseRfc7231DateTime=GV;var QV=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=(0,Ln.strictParseDouble)(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))};Lt.parseEpochTimestamp=QV;var Nc=(e,t,r,n)=>{let i=t-1;return ZV(e,i,r),new Date(Date.UTC(e,i,r,hr(n.hours,"hour",0,23),hr(n.minutes,"minute",0,59),hr(n.seconds,"seconds",0,60),t$(n.fractionalMilliseconds)))},KV=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+(0,Ln.strictParseShort)(Zo(e));return r<t?r+100:r},JV=50*365*24*60*60*1e3,YV=e=>e.getTime()-new Date().getTime()>JV?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Fg=e=>{let t=Lg.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},XV=[31,28,31,30,31,30,31,31,30,31,30,31],ZV=(e,t,r)=>{let n=XV[t];if(t===1&&e$(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Lg[t]} in ${e}: ${r}`)},e$=e=>e%4===0&&(e%100!==0||e%400===0),hr=(e,t,r,n)=>{let i=(0,Ln.strictParseByte)(Zo(e));if(i<r||i>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},t$=e=>e==null?0:(0,Ln.strictParseFloat32)("0."+e)*1e3,r$=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),i=Number(e.substring(4,6));return r*(n*60+i)*60*1e3},Zo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var jg=c(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.decorateServiceException=es.ServiceException=void 0;var Ug=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}};es.ServiceException=Ug;var n$=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(e[n]==null||e[n]==="")&&(e[n]=i)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};es.decorateServiceException=n$});var OP=c(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.withBaseException=Bi.throwDefaultError=void 0;var i$=jg(),o$=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let i=a$(e),o=i.httpStatusCode?i.httpStatusCode+"":void 0,s=new r({name:t?.code||t?.Code||n||o||"UnknownError",$fault:"client",$metadata:i});throw(0,i$.decorateServiceException)(s,t)};Bi.throwDefaultError=o$;var s$=e=>({output:t,parsedBody:r,errorCode:n})=>{(0,Bi.throwDefaultError)({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})};Bi.withBaseException=s$;var a$=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!==null&&t!==void 0?t:e.headers["x-amzn-request-id"])!==null&&r!==void 0?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}});var AP=c(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.loadConfigsForDefaultMode=void 0;var c$=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};ef.loadConfigsForDefaultMode=c$});var TP=c(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.emitWarningIfUnsupportedVersion=void 0;var PP=!1,u$=e=>{e&&!PP&&parseInt(e.substring(1,e.indexOf(".")))<14&&(PP=!0)};tf.emitWarningIfUnsupportedVersion=u$});var IP=c(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.resolveChecksumRuntimeConfig=Un.getChecksumConfiguration=Un.AlgorithmId=void 0;var Bg=Po();Object.defineProperty(Un,"AlgorithmId",{enumerable:!0,get:function(){return Bg.AlgorithmId}});var d$=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Bg.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Bg.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}};Un.getChecksumConfiguration=d$;var l$=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};Un.resolveChecksumRuntimeConfig=l$});var qP=c(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.resolveDefaultRuntimeConfig=en.getDefaultClientConfiguration=en.getDefaultExtensionConfiguration=void 0;var RP=IP(),p$=e=>({...(0,RP.getChecksumConfiguration)(e)});en.getDefaultExtensionConfiguration=p$;en.getDefaultClientConfiguration=en.getDefaultExtensionConfiguration;var f$=e=>({...(0,RP.resolveChecksumRuntimeConfig)(e)});en.resolveDefaultRuntimeConfig=f$});var MP=c(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});var m$=(N(),S(b));m$.__exportStar(qP(),Wg)});var Vg=c(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.extendedEncodeURIComponent=void 0;function h$(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}rf.extendedEncodeURIComponent=h$});var DP=c(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.getArrayIfSingleItem=void 0;var _$=e=>Array.isArray(e)?e:[e];nf.getArrayIfSingleItem=_$});var kP=c(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.getValueFromTextNode=void 0;var y$=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=(0,xc.getValueFromTextNode)(e[r]));return e};xc.getValueFromTextNode=y$});var FP=c(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.LazyJsonString=_r.StringWrapper=void 0;var g$=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};_r.StringWrapper=g$;_r.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:_r.StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(_r.StringWrapper,String);var $g=class e extends _r.StringWrapper{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(t){return t instanceof e?t:t instanceof String||typeof t=="string"?new e(t):new e(JSON.stringify(t))}};_r.LazyJsonString=$g});var jP=c(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.take=jn.convertMap=jn.map=void 0;function LP(e,t,r){let n,i,o;if(typeof t>"u"&&typeof r>"u")n={},o=e;else{if(n=e,typeof t=="function")return i=t,o=r,w$(n,i,o);o=t}for(let s of Object.keys(o)){if(!Array.isArray(o[s])){n[s]=o[s];continue}UP(n,null,o,s)}return n}jn.map=LP;var E$=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t};jn.convertMap=E$;var v$=(e,t)=>{let r={};for(let n in t)UP(r,e,t,n);return r};jn.take=v$;var w$=(e,t,r)=>LP(e,Object.entries(r).reduce((n,[i,o])=>(Array.isArray(o)?n[i]=o:typeof o=="function"?n[i]=[t,o()]:n[i]=[t,o],n),{})),UP=(e,t,r,n)=>{if(t!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=S$,u=b$,l=n]=s;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=u(t[l]));return}let[i,o]=r[n];if(typeof o=="function"){let s,a=i===void 0&&(s=o())!=null,u=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;a?e[n]=s:u&&(e[n]=o())}else{let s=i===void 0&&o!=null,a=typeof i=="function"&&!!i(o)||typeof i!="function"&&!!i;(s||a)&&(e[n]=o)}},S$=e=>e!=null,b$=e=>e});var WP=c(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.resolvedPath=void 0;var BP=Vg(),N$=(e,t,r,n,i,o)=>{if(t!=null&&t[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,o?s.split("/").map(a=>(0,BP.extendedEncodeURIComponent)(a)).join("/"):(0,BP.extendedEncodeURIComponent)(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};of.resolvedPath=N$});var VP=c(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.serializeFloat=void 0;var x$=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};sf.serializeFloat=x$});var $P=c(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc._json=void 0;var C$=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=(0,Cc._json)(e[r]));return t}return e};Cc._json=C$});var zP=c(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.splitEvery=void 0;function O$(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let i=[],o="";for(let s=0;s<n.length;s++)o===""?o=n[s]:o+=t+n[s],(s+1)%r===0&&(i.push(o),o="");return o!==""&&i.push(o),i}af.splitEvery=O$});var A=c(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});var Se=(N(),S(b));Se.__exportStar($A(),ue);Se.__exportStar(QA(),ue);Se.__exportStar(wP(),ue);Se.__exportStar(SP(),ue);Se.__exportStar(bP(),ue);Se.__exportStar(NP(),ue);Se.__exportStar(CP(),ue);Se.__exportStar(OP(),ue);Se.__exportStar(AP(),ue);Se.__exportStar(TP(),ue);Se.__exportStar(MP(),ue);Se.__exportStar(jg(),ue);Se.__exportStar(Vg(),ue);Se.__exportStar(DP(),ue);Se.__exportStar(kP(),ue);Se.__exportStar(FP(),ue);Se.__exportStar(jP(),ue);Se.__exportStar(kg(),ue);Se.__exportStar(WP(),ue);Se.__exportStar(VP(),ue);Se.__exportStar($P(),ue);Se.__exportStar(zP(),ue)});var HP=c(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.resolveClientEndpointParameters=void 0;var A$=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"rds-data"});cf.resolveClientEndpointParameters=A$});var GP=c((qge,P$)=>{P$.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.405.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.405.0","@aws-sdk/credential-provider-node":"3.405.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.405.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var QP=c(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.resolveStsAuthConfig=void 0;var T$=Qr(),I$=(e,{stsClientCtor:t})=>(0,T$.resolveAwsAuthConfig)({...e,stsClientCtor:t});uf.resolveStsAuthConfig=I$});var KP=c(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.resolveClientEndpointParameters=void 0;var R$=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});df.resolveClientEndpointParameters=R$});var JP=c((kge,q$)=>{q$.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.405.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.405.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-sdk-sts":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.405.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var lf=c(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.STSServiceException=ts.__ServiceException=void 0;var YP=A();Object.defineProperty(ts,"__ServiceException",{enumerable:!0,get:function(){return YP.ServiceException}});var zg=class e extends YP.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};ts.STSServiceException=zg});var Wn=c(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.GetSessionTokenResponseFilterSensitiveLog=k.GetFederationTokenResponseFilterSensitiveLog=k.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=k.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=k.AssumeRoleWithSAMLResponseFilterSensitiveLog=k.AssumeRoleWithSAMLRequestFilterSensitiveLog=k.AssumeRoleResponseFilterSensitiveLog=k.CredentialsFilterSensitiveLog=k.InvalidAuthorizationMessageException=k.IDPCommunicationErrorException=k.InvalidIdentityTokenException=k.IDPRejectedClaimException=k.RegionDisabledException=k.PackedPolicyTooLargeException=k.MalformedPolicyDocumentException=k.ExpiredTokenException=void 0;var eE=A(),Bn=lf(),Hg=class e extends Bn.STSServiceException{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.ExpiredTokenException=Hg;var Gg=class e extends Bn.STSServiceException{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.MalformedPolicyDocumentException=Gg;var Qg=class e extends Bn.STSServiceException{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.PackedPolicyTooLargeException=Qg;var Kg=class e extends Bn.STSServiceException{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.RegionDisabledException=Kg;var Jg=class e extends Bn.STSServiceException{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.IDPRejectedClaimException=Jg;var Yg=class e extends Bn.STSServiceException{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.InvalidIdentityTokenException=Yg;var Xg=class e extends Bn.STSServiceException{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.IDPCommunicationErrorException=Xg;var Zg=class e extends Bn.STSServiceException{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};k.InvalidAuthorizationMessageException=Zg;var M$=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:eE.SENSITIVE_STRING}});k.CredentialsFilterSensitiveLog=M$;var D$=e=>({...e,...e.Credentials&&{Credentials:(0,k.CredentialsFilterSensitiveLog)(e.Credentials)}});k.AssumeRoleResponseFilterSensitiveLog=D$;var k$=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:eE.SENSITIVE_STRING}});k.AssumeRoleWithSAMLRequestFilterSensitiveLog=k$;var F$=e=>({...e,...e.Credentials&&{Credentials:(0,k.CredentialsFilterSensitiveLog)(e.Credentials)}});k.AssumeRoleWithSAMLResponseFilterSensitiveLog=F$;var L$=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:eE.SENSITIVE_STRING}});k.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=L$;var U$=e=>({...e,...e.Credentials&&{Credentials:(0,k.CredentialsFilterSensitiveLog)(e.Credentials)}});k.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=U$;var j$=e=>({...e,...e.Credentials&&{Credentials:(0,k.CredentialsFilterSensitiveLog)(e.Credentials)}});k.GetFederationTokenResponseFilterSensitiveLog=j$;var B$=e=>({...e,...e.Credentials&&{Credentials:(0,k.CredentialsFilterSensitiveLog)(e.Credentials)}});k.GetSessionTokenResponseFilterSensitiveLog=B$});var pf=c(tn=>{"use strict";var XP=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",W$=XP+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ZP="["+XP+"]["+W$+"]*",V$=new RegExp("^"+ZP+"$"),$$=function(e,t){let r=[],n=t.exec(e);for(;n;){let i=[];i.startIndex=t.lastIndex-n[0].length;let o=n.length;for(let s=0;s<o;s++)i.push(n[s]);r.push(i),n=t.exec(e)}return r},z$=function(e){let t=V$.exec(e);return!(t===null||typeof t>"u")};tn.isExist=function(e){return typeof e<"u"};tn.isEmptyObject=function(e){return Object.keys(e).length===0};tn.merge=function(e,t,r){if(t){let n=Object.keys(t),i=n.length;for(let o=0;o<i;o++)r==="strict"?e[n[o]]=[t[n[o]]]:e[n[o]]=t[n[o]]}};tn.getValue=function(e){return tn.isExist(e)?e:""};tn.isName=z$;tn.getAllMatches=$$;tn.nameRegexp=ZP});var rE=c(iT=>{"use strict";var tE=pf(),H$={allowBooleanAttributes:!1,unpairedTags:[]};iT.validate=function(e,t){t=Object.assign({},H$,t);let r=[],n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=tT(e,o),o.err)return o}else if(e[o]==="<"){let s=o;if(o++,e[o]==="!"){o=rT(e,o);continue}else{let a=!1;e[o]==="/"&&(a=!0,o++);let u="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)u+=e[o];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),o--),!ez(u)){let f;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",Ae("InvalidTag",f,pt(e,o))}let l=K$(e,o);if(l===!1)return Ae("InvalidAttr","Attributes for '"+u+"' have open quote.",pt(e,o));let p=l.value;if(o=l.index,p[p.length-1]==="/"){let f=o-p.length;p=p.substring(0,p.length-1);let m=nT(p,t);if(m===!0)n=!0;else return Ae(m.err.code,m.err.msg,pt(e,f+m.err.line))}else if(a)if(l.tagClosed){if(p.trim().length>0)return Ae("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",pt(e,s));{let f=r.pop();if(u!==f.tagName){let m=pt(e,f.tagStartPos);return Ae("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+u+"'.",pt(e,s))}r.length==0&&(i=!0)}}else return Ae("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",pt(e,o));else{let f=nT(p,t);if(f!==!0)return Ae(f.err.code,f.err.msg,pt(e,o-p.length+f.err.line));if(i===!0)return Ae("InvalidXml","Multiple possible root nodes found.",pt(e,o));t.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:s}),n=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=rT(e,o);continue}else if(e[o+1]==="?"){if(o=tT(e,++o),o.err)return o}else break;else if(e[o]==="&"){let f=X$(e,o);if(f==-1)return Ae("InvalidChar","char '&' is not expected.",pt(e,o));o=f}else if(i===!0&&!eT(e[o]))return Ae("InvalidXml","Extra text at the end",pt(e,o));e[o]==="<"&&o--}}else{if(eT(e[o]))continue;return Ae("InvalidChar","char '"+e[o]+"' is not expected.",pt(e,o))}if(n){if(r.length==1)return Ae("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",pt(e,r[0].tagStartPos));if(r.length>0)return Ae("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ae("InvalidXml","Start tag expected.",1);return!0};function eT(e){return e===" "||e==="	"||e===`
`||e==="\r"}function tT(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Ae("InvalidXml","XML declaration allowed only at the start of the document.",pt(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function rT(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var G$='"',Q$="'";function K$(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===G$||e[t]===Q$)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}var J$=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function nT(e,t){let r=tE.getAllMatches(e,J$),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return Ae("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",Oc(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return Ae("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",Oc(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return Ae("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",Oc(r[i]));let o=r[i][2];if(!Z$(o))return Ae("InvalidAttr","Attribute '"+o+"' is an invalid name.",Oc(r[i]));if(!n.hasOwnProperty(o))n[o]=1;else return Ae("InvalidAttr","Attribute '"+o+"' is repeated.",Oc(r[i]))}return!0}function Y$(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function X$(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Y$(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Ae(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Z$(e){return tE.isName(e)}function ez(e){return tE.isName(e)}function pt(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Oc(e){return e.startIndex+e[1].length}});var sT=c(nE=>{var oT={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},tz=function(e){return Object.assign({},oT,e)};nE.buildOptions=tz;nE.defaultOptions=oT});var cT=c((Wge,aT)=>{"use strict";var iE=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};aT.exports=iE});var dT=c((Vge,uT)=>{var rz=pf();function nz(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,i=!1,o=!1,s="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(i&&sz(e,t))t+=7,[entityName,val,t]=iz(e,t+1),val.indexOf("&")===-1&&(r[dz(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&az(e,t))t+=8;else if(i&&cz(e,t))t+=8;else if(i&&uz(e,t))t+=9;else if(oz)o=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,n--):n--,n===0)break}else e[t]==="["?i=!0:s+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function iz(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],i="";for(;t<e.length&&e[t]!==n;t++)i+=e[t];return[r,i,t]}function oz(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function sz(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function az(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function cz(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function uz(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function dz(e){if(rz.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}uT.exports=nz});var pT=c(($ge,lT)=>{var lz=/^[-+]?0x[a-fA-F0-9]+$/,pz=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var fz={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function mz(e,t={}){if(t=Object.assign({},fz,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&lz.test(r))return Number.parseInt(r,16);{let n=pz.exec(r);if(n){let i=n[1],o=n[2],s=hz(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&o.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!i&&r[1]!==".")return e;{let u=Number(r),l=""+u;return l.search(/[eE]/)!==-1||a?t.eNotation?u:e:r.indexOf(".")!==-1?l==="0"&&s===""||l===s||i&&l==="-"+s?u:e:o?s===l||i+s===l?u:e:r===l||r===i+l?u:e}}else return e}}function hz(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}lT.exports=mz});var mT=c((Hge,fT)=>{"use strict";var cE=pf(),Ac=cT(),_z=dT(),yz=pT(),zge="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,cE.nameRegexp),oE=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=gz,this.parseXml=bz,this.parseTextData=Ez,this.resolveNameSpace=vz,this.buildAttributesMap=Sz,this.isItStopNode=Oz,this.replaceEntitiesValue=xz,this.readStopNodeData=Pz,this.saveTextToParentTag=Cz,this.addChild=Nz}};function gz(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Ez(e,t,r,n,i,o,s){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,i,o);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?aE(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?aE(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function vz(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var wz=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Sz(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=cE.getAllMatches(e,wz),i=n.length,o={};for(let s=0;s<i;s++){let a=this.resolveNameSpace(n[s][1]),u=n[s][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);let p=this.options.attributeValueProcessor(a,u,t);p==null?o[l]=u:typeof p!=typeof u||p!==u?o[l]=p:o[l]=aE(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[l]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=o,s}return o}}var bz=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Ac("!xml"),r=t,n="",i="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){let a=Wi(e,">",o,"Closing Tag is not closed."),u=e.substring(o+2,a).trim();if(this.options.removeNSPrefix){let f=u.indexOf(":");f!==-1&&(u=u.substr(f+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,i));let l=i.substring(i.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let p=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(p=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):p=i.lastIndexOf("."),i=i.substring(0,p),r=this.tagsNodeStack.pop(),n="",o=a}else if(e[o+1]==="?"){let a=sE(e,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let u=new Ac(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,i,a.tagName)),this.addChild(r,u,i)}o=a.closeIndex+1}else if(e.substr(o+1,3)==="!--"){let a=Wi(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let u=e.substring(o+4,a-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}o=a}else if(e.substr(o+1,2)==="!D"){let a=_z(e,o);this.docTypeEntities=a.entities,o=a.i}else if(e.substr(o+1,2)==="!["){let a=Wi(e,"]]>",o,"CDATA is not closed.")-2,u=e.substring(o+9,a);if(n=this.saveTextToParentTag(n,r,i),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]);else{let l=this.parseTextData(u,r.tagname,i,!0,!1,!0);l==null&&(l=""),r.add(this.options.textNodeName,l)}o=a+2}else{let a=sE(e,o,this.options.removeNSPrefix),u=a.tagName,l=a.tagExp,p=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1));let m=r;if(m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),u!==t.tagname&&(i+=i?"."+u:u),this.isItStopNode(this.options.stopNodes,i,u)){let h="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)o=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)o=a.closeIndex;else{let E=this.readStopNodeData(e,u,f+1);if(!E)throw new Error(`Unexpected end of ${u}`);o=E.i,h=E.tagContent}let y=new Ac(u);u!==l&&p&&(y[":@"]=this.buildAttributesMap(l,i,u)),h&&(h=this.parseTextData(h,u,i,!0,p,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),y.add(this.options.textNodeName,h),this.addChild(r,y,i)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),l=u):l=l.substr(0,l.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));let h=new Ac(u);u!==l&&p&&(h[":@"]=this.buildAttributesMap(l,i,u)),this.addChild(r,h,i),i=i.substr(0,i.lastIndexOf("."))}else{let h=new Ac(u);this.tagsNodeStack.push(r),u!==l&&p&&(h[":@"]=this.buildAttributesMap(l,i,u)),this.addChild(r,h,i),r=h}n="",o=f}}else n+=e[o];return t.child};function Nz(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var xz=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Cz(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Oz(e,t,r){let n="*."+r;for(let i in e){let o=e[i];if(n===o||t===o)return!0}return!1}function Az(e,t,r=">"){let n,i="";for(let o=t;o<e.length;o++){let s=e[o];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(e[o+1]===r[1])return{data:i,index:o}}else return{data:i,index:o};else s==="	"&&(s=" ");i+=s}}function Wi(e,t,r,n){let i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}function sE(e,t,r,n=">"){let i=Az(e,t+1,n);if(!i)return;let o=i.data,s=i.index,a=o.search(/\s/),u=o,l=!0;if(a!==-1&&(u=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){let p=u.indexOf(":");p!==-1&&(u=u.substr(p+1),l=u!==i.data.substr(p+1))}return{tagName:u,tagExp:o,closeIndex:s,attrExpPresent:l}}function Pz(e,t,r){let n=r,i=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let o=Wi(e,">",r,`${t} is not closed`);if(e.substring(r+2,o).trim()===t&&(i--,i===0))return{tagContent:e.substring(n,r),i:o};r=o}else if(e[r+1]==="?")r=Wi(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Wi(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Wi(e,"]]>",r,"StopNode is not closed.")-2;else{let o=sE(e,r,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&i++,r=o.closeIndex)}}function aE(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:yz(e,r)}else return cE.isExist(e)?e:""}fT.exports=oE});var yT=c(_T=>{"use strict";function Tz(e,t){return hT(e,t)}function hT(e,t,r){let n,i={};for(let o=0;o<e.length;o++){let s=e[o],a=Iz(s),u="";if(r===void 0?u=a:u=r+"."+a,a===t.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let l=hT(s[a],t,u),p=qz(l,t);s[":@"]?Rz(l,s[":@"],u,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(l)):t.isArray(a,u,p)?i[a]=[l]:i[a]=l}}}return typeof n=="string"?n.length>0&&(i[t.textNodeName]=n):n!==void 0&&(i[t.textNodeName]=n),i}function Iz(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Rz(e,t,r,n){if(t){let i=Object.keys(t),o=i.length;for(let s=0;s<o;s++){let a=i[s];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function qz(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}_T.prettify=Tz});var ET=c((Qge,gT)=>{var{buildOptions:Mz}=sT(),Dz=mT(),{prettify:kz}=yT(),Fz=rE(),uE=class{constructor(t){this.externalEntities={},this.options=Mz(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=Fz.validate(t,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new Dz(this.options);n.addExternalEntities(this.externalEntities);let i=n.parseXml(t);return this.options.preserveOrder||i===void 0?i:kz(i,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};gT.exports=uE});var NT=c((Kge,bT)=>{var Lz=`
`;function Uz(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=Lz),wT(e,t,"",r)}function wT(e,t,r,n){let i="",o=!1;for(let s=0;s<e.length;s++){let a=e[s],u=jz(a),l="";if(r.length===0?l=u:l=`${r}.${u}`,u===t.textNodeName){let y=a[u];Bz(l,t)||(y=t.tagValueProcessor(u,y),y=ST(y,t)),o&&(i+=n),i+=y,o=!1;continue}else if(u===t.cdataPropName){o&&(i+=n),i+=`<![CDATA[${a[u][0][t.textNodeName]}]]>`,o=!1;continue}else if(u===t.commentPropName){i+=n+`<!--${a[u][0][t.textNodeName]}-->`,o=!0;continue}else if(u[0]==="?"){let y=vT(a[":@"],t),E=u==="?xml"?"":n,w=a[u][0][t.textNodeName];w=w.length!==0?" "+w:"",i+=E+`<${u}${w}${y}?>`,o=!0;continue}let p=n;p!==""&&(p+=t.indentBy);let f=vT(a[":@"],t),m=n+`<${u}${f}`,h=wT(a[u],t,l,p);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?i+=m+">":i+=m+"/>":(!h||h.length===0)&&t.suppressEmptyNode?i+=m+"/>":h&&h.endsWith(">")?i+=m+`>${h}${n}</${u}>`:(i+=m+">",h&&n!==""&&(h.includes("/>")||h.includes("</"))?i+=n+t.indentBy+h+n:i+=h,i+=`</${u}>`),o=!0}return i}function jz(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function vT(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let i=t.attributeValueProcessor(n,e[n]);i=ST(i,t),i===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${i}"`}return r}function Bz(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function ST(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}bT.exports=Uz});var CT=c((Jge,xT)=>{"use strict";var Wz=NT(),Vz={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Vn(e){this.options=Object.assign({},Vz,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Hz),this.processTextOrObjNode=$z,this.options.format?(this.indentate=zz,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Vn.prototype.build=function(e){return this.options.preserveOrder?Wz(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Vn.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(!(typeof e[i]>"u"))if(e[i]===null)i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextValNode(e[i],i,"",t);else if(typeof e[i]!="object"){let o=this.isAttribute(i);if(o)r+=this.buildAttrPairStr(o,""+e[i]);else if(i===this.options.textNodeName){let s=this.options.tagValueProcessor(i,""+e[i]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){let o=e[i].length,s="";for(let a=0;a<o;a++){let u=e[i][a];typeof u>"u"||(u===null?i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar:typeof u=="object"?this.options.oneListGroup?s+=this.j2x(u,t+1).val:s+=this.processTextOrObjNode(u,i,t):s+=this.buildTextValNode(u,i,"",t))}this.options.oneListGroup&&(s=this.buildObjectNode(s,i,"",t)),n+=s}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let o=Object.keys(e[i]),s=o.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(o[a],""+e[i][o[a]])}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}};Vn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function $z(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Vn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",i=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+o+">"+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+o+this.tagEndChar+e+this.indentate(n)+i}};Vn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Vn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+i+"</"+t+this.tagEndChar}};Vn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function zz(e){return this.options.indentBy.repeat(e)}function Hz(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}xT.exports=Vn});var AT=c((Yge,OT)=>{"use strict";var Gz=rE(),Qz=ET(),Kz=CT();OT.exports={XMLParser:Qz,XMLValidator:Gz,XMLBuilder:Kz}});var nn=c(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.de_GetSessionTokenCommand=W.de_GetFederationTokenCommand=W.de_GetCallerIdentityCommand=W.de_GetAccessKeyInfoCommand=W.de_DecodeAuthorizationMessageCommand=W.de_AssumeRoleWithWebIdentityCommand=W.de_AssumeRoleWithSAMLCommand=W.de_AssumeRoleCommand=W.se_GetSessionTokenCommand=W.se_GetFederationTokenCommand=W.se_GetCallerIdentityCommand=W.se_GetAccessKeyInfoCommand=W.se_DecodeAuthorizationMessageCommand=W.se_AssumeRoleWithWebIdentityCommand=W.se_AssumeRoleWithSAMLCommand=W.se_AssumeRoleCommand=void 0;var Jz=et(),P=A(),Yz=AT(),$n=Wn(),Xz=lf(),Zz=async(e,t)=>{let r=Gn,n;return n=Kn({...x3(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_AssumeRoleCommand=Zz;var e3=async(e,t)=>{let r=Gn,n;return n=Kn({...C3(e,t),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_AssumeRoleWithSAMLCommand=e3;var t3=async(e,t)=>{let r=Gn,n;return n=Kn({...O3(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_AssumeRoleWithWebIdentityCommand=t3;var r3=async(e,t)=>{let r=Gn,n;return n=Kn({...A3(e,t),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_DecodeAuthorizationMessageCommand=r3;var n3=async(e,t)=>{let r=Gn,n;return n=Kn({...P3(e,t),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_GetAccessKeyInfoCommand=n3;var i3=async(e,t)=>{let r=Gn,n;return n=Kn({...T3(e,t),Action:"GetCallerIdentity",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_GetCallerIdentityCommand=i3;var o3=async(e,t)=>{let r=Gn,n;return n=Kn({...I3(e,t),Action:"GetFederationToken",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_GetFederationTokenCommand=o3;var s3=async(e,t)=>{let r=Gn,n;return n=Kn({...R3(e,t),Action:"GetSessionToken",Version:"2011-06-15"}),Hn(t,r,"/",void 0,n)};W.se_GetSessionTokenCommand=s3;var a3=async(e,t)=>{if(e.statusCode>=300)return c3(e,t);let r=await rn(e.body,t),n={};return n=L3(r.AssumeRoleResult,t),{$metadata:Ge(e),...n}};W.de_AssumeRoleCommand=a3;var c3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await dE(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ff(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pc(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},u3=async(e,t)=>{if(e.statusCode>=300)return d3(e,t);let r=await rn(e.body,t),n={};return n=U3(r.AssumeRoleWithSAMLResult,t),{$metadata:Ge(e),...n}};W.de_AssumeRoleWithSAMLCommand=u3;var d3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await dE(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await PT(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await TT(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ff(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pc(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},l3=async(e,t)=>{if(e.statusCode>=300)return p3(e,t);let r=await rn(e.body,t),n={};return n=j3(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Ge(e),...n}};W.de_AssumeRoleWithWebIdentityCommand=l3;var p3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await dE(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await b3(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await PT(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await TT(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ff(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pc(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},f3=async(e,t)=>{if(e.statusCode>=300)return m3(e,t);let r=await rn(e.body,t),n={};return n=B3(r.DecodeAuthorizationMessageResult,t),{$metadata:Ge(e),...n}};W.de_DecodeAuthorizationMessageCommand=f3;var m3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await N3(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},h3=async(e,t)=>{if(e.statusCode>=300)return _3(e,t);let r=await rn(e.body,t),n={};return n=$3(r.GetAccessKeyInfoResult,t),{$metadata:Ge(e),...n}};W.de_GetAccessKeyInfoCommand=h3;var _3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body),i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})},y3=async(e,t)=>{if(e.statusCode>=300)return g3(e,t);let r=await rn(e.body,t),n={};return n=z3(r.GetCallerIdentityResult,t),{$metadata:Ge(e),...n}};W.de_GetCallerIdentityCommand=y3;var g3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body),i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})},E3=async(e,t)=>{if(e.statusCode>=300)return v3(e,t);let r=await rn(e.body,t),n={};return n=H3(r.GetFederationTokenResult,t),{$metadata:Ge(e),...n}};W.de_GetFederationTokenCommand=E3;var v3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ff(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pc(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},w3=async(e,t)=>{if(e.statusCode>=300)return S3(e,t);let r=await rn(e.body,t),n={};return n=G3(r.GetSessionTokenResult,t),{$metadata:Ge(e),...n}};W.de_GetSessionTokenCommand=w3;var S3=async(e,t)=>{let r={...e,body:await Qn(e.body,t)},n=Jn(e,r.body);switch(n){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pc(r,t);default:let i=r.body;return zn({output:e,parsedBody:i.Error,errorCode:n})}},dE=async(e,t)=>{let r=e.body,n=W3(r.Error,t),i=new $n.ExpiredTokenException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},b3=async(e,t)=>{let r=e.body,n=Q3(r.Error,t),i=new $n.IDPCommunicationErrorException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},PT=async(e,t)=>{let r=e.body,n=K3(r.Error,t),i=new $n.IDPRejectedClaimException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},N3=async(e,t)=>{let r=e.body,n=J3(r.Error,t),i=new $n.InvalidAuthorizationMessageException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},TT=async(e,t)=>{let r=e.body,n=Y3(r.Error,t),i=new $n.InvalidIdentityTokenException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},ff=async(e,t)=>{let r=e.body,n=X3(r.Error,t),i=new $n.MalformedPolicyDocumentException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},mf=async(e,t)=>{let r=e.body,n=Z3(r.Error,t),i=new $n.PackedPolicyTooLargeException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},Pc=async(e,t)=>{let r=e.body,n=eH(r.Error,t),i=new $n.RegionDisabledException({$metadata:Ge(e),...n});return(0,P.decorateServiceException)(i,r)},x3=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let n=hf(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=IT(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,o])=>{let s=`Tags.${i}`;r[s]=o})}if(e.TransitiveTagKeys!=null){let n=F3(e.TransitiveTagKeys,t);e.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([i,o])=>{let s=`TransitiveTagKeys.${i}`;r[s]=o})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let n=D3(e.ProvidedContexts,t);e.ProvidedContexts?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([i,o])=>{let s=`ProvidedContexts.${i}`;r[s]=o})}return r},C3=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.PrincipalArn!=null&&(r.PrincipalArn=e.PrincipalArn),e.SAMLAssertion!=null&&(r.SAMLAssertion=e.SAMLAssertion),e.PolicyArns!=null){let n=hf(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r},O3=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=hf(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r},A3=(e,t)=>{let r={};return e.EncodedMessage!=null&&(r.EncodedMessage=e.EncodedMessage),r},P3=(e,t)=>{let r={};return e.AccessKeyId!=null&&(r.AccessKeyId=e.AccessKeyId),r},T3=(e,t)=>({}),I3=(e,t)=>{let r={};if(e.Name!=null&&(r.Name=e.Name),e.Policy!=null&&(r.Policy=e.Policy),e.PolicyArns!=null){let n=hf(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}if(e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=IT(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,o])=>{let s=`Tags.${i}`;r[s]=o})}return r},R3=(e,t)=>{let r={};return e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),r},hf=(e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=q3(i,t);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},q3=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},M3=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},D3=(e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=M3(i,t);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},k3=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},F3=(e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`member.${n}`]=i,n++);return r},IT=(e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=k3(i,t);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},lE=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,P.expectString)(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},L3=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Tc(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=lE(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},U3=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Tc(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=lE(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.Subject!==void 0&&(r.Subject=(0,P.expectString)(e.Subject)),e.SubjectType!==void 0&&(r.SubjectType=(0,P.expectString)(e.SubjectType)),e.Issuer!==void 0&&(r.Issuer=(0,P.expectString)(e.Issuer)),e.Audience!==void 0&&(r.Audience=(0,P.expectString)(e.Audience)),e.NameQualifier!==void 0&&(r.NameQualifier=(0,P.expectString)(e.NameQualifier)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},j3=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Tc(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,P.expectString)(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=lE(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=(0,P.expectString)(e.Provider)),e.Audience!==void 0&&(r.Audience=(0,P.expectString)(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},Tc=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=(0,P.expectString)(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,P.expectString)(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=(0,P.expectString)(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=(0,P.expectNonNull)((0,P.parseRfc3339DateTimeWithOffset)(e.Expiration))),r},B3=(e,t)=>{let r={};return e.DecodedMessage!==void 0&&(r.DecodedMessage=(0,P.expectString)(e.DecodedMessage)),r},W3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},V3=(e,t)=>{let r={};return e.FederatedUserId!==void 0&&(r.FederatedUserId=(0,P.expectString)(e.FederatedUserId)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},$3=(e,t)=>{let r={};return e.Account!==void 0&&(r.Account=(0,P.expectString)(e.Account)),r},z3=(e,t)=>{let r={};return e.UserId!==void 0&&(r.UserId=(0,P.expectString)(e.UserId)),e.Account!==void 0&&(r.Account=(0,P.expectString)(e.Account)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},H3=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Tc(e.Credentials,t)),e.FederatedUser!==void 0&&(r.FederatedUser=V3(e.FederatedUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),r},G3=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Tc(e.Credentials,t)),r},Q3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},K3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},J3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},Y3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},X3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},Z3=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},eH=(e,t)=>{let r={};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},Ge=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tH=(e,t)=>(0,P.collectBody)(e,t).then(r=>t.utf8Encoder(r)),zn=(0,P.withBaseException)(Xz.STSServiceException),Hn=async(e,t,r,n,i)=>{let{hostname:o,protocol:s="https",port:a,path:u}=await e.endpoint(),l={protocol:s,hostname:o,port:a,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:t};return n!==void 0&&(l.hostname=n),i!==void 0&&(l.body=i),new Jz.HttpRequest(l)},Gn={"content-type":"application/x-www-form-urlencoded"},rn=(e,t)=>tH(e,t).then(r=>{if(r.length){let n=new Yz.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(u,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i=n.parse(r),o="#text",s=Object.keys(i)[0],a=i[s];return a[o]&&(a[s]=a[o],delete a[o]),(0,P.getValueFromTextNode)(a)}return{}}),Qn=async(e,t)=>{let r=await rn(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Kn=e=>Object.entries(e).map(([t,r])=>(0,P.extendedEncodeURIComponent)(t)+"="+(0,P.extendedEncodeURIComponent)(r)).join("&"),Jn=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var _f=c(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.AssumeRoleCommand=rs.$Command=void 0;var rH=Qr(),nH=ee(),iH=_e(),qT=A();Object.defineProperty(rs,"$Command",{enumerable:!0,get:function(){return qT.Command}});var oH=Wn(),RT=nn(),pE=class e extends qT.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,iH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,nH.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,rH.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:oH.AssumeRoleResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,RT.se_AssumeRoleCommand)(t,r)}deserialize(t,r){return(0,RT.de_AssumeRoleCommand)(t,r)}};rs.AssumeRoleCommand=pE});var yf=c(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.AssumeRoleWithWebIdentityCommand=ns.$Command=void 0;var sH=ee(),aH=_e(),kT=A();Object.defineProperty(ns,"$Command",{enumerable:!0,get:function(){return kT.Command}});var MT=Wn(),DT=nn(),fE=class e extends kT.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,aH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,sH.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:MT.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:MT.AssumeRoleWithWebIdentityResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,DT.se_AssumeRoleWithWebIdentityCommand)(t,r)}deserialize(t,r){return(0,DT.de_AssumeRoleWithWebIdentityCommand)(t,r)}};ns.AssumeRoleWithWebIdentityCommand=fE});var mE=c(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.decorateDefaultCredentialProvider=yr.getDefaultRoleAssumerWithWebIdentity=yr.getDefaultRoleAssumer=void 0;var cH=_f(),uH=yf(),FT="us-east-1",LT=e=>typeof e!="function"?e===void 0?FT:e:async()=>{try{return await e()}catch{return FT}},dH=(e,t)=>{let r,n;return async(i,o)=>{if(n=i,!r){let{logger:a,region:u,requestHandler:l}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:LT(u||e.region),...l?{requestHandler:l}:{}})}let{Credentials:s}=await r.send(new cH.AssumeRoleCommand(o));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}};yr.getDefaultRoleAssumer=dH;var lH=(e,t)=>{let r;return async n=>{if(!r){let{logger:o,region:s,requestHandler:a}=e;r=new t({logger:o,region:LT(s||e.region),...a?{requestHandler:a}:{}})}let{Credentials:i}=await r.send(new uH.AssumeRoleWithWebIdentityCommand(n));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}};yr.getDefaultRoleAssumerWithWebIdentity=lH;var pH=e=>t=>e({roleAssumer:(0,yr.getDefaultRoleAssumer)(t,t.stsClientCtor),roleAssumerWithWebIdentity:(0,yr.getDefaultRoleAssumerWithWebIdentity)(t,t.stsClientCtor),...t});yr.decorateDefaultCredentialProvider=pH});var UT=c(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.fromEnv=Qe.ENV_EXPIRATION=Qe.ENV_SESSION=Qe.ENV_SECRET=Qe.ENV_KEY=void 0;var fH=X();Qe.ENV_KEY="AWS_ACCESS_KEY_ID";Qe.ENV_SECRET="AWS_SECRET_ACCESS_KEY";Qe.ENV_SESSION="AWS_SESSION_TOKEN";Qe.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var mH=()=>async()=>{let e=process.env[Qe.ENV_KEY],t=process.env[Qe.ENV_SECRET],r=process.env[Qe.ENV_SESSION],n=process.env[Qe.ENV_EXPIRATION];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new fH.CredentialsProviderError("Unable to find environment variable credentials.")};Qe.fromEnv=mH});var _E=c(hE=>{"use strict";Object.defineProperty(hE,"__esModule",{value:!0});var hH=(N(),S(b));hH.__exportStar(UT(),hE)});var Ic=c(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.getHomeDir=void 0;var _H=q("os"),yH=q("path"),jT=q("process"),yE={},gH=()=>jT.geteuid?`${(0,jT.geteuid)()}`:"DEFAULT",EH=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${yH.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let i=gH();return yE[i]||(yE[i]=(0,_H.homedir)()),yE[i]};gf.getHomeDir=EH});var BT=c(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.getProfileName=gr.DEFAULT_PROFILE=gr.ENV_PROFILE=void 0;gr.ENV_PROFILE="AWS_PROFILE";gr.DEFAULT_PROFILE="default";var vH=e=>e.profile||process.env[gr.ENV_PROFILE]||gr.DEFAULT_PROFILE;gr.getProfileName=vH});var gE=c(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.getSSOTokenFilepath=void 0;var wH=q("crypto"),SH=q("path"),bH=Ic(),NH=e=>{let r=(0,wH.createHash)("sha1").update(e).digest("hex");return(0,SH.join)((0,bH.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Ef.getSSOTokenFilepath=NH});var WT=c(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.getSSOTokenFromFile=void 0;var xH=q("fs"),CH=gE(),{readFile:OH}=xH.promises,AH=async e=>{let t=(0,CH.getSSOTokenFilepath)(e),r=await OH(t,"utf8");return JSON.parse(r)};vf.getSSOTokenFromFile=AH});var EE=c(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.getConfigFilepath=Vi.ENV_CONFIG_PATH=void 0;var PH=q("path"),TH=Ic();Vi.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var IH=()=>process.env[Vi.ENV_CONFIG_PATH]||(0,PH.join)((0,TH.getHomeDir)(),".aws","config");Vi.getConfigFilepath=IH});var VT=c($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.getCredentialsFilepath=$i.ENV_CREDENTIALS_PATH=void 0;var RH=q("path"),qH=Ic();$i.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var MH=()=>process.env[$i.ENV_CREDENTIALS_PATH]||(0,RH.join)((0,qH.getHomeDir)(),".aws","credentials");$i.getCredentialsFilepath=MH});var zT=c(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.getProfileData=void 0;var $T=/^profile\s(["'])?([^\1]+)\1$/,DH=e=>Object.entries(e).filter(([t])=>$T.test(t)).reduce((t,[r,n])=>({...t,[$T.exec(r)[2]]:n}),{...e.default&&{default:e.default}});wf.getProfileData=DH});var vE=c(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.parseIni=void 0;var kH=["__proto__","profile __proto__"],FH=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),kH.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=n.indexOf("="),s=0,a=n.length-1;if(o!==-1&&o!==s&&o!==a){let[l,p]=[n.substring(0,o).trim(),n.substring(o+1).trim()];t[r]=t[r]||{},t[r][l]=p}}return t};Sf.parseIni=FH});var SE=c(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.slurpFile=void 0;var LH=q("fs"),{readFile:UH}=LH.promises,wE={},jH=(e,t)=>((!wE[e]||t?.ignoreCache)&&(wE[e]=UH(e,"utf8")),wE[e]);bf.slurpFile=jH});var bE=c(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.loadSharedConfigFiles=void 0;var BH=EE(),WH=VT(),VH=zT(),HT=vE(),GT=SE(),QT=()=>({}),$H=async(e={})=>{let{filepath:t=(0,WH.getCredentialsFilepath)(),configFilepath:r=(0,BH.getConfigFilepath)()}=e,n=await Promise.all([(0,GT.slurpFile)(r,{ignoreCache:e.ignoreCache}).then(HT.parseIni).then(VH.getProfileData).catch(QT),(0,GT.slurpFile)(t,{ignoreCache:e.ignoreCache}).then(HT.parseIni).catch(QT)]);return{configFile:n[0],credentialsFile:n[1]}};Nf.loadSharedConfigFiles=$H});var JT=c(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.getSsoSessionData=void 0;var KT=/^sso-session\s(["'])?([^\1]+)\1$/,zH=e=>Object.entries(e).filter(([t])=>KT.test(t)).reduce((t,[r,n])=>({...t,[KT.exec(r)[2]]:n}),{});xf.getSsoSessionData=zH});var YT=c(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.loadSsoSessionData=void 0;var HH=EE(),GH=JT(),QH=vE(),KH=SE(),JH=()=>({}),YH=async(e={})=>{var t;return(0,KH.slurpFile)((t=e.configFilepath)!==null&&t!==void 0?t:(0,HH.getConfigFilepath)()).then(QH.parseIni).then(GH.getSsoSessionData).catch(JH)};Cf.loadSsoSessionData=YH});var XT=c(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.mergeConfigFiles=void 0;var XH=(...e)=>{let t={};for(let r of e)for(let[n,i]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],i):t[n]=i;return t};Of.mergeConfigFiles=XH});var ZT=c(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.parseKnownFiles=void 0;var ZH=bE(),e6=XT(),t6=async e=>{let t=await(0,ZH.loadSharedConfigFiles)(e);return(0,e6.mergeConfigFiles)(t.configFile,t.credentialsFile)};Af.parseKnownFiles=t6});var tI=c(eI=>{"use strict";Object.defineProperty(eI,"__esModule",{value:!0})});var vr=c(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});var Yn=(N(),S(b));Yn.__exportStar(Ic(),Er);Yn.__exportStar(BT(),Er);Yn.__exportStar(gE(),Er);Yn.__exportStar(WT(),Er);Yn.__exportStar(bE(),Er);Yn.__exportStar(YT(),Er);Yn.__exportStar(ZT(),Er);Yn.__exportStar(tI(),Er)});var Tf=c(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.httpRequest=void 0;var NE=X(),r6=q("buffer"),n6=q("http");function i6(e){return new Promise((t,r)=>{var n;let i=(0,n6.request)({method:"GET",...e,hostname:(n=e.hostname)===null||n===void 0?void 0:n.replace(/^\[(.+)\]$/,"$1")});i.on("error",o=>{r(Object.assign(new NE.ProviderError("Unable to connect to instance metadata service"),o)),i.destroy()}),i.on("timeout",()=>{r(new NE.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new NE.ProviderError("Error response received from instance metadata service"),{statusCode:s})),i.destroy());let a=[];o.on("data",u=>{a.push(u)}),o.on("end",()=>{t(r6.Buffer.concat(a)),i.destroy()})}),i.end()})}Pf.httpRequest=i6});var xE=c(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.fromImdsCredentials=is.isImdsCredentials=void 0;var o6=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string";is.isImdsCredentials=o6;var s6=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});is.fromImdsCredentials=s6});var If=c(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.providerConfigFromInit=wr.DEFAULT_MAX_RETRIES=wr.DEFAULT_TIMEOUT=void 0;wr.DEFAULT_TIMEOUT=1e3;wr.DEFAULT_MAX_RETRIES=0;var a6=({maxRetries:e=wr.DEFAULT_MAX_RETRIES,timeout:t=wr.DEFAULT_TIMEOUT})=>({maxRetries:e,timeout:t});wr.providerConfigFromInit=a6});var CE=c(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.retry=void 0;var c6=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};Rf.retry=c6});var nI=c(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.fromContainerMetadata=Me.ENV_CMDS_AUTH_TOKEN=Me.ENV_CMDS_RELATIVE_URI=Me.ENV_CMDS_FULL_URI=void 0;var qf=X(),u6=q("url"),d6=Tf(),rI=xE(),l6=If(),p6=CE();Me.ENV_CMDS_FULL_URI="AWS_CONTAINER_CREDENTIALS_FULL_URI";Me.ENV_CMDS_RELATIVE_URI="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";Me.ENV_CMDS_AUTH_TOKEN="AWS_CONTAINER_AUTHORIZATION_TOKEN";var f6=(e={})=>{let{timeout:t,maxRetries:r}=(0,l6.providerConfigFromInit)(e);return()=>(0,p6.retry)(async()=>{let n=await g6(),i=JSON.parse(await m6(t,n));if(!(0,rI.isImdsCredentials)(i))throw new qf.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,rI.fromImdsCredentials)(i)},r)};Me.fromContainerMetadata=f6;var m6=async(e,t)=>(process.env[Me.ENV_CMDS_AUTH_TOKEN]&&(t.headers={...t.headers,Authorization:process.env[Me.ENV_CMDS_AUTH_TOKEN]}),(await(0,d6.httpRequest)({...t,timeout:e})).toString()),h6="169.254.170.2",_6={localhost:!0,"127.0.0.1":!0},y6={"http:":!0,"https:":!0},g6=async()=>{if(process.env[Me.ENV_CMDS_RELATIVE_URI])return{hostname:h6,path:process.env[Me.ENV_CMDS_RELATIVE_URI]};if(process.env[Me.ENV_CMDS_FULL_URI]){let e=(0,u6.parse)(process.env[Me.ENV_CMDS_FULL_URI]);if(!e.hostname||!(e.hostname in _6))throw new qf.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in y6))throw new qf.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new qf.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Me.ENV_CMDS_RELATIVE_URI} or ${Me.ENV_CMDS_FULL_URI} environment variable is set`,!1)}});var iI=c(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.fromEnv=void 0;var E6=X(),v6=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new E6.CredentialsProviderError(t.message||`Cannot load config from environment variables with getter: ${e}`)}};Mf.fromEnv=v6});var sI=c(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.fromSharedConfigFiles=void 0;var w6=X(),oI=vr(),S6=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=(0,oI.getProfileName)(r),{configFile:i,credentialsFile:o}=await(0,oI.loadSharedConfigFiles)(r),s=o[n]||{},a=i[n]||{},u=t==="config"?{...s,...a}:{...a,...s};try{let l=e(u);if(l===void 0)throw new Error;return l}catch(l){throw new w6.CredentialsProviderError(l.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};Df.fromSharedConfigFiles=S6});var aI=c(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.fromStatic=void 0;var b6=X(),N6=e=>typeof e=="function",x6=e=>N6(e)?async()=>await e():(0,b6.fromStatic)(e);kf.fromStatic=x6});var uI=c(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.loadConfig=void 0;var cI=X(),C6=iI(),O6=sI(),A6=aI(),P6=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>(0,cI.memoize)((0,cI.chain)((0,C6.fromEnv)(e),(0,O6.fromSharedConfigFiles)(t,n),(0,A6.fromStatic)(r)));Ff.loadConfig=P6});var Xn=c(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});var T6=(N(),S(b));T6.__exportStar(uI(),OE)});var dI=c(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.Endpoint=void 0;var I6;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(I6=Rc.Endpoint||(Rc.Endpoint={}))});var lI=c(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.ENDPOINT_CONFIG_OPTIONS=Sr.CONFIG_ENDPOINT_NAME=Sr.ENV_ENDPOINT_NAME=void 0;Sr.ENV_ENDPOINT_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT";Sr.CONFIG_ENDPOINT_NAME="ec2_metadata_service_endpoint";Sr.ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>e[Sr.ENV_ENDPOINT_NAME],configFileSelector:e=>e[Sr.CONFIG_ENDPOINT_NAME],default:void 0}});var AE=c(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.EndpointMode=void 0;var R6;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(R6=qc.EndpointMode||(qc.EndpointMode={}))});var pI=c(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.ENDPOINT_MODE_CONFIG_OPTIONS=br.CONFIG_ENDPOINT_MODE_NAME=br.ENV_ENDPOINT_MODE_NAME=void 0;var q6=AE();br.ENV_ENDPOINT_MODE_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE";br.CONFIG_ENDPOINT_MODE_NAME="ec2_metadata_service_endpoint_mode";br.ENDPOINT_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[br.ENV_ENDPOINT_MODE_NAME],configFileSelector:e=>e[br.CONFIG_ENDPOINT_MODE_NAME],default:q6.EndpointMode.IPv4}});var TE=c(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.getInstanceMetadataEndpoint=void 0;var mI=Xn(),M6=Di(),fI=dI(),D6=lI(),PE=AE(),k6=pI(),F6=async()=>(0,M6.parseUrl)(await L6()||await U6());Lf.getInstanceMetadataEndpoint=F6;var L6=async()=>(0,mI.loadConfig)(D6.ENDPOINT_CONFIG_OPTIONS)(),U6=async()=>{let e=await(0,mI.loadConfig)(k6.ENDPOINT_MODE_CONFIG_OPTIONS)();switch(e){case PE.EndpointMode.IPv4:return fI.Endpoint.IPv4;case PE.EndpointMode.IPv6:return fI.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(PE.EndpointMode)}`)}}});var hI=c(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.getExtendedInstanceMetadataCredentials=void 0;var j6=5*60,B6=5*60,W6="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",V6=(e,t)=>{var r;let n=j6+Math.floor(Math.random()*B6),i=new Date(Date.now()+n*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+W6);let o=(r=e.originalExpiration)!==null&&r!==void 0?r:e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:i}};Uf.getExtendedInstanceMetadataCredentials=V6});var yI=c(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.staticStabilityProvider=void 0;var _I=hI(),$6=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let i;try{i=await e(),i.expiration&&i.expiration.getTime()<Date.now()&&(i=(0,_I.getExtendedInstanceMetadataCredentials)(i,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),i=(0,_I.getExtendedInstanceMetadataCredentials)(n,r);else throw o}return n=i,i}};jf.staticStabilityProvider=$6});var wI=c(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.fromInstanceMetadata=void 0;var z6=X(),IE=Tf(),gI=xE(),H6=If(),EI=CE(),G6=TE(),Q6=yI(),vI="/latest/meta-data/iam/security-credentials/",K6="/latest/api/token",J6=(e={})=>(0,Q6.staticStabilityProvider)(Y6(e),{logger:e.logger});Bf.fromInstanceMetadata=J6;var Y6=e=>{let t=!1,{timeout:r,maxRetries:n}=(0,H6.providerConfigFromInit)(e),i=async(o,s)=>{let a=(await(0,EI.retry)(async()=>{let u;try{u=await Z6(s)}catch(l){throw l.statusCode===401&&(t=!1),l}return u},o)).trim();return(0,EI.retry)(async()=>{let u;try{u=await e8(a,s)}catch(l){throw l.statusCode===401&&(t=!1),l}return u},o)};return async()=>{let o=await(0,G6.getInstanceMetadataEndpoint)();if(t)return i(n,{...o,timeout:r});{let s;try{s=(await X6({...o,timeout:r})).toString()}catch(a){if(a?.statusCode===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),i(n,{...o,timeout:r})}return i(n,{...o,headers:{"x-aws-ec2-metadata-token":s},timeout:r})}}},X6=async e=>(0,IE.httpRequest)({...e,path:K6,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Z6=async e=>(await(0,IE.httpRequest)({...e,path:vI})).toString(),e8=async(e,t)=>{let r=JSON.parse((await(0,IE.httpRequest)({...t,path:vI+e})).toString());if(!(0,gI.isImdsCredentials)(r))throw new z6.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,gI.fromImdsCredentials)(r)}});var bI=c(SI=>{"use strict";Object.defineProperty(SI,"__esModule",{value:!0})});var Vf=c(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getInstanceMetadataEndpoint=Nr.httpRequest=void 0;var Wf=(N(),S(b));Wf.__exportStar(nI(),Nr);Wf.__exportStar(wI(),Nr);Wf.__exportStar(If(),Nr);Wf.__exportStar(bI(),Nr);var t8=Tf();Object.defineProperty(Nr,"httpRequest",{enumerable:!0,get:function(){return t8.httpRequest}});var r8=TE();Object.defineProperty(Nr,"getInstanceMetadataEndpoint",{enumerable:!0,get:function(){return r8.getInstanceMetadataEndpoint}})});var xI=c($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.resolveCredentialSource=void 0;var n8=_E(),NI=Vf(),i8=X(),o8=(e,t)=>{let r={EcsContainer:NI.fromContainerMetadata,Ec2InstanceMetadata:NI.fromInstanceMetadata,Environment:n8.fromEnv};if(e in r)return r[e]();throw new i8.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};$f.resolveCredentialSource=o8});var CI=c(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.resolveAssumeRoleCredentials=os.isAssumeRoleProfile=void 0;var RE=X(),s8=vr(),a8=xI(),c8=qE(),u8=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(d8(e)||l8(e));os.isAssumeRoleProfile=u8;var d8=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",l8=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",p8=async(e,t,r,n={})=>{let i=t[e];if(!r.roleAssumer)throw new RE.CredentialsProviderError(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=i;if(o&&o in n)throw new RE.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,s8.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let s=o?(0,c8.resolveProfileData)(o,t,r,{...n,[o]:!0}):(0,a8.resolveCredentialSource)(i.credential_source,e)(),a={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id},{mfa_serial:u}=i;if(u){if(!r.mfaCodeProvider)throw new RE.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=u,a.TokenCode=await r.mfaCodeProvider(u)}let l=await s;return r.roleAssumer(l,a)};os.resolveAssumeRoleCredentials=p8});var OI=c(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.getValidatedProcessCredentials=void 0;var f8=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};zf.getValidatedProcessCredentials=f8});var AI=c(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.resolveProcessCredentials=void 0;var ME=X(),m8=q("child_process"),h8=q("util"),_8=OI(),y8=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let i=(0,h8.promisify)(m8.exec);try{let{stdout:o}=await i(n),s;try{s=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return(0,_8.getValidatedProcessCredentials)(e,s)}catch(o){throw new ME.CredentialsProviderError(o.message)}}else throw new ME.CredentialsProviderError(`Profile ${e} did not contain credential_process.`)}else throw new ME.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`)};Hf.resolveProcessCredentials=y8});var TI=c(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.fromProcess=void 0;var PI=vr(),g8=AI(),E8=(e={})=>async()=>{let t=await(0,PI.parseKnownFiles)(e);return(0,g8.resolveProcessCredentials)((0,PI.getProfileName)(e),t)};Gf.fromProcess=E8});var kE=c(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});var v8=(N(),S(b));v8.__exportStar(TI(),DE)});var II=c(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.resolveProcessCredentials=ss.isProcessProfile=void 0;var w8=kE(),S8=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string";ss.isProcessProfile=S8;var b8=async(e,t)=>(0,w8.fromProcess)({...e,profile:t})();ss.resolveProcessCredentials=b8});var FE=c(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.isSsoProfile=void 0;var N8=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");Qf.isSsoProfile=N8});var RI=c(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.resolveClientEndpointParameters=void 0;var x8=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});Kf.resolveClientEndpointParameters=x8});var qI=c((KEe,C8)=>{C8.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.405.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.405.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Jf=c(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.newLiftedPromise=as.makeSelfCleaningPromise=void 0;function O8(e,t){return t?e.finally(()=>{t()}):e}as.makeSelfCleaningPromise=O8;function A8(e){let t,r,n=new Promise((i,o)=>{t=i,r=o});if(!t||!r)throw new Error("Failed to bind resolve and reject when making lifted promise");return e&&e(t,r),{promise:n,resolve:t,reject:r}}as.newLiftedPromise=A8});var DI=c(De=>{"use strict";var P8=De&&De.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),T8=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),I8=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&P8(t,e,r);return T8(t,e),t};Object.defineProperty(De,"__esModule",{value:!0});De.newCancellablePromiseFromNextEvent=De.CancelController=De.EVENT_NAME=void 0;var R8=q("events"),MI=I8(Jf());De.EVENT_NAME="cancelled";var LE=class{constructor(t){this.cancelled=!1,t&&t.emitterFactory?this.emitter=t.emitterFactory():this.emitter=new R8.EventEmitter}cancel(){this.cancelled||(this.cancelled=!0,this.emitter.emit(De.EVENT_NAME),this.emitter.removeAllListeners(De.EVENT_NAME))}hasBeenCancelled(){return this.cancelled}addListener(t){if(this.cancelled){t();return}return this.emitter.on(De.EVENT_NAME,t),()=>{this.emitter.removeListener(De.EVENT_NAME,t)}}};De.CancelController=LE;function q8(e){let t,r,n=MI.newLiftedPromise();return t=i=>{try{e.eventDataTransformer?n.resolve(e.eventDataTransformer(i)):n.resolve(i)}catch(o){n.reject(o)}},e.emitter.addListener(e.eventName,t),e.cancelController&&(r=e.cancelController.addListener(()=>{n.reject(e.cancelMessage)})),MI.makeSelfCleaningPromise(n.promise,()=>{t&&e.emitter.removeListener(e.eventName,t),r&&r()})}De.newCancellablePromiseFromNextEvent=q8});var kI=c((XEe,M8)=>{M8.exports={name:"aws-crt",version:"1.18.0",description:"NodeJS/browser bindings to the aws-c-* libraries",homepage:"https://github.com/awslabs/aws-crt-nodejs",repository:{type:"git",url:"git+https://github.com/awslabs/aws-crt-nodejs.git"},contributors:["AWS Common Runtime Team <aws-sdk-common-runtime@amazon.com>"],license:"Apache-2.0",main:"./dist/index.js",browser:"./dist.browser/browser.js",types:"./dist/index.d.ts",scripts:{tsc:"node ./scripts/tsc.js",test:"npm run test:native","test:node":"npm run test:native","test:native":"npx jest --runInBand --verbose --config test/native/jest.config.js --forceExit","test:browser":"npx jest --runInBand --verbose --config test/browser/jest.config.js --forceExit","test:browser:ci":"npm run install:puppeteer && npm run test:browser","install:puppeteer":"npm install --save-dev jest-puppeteer puppeteer @types/puppeteer",prepare:"node ./scripts/tsc.js && node ./scripts/install.js",install:"node ./scripts/install.js"},devDependencies:{"@types/crypto-js":"^3.1.43","@types/jest":"^27.0.1","@types/node":"^10.17.54","@types/prettier":"2.6.0","@types/puppeteer":"^5.4.7","@types/uuid":"^3.4.8","@types/ws":"^7.4.7","aws-sdk":"^2.848.0","https-proxy-agent":"^5.0.1",jest:"^27.2.1","jest-puppeteer":"^5.0.4","jest-runtime":"^27.2.1",puppeteer:"^3.3.0","ts-jest":"^27.0.5",typedoc:"^0.22.18","typedoc-plugin-merge-modules":"^3.1.0",typescript:"^4.7.4",uuid:"^8.3.2",yargs:"^17.2.1","cmake-js":"^6.3.2",tar:"^6.1.11"},dependencies:{"@aws-sdk/util-utf8-browser":"^3.109.0","@httptoolkit/websocket-stream":"^6.0.0",axios:"^0.24.0",buffer:"^6.0.3","crypto-js":"^4.0.0",mqtt:"^4.3.7",process:"^0.11.10"}}});var Yf=c(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.crt_version=xr.package_info=xr.is_browser=xr.is_nodejs=void 0;function FI(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}xr.is_nodejs=FI;function D8(){return!FI()}xr.is_browser=D8;function LI(){try{return kI()}catch{return{name:"aws-crt-nodejs",version:"UNKNOWN"}}}xr.package_info=LI;function k8(){return LI().version}xr.crt_version=k8});var UI=c(cs=>{"use strict";var F8=cs&&cs.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(cs,"__esModule",{value:!0});cs.using=void 0;function L8(e,t){return F8(this,void 0,void 0,function*(){try{yield t(e)}finally{e.close()}})}cs.using=L8});var Qt=c(tt=>{"use strict";var U8=tt&&tt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),j8=tt&&tt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),B8=tt&&tt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&U8(t,e,r);return j8(t,e),t},W8=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tt,"__esModule",{value:!0});tt.cRuntime=tt.CRuntimeType=void 0;var Xf=B8(q("path")),UE=q("os"),VI=q("fs"),jI=q("process"),V8=W8(q("child_process")),us=Object.freeze({NON_LINUX:"cruntime",MUSL:"musl",GLIBC:"glibc"});tt.CRuntimeType=us;function $8(){if((0,UE.platform)()!=="linux")return us.NON_LINUX;try{let e=V8.default.spawnSync("ldd",["--version"],{encoding:"utf8"});return(e.stdout+e.stderr).includes(us.MUSL)?us.MUSL:us.GLIBC}catch{return us.GLIBC}}var BI="Please upgrade to node >=10.16.0, or use the provided browser implementation.";if("napi"in jI.versions){if(parseInt(jI.versions.napi)<4)throw new Error("The AWS CRT native implementation requires that NAPI version 4 be present. "+BI)}else throw new Error("The current runtime is not reporting an NAPI version. "+BI);var $I=$8();tt.cRuntime=$I;var z8="aws-crt-nodejs",H8=`${UE.platform}-${UE.arch}-${$I}`,jE=Xf.resolve(__dirname,"..",".."),WI=Xf.join(jE,"dist");(0,VI.existsSync)(WI)&&(jE=WI);var G8=Xf.resolve(jE,"bin"),zI=[Xf.join(G8,H8,z8)],BE;for(let e of zI)if((0,VI.existsSync)(e+".node")){BE=q(e);break}if(BE==null)throw new Error(`AWS CRT binary not present in any of the following locations:
	`+zI.join(`
	`));tt.default=BE});var Kt=c(ls=>{"use strict";var Q8=ls&&ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});ls.CrtError=void 0;var HI=Q8(Qt()),ds=class extends Error{constructor(t){super(K8(t)),this.error=t,this.error_code=J8(t),this.error_name=Y8(t)}};ls.CrtError=ds;function K8(e){return typeof e=="number"?HI.default.error_code_to_string(e):e instanceof ds?e.message:e.toString()}function J8(e){if(typeof e=="number")return e;if(e instanceof ds)return e.error_code}function Y8(e){if(typeof e=="number")return HI.default.error_code_to_name(e);if(e instanceof ds)return e.error_name}});var zi=c(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.NativeResourceMixin=ps.NativeResource=void 0;var WE=class{constructor(t){this.handle=t}native_handle(){return this.handle}};ps.NativeResource=WE;function X8(e){return class extends e{constructor(...t){let r=t.shift();super(...t),this._handle=r}_super(t){this._handle=t}native_handle(){return this._handle}}}ps.NativeResourceMixin=X8});var VE=c(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.SocketDomain=Jt.SocketType=Jt.TlsVersion=void 0;var Z8;(function(e){e[e.SSLv3=0]="SSLv3",e[e.TLSv1=1]="TLSv1",e[e.TLSv1_1=2]="TLSv1_1",e[e.TLSv1_2=3]="TLSv1_2",e[e.TLSv1_3=4]="TLSv1_3",e[e.Default=128]="Default"})(Z8=Jt.TlsVersion||(Jt.TlsVersion={}));var eG;(function(e){e[e.STREAM=0]="STREAM",e[e.DGRAM=1]="DGRAM"})(eG=Jt.SocketType||(Jt.SocketType={}));var tG;(function(e){e[e.IPV4=0]="IPV4",e[e.IPV6=1]="IPV6",e[e.LOCAL=2]="LOCAL"})(tG=Jt.SocketDomain||(Jt.SocketDomain={}))});var on=c(D=>{"use strict";var rG=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.Pkcs11Lib=D.TlsConnectionOptions=D.ServerTlsContext=D.ClientTlsContext=D.TlsContext=D.TlsContextOptions=D.SocketOptions=D.ClientBootstrap=D.InputStream=D.is_alpn_available=D.enable_logging=D.LogLevel=D.error_code_to_name=D.error_code_to_string=D.SocketDomain=D.SocketType=D.TlsVersion=void 0;var Nt=rG(Qt()),fs=zi(),$E=VE(),YE=VE();Object.defineProperty(D,"TlsVersion",{enumerable:!0,get:function(){return YE.TlsVersion}});Object.defineProperty(D,"SocketType",{enumerable:!0,get:function(){return YE.SocketType}});Object.defineProperty(D,"SocketDomain",{enumerable:!0,get:function(){return YE.SocketDomain}});var GI=Kt();function nG(e){return Nt.default.error_code_to_string(e)}D.error_code_to_string=nG;function iG(e){return Nt.default.error_code_to_name(e)}D.error_code_to_name=iG;var oG;(function(e){e[e.NONE=0]="NONE",e[e.FATAL=1]="FATAL",e[e.ERROR=2]="ERROR",e[e.WARN=3]="WARN",e[e.INFO=4]="INFO",e[e.DEBUG=5]="DEBUG",e[e.TRACE=6]="TRACE"})(oG=D.LogLevel||(D.LogLevel={}));function sG(e){Nt.default.io_logging_enable(e)}D.enable_logging=sG;function aG(){return Nt.default.is_alpn_available()}D.is_alpn_available=aG;var zE=class extends fs.NativeResource{constructor(t){super(Nt.default.io_input_stream_new(16*1024)),this.source=t,this.source.on("data",r=>{r=Buffer.isBuffer(r)?r:Buffer.from(r.toString()),Nt.default.io_input_stream_append(this.native_handle(),r)}),this.source.on("end",()=>{Nt.default.io_input_stream_append(this.native_handle(),void 0)})}};D.InputStream=zE;var HE=class extends fs.NativeResource{constructor(){super(Nt.default.io_client_bootstrap_new())}};D.ClientBootstrap=HE;var GE=class extends fs.NativeResource{constructor(t=$E.SocketType.STREAM,r=$E.SocketDomain.IPV6,n=5e3,i=!1,o=0,s=0,a=0){super(Nt.default.io_socket_options_new(t,r,n,o,s,a,i))}};D.SocketOptions=GE;var Mc=class e{constructor(){this.min_tls_version=$E.TlsVersion.Default,this.alpn_list=[],this.verify_peer=!0}override_default_trust_store_from_path(t,r){this.ca_dirpath=t,this.ca_filepath=r}override_default_trust_store(t){this.certificate_authority=t}static create_client_with_mtls(t,r){let n=new e;return n.certificate=t,n.private_key=r,n.verify_peer=!0,n}static create_client_with_mtls_from_path(t,r){let n=new e;return n.certificate_filepath=t,n.private_key_filepath=r,n.verify_peer=!0,n}static create_client_with_mtls_pkcs12_from_path(t,r){let n=new e;return n.pkcs12_filepath=t,n.pkcs12_password=r,n.verify_peer=!0,n}static create_client_with_mtls_pkcs_from_path(t,r){return this.create_client_with_mtls_pkcs12_from_path(t,r)}static create_client_with_mtls_pkcs11(t){let r=new e;return r.pkcs11_options=t,r.verify_peer=!0,r}static create_client_with_mtls_windows_cert_store_path(t){let r=new e;return r.windows_cert_store_path=t,r.verify_peer=!0,r}static create_server_with_mtls_from_path(t,r){let n=new e;return n.certificate_filepath=t,n.private_key_filepath=r,n.verify_peer=!1,n}static create_server_with_mtls_pkcs_from_path(t,r){let n=new e;return n.pkcs12_filepath=t,n.pkcs12_password=r,n.verify_peer=!1,n}};D.TlsContextOptions=Mc;var Dc=class extends fs.NativeResource{constructor(t){if(t==null||t==null)throw new GI.CrtError("TlsContext constructor: ctx_opt not defined");super(Nt.default.io_tls_ctx_new(t.min_tls_version,t.ca_filepath,t.ca_dirpath,t.certificate_authority,t.alpn_list&&t.alpn_list.length>0?t.alpn_list.join(";"):void 0,t.certificate_filepath,t.certificate,t.private_key_filepath,t.private_key,t.pkcs12_filepath,t.pkcs12_password,t.pkcs11_options,t.windows_cert_store_path,t.verify_peer))}};D.TlsContext=Dc;var QE=class extends Dc{constructor(t){t||(t=new Mc,t.verify_peer=!0),super(t)}};D.ClientTlsContext=QE;var KE=class extends Dc{constructor(t){t||(t=new Mc,t.verify_peer=!1),super(t)}};D.ServerTlsContext=KE;var JE=class extends fs.NativeResource{constructor(t,r,n=[]){if(t==null||t==null)throw new GI.CrtError("TlsConnectionOptions constructor: tls_ctx not defined");super(Nt.default.io_tls_connection_options_new(t.native_handle(),r,n&&n.length>0?n.join(";"):void 0)),this.tls_ctx=t,this.server_name=r,this.alpn_list=n}};D.TlsConnectionOptions=JE;var Zf=class e extends fs.NativeResource{constructor(t,r=e.InitializeFinalizeBehavior.DEFAULT){super(Nt.default.io_pkcs11_lib_new(t,r))}close(){Nt.default.io_pkcs11_lib_close(this.native_handle())}};D.Pkcs11Lib=Zf;(function(e){let t;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.OMIT=1]="OMIT",r[r.STRICT=2]="STRICT"})(t=e.InitializeFinalizeBehavior||(e.InitializeFinalizeBehavior={}))})(Zf=D.Pkcs11Lib||(D.Pkcs11Lib={}))});var em=c(de=>{"use strict";var cG=de&&de.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},uG=de&&de.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(de,"__esModule",{value:!0});de.aws_verify_sigv4a_signing=de.aws_sign_request=de.AwsSignedBodyHeaderType=de.AwsSignedBodyValue=de.AwsSignatureType=de.AwsSigningAlgorithm=de.AwsCredentialsProvider=void 0;var ev=uG(Qt()),XE=Kt(),dG=on(),ZE=class extends ev.default.AwsCredentialsProvider{static newDefault(t=void 0){return super.newDefault(t!=null?t.native_handle():null)}static newStatic(t,r,n){return super.newStatic(t,r,n)}static newCognito(t){if(t==null||t==null)throw new XE.CrtError("AwsCredentialsProvider newCognito: Cognito config not defined");return super.newCognito(t,t.tlsContext!=null?t.tlsContext.native_handle():new dG.ClientTlsContext().native_handle(),t.bootstrap!=null?t.bootstrap.native_handle():null,t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null)}static newX509(t){if(t==null||t==null)throw new XE.CrtError("AwsCredentialsProvider newX509: X509 config not defined");return super.newX509(t,t.tlsContext.native_handle(),t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null)}};de.AwsCredentialsProvider=ZE;var lG;(function(e){e[e.SigV4=0]="SigV4",e[e.SigV4Asymmetric=1]="SigV4Asymmetric"})(lG=de.AwsSigningAlgorithm||(de.AwsSigningAlgorithm={}));var pG;(function(e){e[e.HttpRequestViaHeaders=0]="HttpRequestViaHeaders",e[e.HttpRequestViaQueryParams=1]="HttpRequestViaQueryParams",e[e.HttpRequestChunk=2]="HttpRequestChunk",e[e.HttpRequestEvent=3]="HttpRequestEvent"})(pG=de.AwsSignatureType||(de.AwsSignatureType={}));var fG;(function(e){e.EmptySha256="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",e.UnsignedPayload="UNSIGNED-PAYLOAD",e.StreamingAws4HmacSha256Payload="STREAMING-AWS4-HMAC-SHA256-PAYLOAD",e.StreamingAws4HmacSha256Events="STREAMING-AWS4-HMAC-SHA256-EVENTS"})(fG=de.AwsSignedBodyValue||(de.AwsSignedBodyValue={}));var mG;(function(e){e[e.None=0]="None",e[e.XAmzContentSha256=1]="XAmzContentSha256"})(mG=de.AwsSignedBodyHeaderType||(de.AwsSignedBodyHeaderType={}));function hG(e,t){return cG(this,void 0,void 0,function*(){return new Promise((r,n)=>{try{ev.default.aws_sign_request(e,t,i=>{i==0?r(e):n(new XE.CrtError(i))})}catch(i){n(i)}})})}de.aws_sign_request=hG;function _G(e,t,r,n,i,o){return ev.default.aws_verify_sigv4a_signing(e,t,r,n,i,o)}de.aws_verify_sigv4a_signing=_G});var KI=c(Zn=>{"use strict";var yG=Zn&&Zn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.crc32c=Zn.crc32=void 0;var QI=yG(Qt());function gG(e,t){return QI.default.checksums_crc32(e,t)}Zn.crc32=gG;function EG(e,t){return QI.default.checksums_crc32c(e,t)}Zn.crc32c=EG});var YI=c(ei=>{"use strict";var vG=ei&&ei.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ei,"__esModule",{value:!0});ei.native_memory_dump=ei.native_memory=void 0;var JI=vG(Qt());function wG(){return JI.default.native_memory()}ei.native_memory=wG;function SG(){return JI.default.native_memory_dump()}ei.native_memory_dump=SG});var ZI=c(Pe=>{"use strict";var bG=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.hmac_sha256=Pe.Sha256Hmac=Pe.hash_sha1=Pe.Sha1Hash=Pe.hash_sha256=Pe.Sha256Hash=Pe.hash_md5=Pe.Md5Hash=void 0;var Ut=bG(Qt()),XI=zi(),kc=class extends XI.NativeResource{update(t){Ut.default.hash_update(this.native_handle(),t)}finalize(t){return Ut.default.hash_digest(this.native_handle(),t)}constructor(t){super(t)}},tv=class extends kc{constructor(){super(Ut.default.hash_md5_new())}};Pe.Md5Hash=tv;function NG(e,t){return Ut.default.hash_md5_compute(e,t)}Pe.hash_md5=NG;var rv=class extends kc{constructor(){super(Ut.default.hash_sha256_new())}};Pe.Sha256Hash=rv;function xG(e,t){return Ut.default.hash_sha256_compute(e,t)}Pe.hash_sha256=xG;var nv=class extends kc{constructor(){super(Ut.default.hash_sha1_new())}};Pe.Sha1Hash=nv;function CG(e,t){return Ut.default.hash_sha1_compute(e,t)}Pe.hash_sha1=CG;var iv=class extends XI.NativeResource{update(t){Ut.default.hmac_update(this.native_handle(),t)}finalize(t){return Ut.default.hmac_digest(this.native_handle(),t)}constructor(t){super(t)}},ov=class extends iv{constructor(t){super(Ut.default.hmac_sha256_new(t))}};Pe.Sha256Hmac=ov;function OG(e,t,r){return Ut.default.hmac_sha256_compute(e,t,r)}Pe.hmac_sha256=OG});var Fc=c(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.BufferedEventEmitter=void 0;var AG=q("events"),sv=class{constructor(t,r){this.event=t,this.args=r}},av=class extends AG.EventEmitter{constructor(){super(),this.corked=!1}cork(){this.corked=!0}uncork(){for(this.corked=!1;this.eventQueue;){let t=this.eventQueue;super.emit(t.event,...t.args),this.eventQueue=this.eventQueue.next}}emit(t,...r){if(this.corked){let n=this.lastQueuedEvent;return this.lastQueuedEvent=new sv(t,r),n?n.next=this.lastQueuedEvent:this.eventQueue=this.lastQueuedEvent,this.listeners(t).length>0}return super.emit(t,...r)}};tm.BufferedEventEmitter=av});var tR=c(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.unmarshalInt64BigintFromBuffer=le.marshalInt64BigintAsBuffer=le.MIN_INT64=le.MAX_INT64=le.MIN_INT32=le.MAX_INT32=le.MIN_INT16=le.MAX_INT16=le.MIN_INT8=le.MAX_INT8=void 0;var eR=Kt();le.MAX_INT8=127;le.MIN_INT8=-128;le.MAX_INT16=32767;le.MIN_INT16=-32768;le.MAX_INT32=2147483647;le.MIN_INT32=-2147483648;le.MAX_INT64=BigInt("9223372036854775807");le.MIN_INT64=BigInt("-9223372036854775808");var ms=BigInt("256");function PG(e){if(e<le.MIN_INT64||e>le.MAX_INT64)throw new eR.CrtError("marshalInt64BigintAsBuffer expects a value that can fit in 8 bytes");let t=new Uint8Array(8);if(e<0){e=-e-BigInt(1);for(let r=0;r<8;++r)t[r]=255-Number(e%ms),e/=ms}else for(let r=0;r<8;++r)t[r]=Number(e%ms),e/=ms;return t}le.marshalInt64BigintAsBuffer=PG;function TG(e){let t=BigInt(0),r=new Uint8Array(e);if(r.length!=8)throw new eR.CrtError("unmarshalInt64BigintFromBuffer expects a byte buffer of length 8");let n=BigInt(1);if((r[7]&128)!=0){for(let o=0;o<r.length;++o){let s=BigInt(255-r[o]);t+=s*n,n*=ms}t+=BigInt(1),t=-t}else for(let o=0;o<r.length;++o){let s=BigInt(r[o]);t+=s*n,n*=ms}return t}le.unmarshalInt64BigintFromBuffer=TG});var oR=c(Z=>{"use strict";var IG=Z&&Z.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RG=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cv=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&IG(t,e,r);return RG(t,e),t},rm=Z&&Z.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},qG=Z&&Z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Z,"__esModule",{value:!0});Z.ClientStream=Z.ClientConnection=Z.MessageType=Z.MessageFlags=Z.Header=Z.HeaderType=void 0;var rR=zi(),nR=Fc(),oe=Kt(),nm=cv(on()),Yt=cv(tR()),im=cv(Jf()),ti=qG(Qt()),ye;(function(e){e[e.BooleanTrue=0]="BooleanTrue",e[e.BooleanFalse=1]="BooleanFalse",e[e.Byte=2]="Byte",e[e.Int16=3]="Int16",e[e.Int32=4]="Int32",e[e.Int64=5]="Int64",e[e.ByteBuffer=6]="ByteBuffer",e[e.String=7]="String",e[e.Timestamp=8]="Timestamp",e[e.UUID=9]="UUID"})(ye=Z.HeaderType||(Z.HeaderType={}));var MG=127,om=class e{constructor(t,r,n){this.name=t,this.type=r,this.value=n}static validateHeaderName(t){if(t.length==0||t.length>MG)throw new oe.CrtError(`Event stream header name (${t}) is not valid`)}static newBoolean(t,r){return e.validateHeaderName(t),r?new e(t,ye.BooleanTrue):new e(t,ye.BooleanFalse)}static newByte(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT8&&r<=Yt.MAX_INT8&&Number.isSafeInteger(r))return new e(t,ye.Byte,r);throw new oe.CrtError(`Illegal value for eventstream byte-valued header: ${r}`)}static newInt16(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT16&&r<=Yt.MAX_INT16&&Number.isSafeInteger(r))return new e(t,ye.Int16,r);throw new oe.CrtError(`Illegal value for eventstream int16-valued header: ${r}`)}static newInt32(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT32&&r<=Yt.MAX_INT32&&Number.isSafeInteger(r))return new e(t,ye.Int32,r);throw new oe.CrtError(`Illegal value for eventstream int32-valued header: ${r}`)}static newInt64FromNumber(t,r){if(e.validateHeaderName(t),Number.isSafeInteger(r))return new e(t,ye.Int64,Yt.marshalInt64BigintAsBuffer(BigInt(r)));throw new oe.CrtError(`Illegal value for eventstream int64-valued header: ${r}`)}static newInt64FromBigint(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT64&&r<=Yt.MAX_INT64)return new e(t,ye.Int64,Yt.marshalInt64BigintAsBuffer(r));throw new oe.CrtError(`Illegal value for eventstream int64-valued header: ${r}`)}static newByteBuffer(t,r){return e.validateHeaderName(t),new e(t,ye.ByteBuffer,r)}static newString(t,r){return e.validateHeaderName(t),new e(t,ye.String,r)}static newTimeStampFromSecondsSinceEpoch(t,r){if(e.validateHeaderName(t),Number.isSafeInteger(r)&&r>=0)return new e(t,ye.Timestamp,r);throw new oe.CrtError(`Illegal value for eventstream timestamp-valued header: ${r}`)}static newTimeStampFromDate(t,r){e.validateHeaderName(t);let n=r.getTime();if(Number.isSafeInteger(n))return new e(t,ye.Timestamp,n);throw new oe.CrtError(`Illegal value for eventstream timestamp-valued header: ${r}`)}static newUUID(t,r){if(e.validateHeaderName(t),r.byteLength==16)return new e(t,ye.UUID,r);throw new oe.CrtError(`Illegal value for eventstream uuid-valued header: ${r}`)}toValue(t){if(t!=this.type)throw new oe.CrtError(`Header of type (${this.type}) cannot be converted to type (${t})`);return this.value}asBoolean(){switch(this.type){case ye.BooleanFalse:return!1;case ye.BooleanTrue:return!0;default:throw new oe.CrtError(`Header of type (${this.type}) cannot be converted to type (boolean)`)}}asByte(){return this.toValue(ye.Byte)}asInt16(){return this.toValue(ye.Int16)}asInt32(){return this.toValue(ye.Int32)}asInt64(){return Yt.unmarshalInt64BigintFromBuffer(this.toValue(ye.Int64))}asByteBuffer(){return this.toValue(ye.ByteBuffer)}asString(){return this.toValue(ye.String)}asTimestamp(){return this.toValue(ye.Timestamp)}asUUID(){return this.toValue(ye.UUID)}};Z.Header=om;var DG;(function(e){e[e.None=0]="None",e[e.ConnectionAccepted=1]="ConnectionAccepted",e[e.TerminateStream=2]="TerminateStream"})(DG=Z.MessageFlags||(Z.MessageFlags={}));var kG;(function(e){e[e.ApplicationMessage=0]="ApplicationMessage",e[e.ApplicationError=1]="ApplicationError",e[e.Ping=2]="Ping",e[e.PingResponse=3]="PingResponse",e[e.Connect=4]="Connect",e[e.ConnectAck=5]="ConnectAck",e[e.ProtocolError=6]="ProtocolError",e[e.InternalError=7]="InternalError"})(kG=Z.MessageType||(Z.MessageType={}));function FG(e){return Array.from(e,t=>new om(t.name,t.type,t.value))}function iR(e){let t={type:e.type,flags:e.flags,payload:e.payload};return e.headers&&(t.headers=FG(e.headers)),t}var rt;(function(e){e[e.None=0]="None",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Disconnected=3]="Disconnected",e[e.Closed=4]="Closed"})(rt||(rt={}));var Lc=class e extends(0,rR.NativeResourceMixin)(nR.BufferedEventEmitter){constructor(t){if(t===void 0)throw new oe.CrtError("Invalid configuration passed to eventstream ClientConnection constructor");super(),this.state=rt.None,this._super(ti.default.event_stream_client_connection_new(this,t,(r,n)=>{e._s_on_disconnect(r,n)},(r,n)=>{e._s_on_protocol_message(r,n)},t.socketOptions?t.socketOptions.native_handle():null,t.tlsCtx?t.tlsCtx.native_handle():null))}close(){this.state!=rt.Closed&&(this.state=rt.Closed,ti.default.event_stream_client_connection_close(this.native_handle()))}connect(t){return rm(this,void 0,void 0,function*(){let r,n=new Promise((i,o)=>{if(!t){o(new oe.CrtError("Invalid options passed to event stream ClientConnection.connect"));return}if(this.state!=rt.None){o(new oe.CrtError(`Event stream connection in a state (${this.state}) where connect() is not allowed.`));return}if(this.state=rt.Connecting,t.cancelController){let a=()=>{o(new oe.CrtError("Event stream connection connect() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}function s(a,u){return e._s_on_connection_setup(i,o,a,u)}try{ti.default.event_stream_client_connection_connect(this.native_handle(),s)}catch(a){this.state=rt.Disconnected,o(a)}});return im.makeSelfCleaningPromise(n,r)})}sendProtocolMessage(t){return rm(this,void 0,void 0,function*(){let r,n=new Promise((i,o)=>{try{let s=function(a){return e._s_on_connection_send_protocol_message_completion(i,o,a)};if(!t){o(new oe.CrtError("Invalid options passed to event stream ClientConnection.sendProtocolMessage"));return}if(!this.isConnected()){o(new oe.CrtError(`Event stream connection in a state (${this.state}) where sending protocol messages is not allowed.`));return}if(t.cancelController){let a=()=>{o(new oe.CrtError("Event stream connection sendProtocolMessage() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}ti.default.event_stream_client_connection_send_protocol_message(this.native_handle(),t,s)}catch(s){o(s)}});return im.makeSelfCleaningPromise(n,r)})}isConnected(){return this.state==rt.Connected}newStream(){if(!this.isConnected())throw new oe.CrtError(`Event stream connection in a state (${this.state}) where creating new streams is forbidden.`);return new hs(this)}on(t,r){return super.on(t,r),this}static _s_on_connection_setup(t,r,n,i){i==0&&n.state==rt.Connecting?(n.state=rt.Connected,t()):(n.state!=rt.Closed&&(n.state=rt.Disconnected),r(nm.error_code_to_string(i)))}static _s_on_disconnect(t,r){t.state!=rt.Closed&&(t.state=rt.Disconnected),process.nextTick(()=>{t.emit("disconnection",{errorCode:r})})}static _s_on_protocol_message(t,r){process.nextTick(()=>{t.emit("protocolMessage",{message:iR(r)})})}static _s_on_connection_send_protocol_message_completion(t,r,n){n==0?t():r(nm.error_code_to_string(n))}};Z.ClientConnection=Lc;Lc.DISCONNECTION="disconnection";Lc.PROTOCOL_MESSAGE="protocolMessage";var nt;(function(e){e[e.None=0]="None",e[e.Activating=1]="Activating",e[e.Activated=2]="Activated",e[e.Ended=3]="Ended",e[e.Closed=4]="Closed"})(nt||(nt={}));var hs=class e extends(0,rR.NativeResourceMixin)(nR.BufferedEventEmitter){constructor(t){super(),this._super(ti.default.event_stream_client_stream_new(this,t.native_handle(),r=>{e._s_on_stream_ended(r)},(r,n)=>{e._s_on_stream_message(r,n)})),this.state=nt.None}close(){this.state!=nt.Closed&&(this.state=nt.Closed,ti.default.event_stream_client_stream_close(this.native_handle()))}activate(t){return rm(this,void 0,void 0,function*(){let r,n=new Promise((i,o)=>{try{let s=function(a,u){return e._s_on_stream_activated(i,o,a,u)};if(this.state!=nt.None){o(new oe.CrtError(`Event stream in a state (${this.state}) where activation is not allowed.`));return}if(t===void 0){this.state=nt.Ended,o(new oe.CrtError("Invalid options passed to ClientStream.activate"));return}if(this.state=nt.Activating,t.cancelController){let a=()=>{o(new oe.CrtError("Event stream activate() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}ti.default.event_stream_client_stream_activate(this.native_handle(),t,s)}catch(s){this.state=nt.Ended,o(s)}});return im.makeSelfCleaningPromise(n,r)})}sendMessage(t){return rm(this,void 0,void 0,function*(){let r,n=new Promise((i,o)=>{try{let s=function(a){return e._s_on_stream_send_message_completion(i,o,a)};if(!t){o(new oe.CrtError("Invalid options passed to ClientStream.sendMessage"));return}if(this.state!=nt.Activated){o(new oe.CrtError(`Event stream in a state (${this.state}) where sending messages is not allowed.`));return}if(t.cancelController){let a=()=>{o(new oe.CrtError("Event stream sendMessage() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}ti.default.event_stream_client_stream_send_message(this.native_handle(),t,s)}catch(s){o(s)}});return im.makeSelfCleaningPromise(n,r)})}isActive(){return this.state==nt.Activated}on(t,r){return super.on(t,r),this}static _s_on_stream_activated(t,r,n,i){i==0&&n.state==nt.Activating?(n.state=nt.Activated,t()):(n.state!=nt.Closed&&(n.state=nt.Ended),r(nm.error_code_to_string(i)))}static _s_on_stream_send_message_completion(t,r,n){n==0?t():r(nm.error_code_to_string(n))}static _s_on_stream_ended(t){process.nextTick(()=>{t.emit(e.ENDED,{})})}static _s_on_stream_message(t,r){process.nextTick(()=>{t.emit(e.MESSAGE,{message:iR(r)})})}};Z.ClientStream=hs;hs.ENDED="ended";hs.MESSAGE="message"});var dv=c(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.CommonHttpProxyOptions=Cr.HttpProxyAuthenticationType=Cr.HttpVersion=void 0;var LG;(function(e){e[e.Unknown=0]="Unknown",e[e.Http1_0=1]="Http1_0",e[e.Http1_1=2]="Http1_1",e[e.Http2=3]="Http2"})(LG=Cr.HttpVersion||(Cr.HttpVersion={}));var sR;(function(e){e[e.None=0]="None",e[e.Basic=1]="Basic"})(sR=Cr.HttpProxyAuthenticationType||(Cr.HttpProxyAuthenticationType={}));var uv=class{constructor(t,r,n=sR.None,i,o){this.host_name=t,this.port=r,this.auth_method=n,this.auth_username=i,this.auth_password=o}};Cr.CommonHttpProxyOptions=uv});var cm=c(te=>{"use strict";var UG=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.HttpClientConnectionManager=te.HttpClientStream=te.HttpStream=te.HttpClientConnection=te.HttpProxyOptions=te.HttpProxyConnectionType=te.HttpConnection=te.HttpRequest=te.HttpHeaders=te.HttpProxyAuthenticationType=void 0;var jt=UG(Qt()),mv=zi(),Hi=Kt(),aR=dv(),jG=dv();Object.defineProperty(te,"HttpProxyAuthenticationType",{enumerable:!0,get:function(){return jG.HttpProxyAuthenticationType}});var cR=Fc();te.HttpHeaders=jt.default.HttpHeaders;var BG=jt.default.HttpRequest,lv=class extends BG{constructor(t,r,n,i){super(t,r,n,i?.native_handle())}};te.HttpRequest=lv;var Gi=class extends(0,mv.NativeResourceMixin)(cR.BufferedEventEmitter){constructor(t){super(),this._super(t)}close(){jt.default.http_connection_close(this.native_handle())}on(t,r){return super.on(t,r),t=="connect"&&process.nextTick(()=>{this.uncork()}),this}};te.HttpConnection=Gi;Gi.CONNECT="connect";Gi.ERROR="error";Gi.CLOSE="close";var uR;(function(e){e[e.Legacy=0]="Legacy",e[e.Forwarding=1]="Forwarding",e[e.Tunneling=2]="Tunneling"})(uR=te.HttpProxyConnectionType||(te.HttpProxyConnectionType={}));var pv=class extends aR.CommonHttpProxyOptions{constructor(t,r,n=aR.HttpProxyAuthenticationType.None,i,o,s,a){super(t,r,n,i,o),this.tls_opts=s,this.connection_type=a}create_native_handle(){return jt.default.http_proxy_options_new(this.host_name,this.port,this.auth_method,this.auth_username,this.auth_password,this.tls_opts?this.tls_opts.native_handle():void 0,this.connection_type?this.connection_type:uR.Legacy)}};te.HttpProxyOptions=pv;var sm=class extends Gi{constructor(t,r,n,i,o,s,a){if(i==null||i==null)throw new Hi.CrtError("HttpClientConnection constructor: socket_options not defined");super(a||jt.default.http_connection_new(t!=null?t.native_handle():null,(u,l)=>{this._on_setup(u,l)},(u,l)=>{this._on_shutdown(u,l)},r,n,i.native_handle(),o?o.native_handle():void 0,s?s.create_native_handle():void 0)),this.bootstrap=t,this.socket_options=i,this.tls_opts=o}_on_setup(t,r){if(r){this.emit("error",new Hi.CrtError(r));return}this.emit("connect")}_on_shutdown(t,r){if(r){this.emit("error",new Hi.CrtError(r));return}this.emit("close")}request(t){let r,n=(a,u)=>{r._on_response(a,u)},i=a=>{r._on_body(a)},o=a=>{r._on_complete(a)},s=jt.default.http_stream_new(this.native_handle(),t,o,n,i);return r=new sn(s,this,t)}};te.HttpClientConnection=sm;var am=class extends(0,mv.NativeResourceMixin)(cR.BufferedEventEmitter){constructor(t,r){super(),this.connection=r,this._super(t),this.cork()}activate(){jt.default.http_stream_activate(this.native_handle())}close(){jt.default.http_stream_close(this.native_handle())}_on_body(t){this.emit("data",t)}_on_complete(t){if(t){this.emit("error",new Hi.CrtError(t)),this.close();return}this.on("end",()=>{this.close()}),this.emit("end")}};te.HttpStream=am;var sn=class extends am{constructor(t,r,n){super(t,r),this.request=n}status_code(){return this.response_status_code}on(t,r){return super.on(t,r),t=="response"&&process.nextTick(()=>{this.uncork()}),this}_on_response(t,r){this.response_status_code=t;let n=new te.HttpHeaders(r);this.emit("response",t,n)}};te.HttpClientStream=sn;sn.RESPONSE="response";sn.DATA="data";sn.ERROR="error";sn.END="end";sn.HEADERS="headers";var fv=class extends mv.NativeResource{constructor(t,r,n,i,o,s,a,u){if(s==null||s==null)throw new Hi.CrtError("HttpClientConnectionManager constructor: socket_options not defined");super(jt.default.http_connection_manager_new(t!=null?t.native_handle():null,r,n,i,o,s.native_handle(),a?a.native_handle():void 0,u?u.create_native_handle():void 0,void 0)),this.bootstrap=t,this.host=r,this.port=n,this.max_connections=i,this.initial_window_size=o,this.socket_options=s,this.tls_opts=a,this.proxy_options=u,this.connections=new Map}acquire(){return new Promise((t,r)=>{let n=(i,o)=>{if(o){r(new Hi.CrtError(o));return}let s=this.connections.get(i);s||(s=new sm(this.bootstrap,this.host,this.port,this.socket_options,this.tls_opts,this.proxy_options,i),this.connections.set(i,s),s.on("close",()=>{this.connections.delete(i)})),t(s)};jt.default.http_connection_manager_acquire(this.native_handle(),n)})}release(t){if(t==null||t==null)throw new Hi.CrtError("HttpClientConnectionManager release: connection not defined");jt.default.http_connection_manager_release(this.native_handle(),t.native_handle())}close(){jt.default.http_connection_manager_close(this.native_handle())}};te.HttpClientConnectionManager=fv});var um=c(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DEFAULT_RECONNECT_MIN_SEC=Xt.DEFAULT_RECONNECT_MAX_SEC=Xt.MqttWill=Xt.QoS=void 0;var WG;(function(e){e[e.AtMostOnce=0]="AtMostOnce",e[e.AtLeastOnce=1]="AtLeastOnce",e[e.ExactlyOnce=2]="ExactlyOnce"})(WG=Xt.QoS||(Xt.QoS={}));var hv=class{constructor(t,r,n,i=!1){this.topic=t,this.qos=r,this.payload=n,this.retain=i}};Xt.MqttWill=hv;Xt.DEFAULT_RECONNECT_MAX_SEC=128;Xt.DEFAULT_RECONNECT_MIN_SEC=1});var yv=c(ke=>{"use strict";var VG=ke&&ke.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$G=ke&&ke.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zG=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&VG(t,e,r);return $G(t,e),t};Object.defineProperty(ke,"__esModule",{value:!0});ke.extractRegionFromEndpoint=ke.buildMqtt5FinalUsername=ke.populate_username_string_with_custom_authorizer=ke.is_string_and_not_empty=ke.add_to_username_parameter=void 0;var HG=zG(Yf());function dm(e,t,r){let n=e;return n.indexOf("?")!=-1?n+="&":n+="?",t.indexOf(r)!=-1?n+t:n+r+t}ke.add_to_username_parameter=dm;function Or(e){return e!=null&&typeof e=="string"&&e!=""}ke.is_string_and_not_empty=Or;function GG(e,t,r,n,i,o,s){let a="";if(e&&(a+=e),Or(t)==!1?Or(i)&&i&&(a+=i):a+=t,Or(r)&&r&&(a=dm(a,r,"x-amz-customauthorizer-name=")),Or(n)&&n&&(a=dm(a,n,"x-amz-customauthorizer-signature="),(Or(o)&&o||Or(s)&&s)&&console.log("Warning: Signed custom authorizers with signature will not work without a token key name and token value. Your connection may be rejected/stalled on the IoT Core side due to this. Please set the token key name and token value to connect to a signed custom authorizer.")),Or(n)||Or(s)||Or(o)){if(!s||!o)throw new Error("Token-based custom authentication requires all token-related properties to be set");a=dm(a,s,o+"=")}return a}ke.populate_username_string_with_custom_authorizer=GG;function _v(e,t,r){t&&r.push([e,t])}function QG(e){let t="",r=[];if(e){let n=!1;if((e.tokenValue||e.tokenKeyName||e.tokenSignature)&&(n=!0,!e.tokenValue||!e.tokenKeyName||!e.tokenSignature))throw new Error("Token-based custom authentication requires all token-related properties to be set");let i=e.username,o=(i??"").split("?"),s=o.slice(1);if(t=o[0],s.length>1)throw new Error("Custom auth username property value is invalid");s.length==1&&s[0].split("&").forEach((a,u,l)=>{var p;let f=a.split("=");r.push([f[0],(p=f[1])!==null&&p!==void 0?p:""])}),_v("x-amz-customauthorizer-name",e.authorizerName,r),n&&(_v(e.tokenKeyName,e.tokenValue,r),_v("x-amz-customauthorizer-signature",e.tokenSignature,r))}return r.push(["SDK","NodeJSv2"]),r.push(["Version",HG.crt_version()]),(t??"")+"?"+r.map(n=>`${n[0]}=${n[1]}`).join("&")}ke.buildMqtt5FinalUsername=QG;function KG(e){let t=/^[\w\-]+\.[\w\-]+\.([\w+\-]+)\./,r=e.match(t);if(r)return r[1];throw new Error("AWS region could not be extracted from endpoint.  Use 'region' property on WebsocketConfig to set manually.")}ke.extractRegionFromEndpoint=KG});var pR=c(Bt=>{"use strict";var JG=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),YG=Bt&&Bt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),vv=Bt&&Bt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&JG(t,e,r);return YG(t,e),t},XG=Bt&&Bt.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.AwsIotMqttConnectionConfigBuilder=void 0;var dR=um(),ri=vv(on()),_s=on(),ZG=vv(Yf()),lR=Kt(),Uc=em(),gv=vv(yv()),Ev=class e{constructor(t){this.tls_ctx_options=t,this.params={client_id:"",host_name:"",socket_options:new ri.SocketOptions,port:8883,use_websocket:!1,clean_session:!1,keep_alive:void 0,will:void 0,username:"",password:void 0,tls_ctx:void 0,reconnect_min_sec:dR.DEFAULT_RECONNECT_MIN_SEC,reconnect_max_sec:dR.DEFAULT_RECONNECT_MAX_SEC},this.is_using_custom_authorizer=!1}static new_mtls_builder_from_path(t,r){let n=new e(_s.TlsContextOptions.create_client_with_mtls_from_path(t,r));return n.params.port=8883,ri.is_alpn_available()&&n.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),n}static new_mtls_builder(t,r){let n=new e(_s.TlsContextOptions.create_client_with_mtls(t,r));return n.params.port=8883,ri.is_alpn_available()&&n.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),n}static new_mtls_pkcs11_builder(t){let r=new e(_s.TlsContextOptions.create_client_with_mtls_pkcs11(t));return r.params.port=8883,ri.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_pkcs12_builder(t){let r=new e(_s.TlsContextOptions.create_client_with_mtls_pkcs12_from_path(t.pkcs12_file,t.pkcs12_password));return r.params.port=8883,ri.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_windows_cert_store_path_builder(t){let r=new e(_s.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(t));return r.params.port=8883,ri.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_default_builder(){let t=new ri.TlsContextOptions;return new e(t)}static new_websocket_builder(...t){return this.new_with_websockets(...t)}static configure_websocket_handshake(t,r){if(r){if(t==null||t==null)throw new lR.CrtError("AwsIotMqttConnectionConfigBuilder configure_websocket_handshake: builder not defined");t.params.websocket_handshake_transform=(n,i)=>XG(this,void 0,void 0,function*(){var o,s,a;let u=(s=(o=r.create_signing_config)===null||o===void 0?void 0:o.call(r))!==null&&s!==void 0?s:{algorithm:Uc.AwsSigningAlgorithm.SigV4,signature_type:Uc.AwsSignatureType.HttpRequestViaQueryParams,provider:r.credentials_provider,region:r.region,service:(a=r.service)!==null&&a!==void 0?a:"iotdevicegateway",signed_body_value:Uc.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};try{yield(0,Uc.aws_sign_request)(n,u),i()}catch(l){l instanceof lR.CrtError?i(l.error_code):i(3)}})}return t}static new_with_websockets(t){let r=t?.tls_ctx_options;r||(r=new _s.TlsContextOptions,r.alpn_list=[]);let n=new e(r);return n.params.use_websocket=!0,n.params.proxy_options=t?.proxy_options,n.tls_ctx_options&&(n.params.port=443),this.configure_websocket_handshake(n,t),n}static new_builder_for_websocket(){return this.new_with_websockets()}with_certificate_authority_from_path(t,r){return this.tls_ctx_options.override_default_trust_store_from_path(t,r),this}with_certificate_authority(t){return this.tls_ctx_options.override_default_trust_store(t),this}with_endpoint(t){return this.params.host_name=t,this}with_port(t){return this.params.port=t,this}with_client_id(t){return this.params.client_id=t,this}with_clean_session(t){return this.params.clean_session=t,this}with_keep_alive_seconds(t){return this.params.keep_alive=t,this}with_timeout_ms(t){return this.with_ping_timeout_ms(t),this}with_ping_timeout_ms(t){return this.params.ping_timeout=t,this}with_protocol_operation_timeout_ms(t){return this.params.protocol_operation_timeout=t,this}with_will(t){return this.params.will=t,this}with_socket_options(t){return this.params.socket_options=t,this}with_credentials(t,r,n,i){return e.configure_websocket_handshake(this,{credentials_provider:Uc.AwsCredentialsProvider.newStatic(r,n,i),region:t,service:"iotdevicegateway"})}with_http_proxy_options(t){return this.params.proxy_options=t,this}with_custom_authorizer(t,r,n,i,o,s){this.is_using_custom_authorizer=!0;let a=gv.populate_username_string_with_custom_authorizer("",t,r,n,this.params.username,o,s);return this.params.username=a,this.params.password=i,this.params.use_websocket||(this.tls_ctx_options.alpn_list=["mqtt"]),this.params.port=443,this}with_username(t){return this.params.username=t,this}with_password(t){return this.params.password=t,this}with_reconnect_max_sec(t){return this.params.reconnect_max_sec=t,this}with_reconnect_min_sec(t){return this.params.reconnect_min_sec=t,this}build(){var t,r,n;if(this.params.client_id===void 0||this.params.host_name===void 0)throw"client_id and endpoint are required";return this.is_using_custom_authorizer==!1&&gv.is_string_and_not_empty(this.params.username)&&(((t=this.params.username)===null||t===void 0?void 0:t.indexOf("x-amz-customauthorizer-name="))!=-1||((r=this.params.username)===null||r===void 0?void 0:r.indexOf("x-amz-customauthorizer-signature="))!=-1)&&(this.is_using_custom_authorizer=!0),this.is_using_custom_authorizer==!0&&this.params.port!=443&&console.log("Warning: Attempting to connect to authorizer with unsupported port. Port is not 443..."),this.params.tls_ctx===void 0&&(this.params.tls_ctx=new ri.ClientTlsContext(this.tls_ctx_options)),gv.is_string_and_not_empty(this.params.username)==!1?this.params.username="?SDK=NodeJSv2&Version=":((n=this.params.username)===null||n===void 0?void 0:n.indexOf("?"))!=-1?this.params.username+="&SDK=NodeJSv2&Version=":this.params.username+="?SDK=NodeJSv2&Version=",this.params.username+=ZG.crt_version(),this.params}};Bt.AwsIotMqttConnectionConfigBuilder=Ev});var lm=c(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.DEFAULT_KEEP_ALIVE=ys.normalize_payload=void 0;function e4(e){if(e instanceof Buffer||typeof e=="string")return e;if(ArrayBuffer.isView(e)){let t=e;return Buffer.from(t.buffer,t.byteOffset,t.byteLength)}if(e instanceof ArrayBuffer)return Buffer.from(e);if(typeof e=="object")return JSON.stringify(e);if(!e)return"";throw new TypeError("payload parameter must be a string, object, or DataView.")}ys.normalize_payload=e4;ys.DEFAULT_KEEP_ALIVE=1200});var fR=c(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.RetryJitterType=ni.ClientSessionBehavior=void 0;var t4;(function(e){e[e.Default=0]="Default",e[e.Clean=1]="Clean",e[e.RejoinPostSuccess=2]="RejoinPostSuccess",e[e.RejoinAlways=3]="RejoinAlways"})(t4=ni.ClientSessionBehavior||(ni.ClientSessionBehavior={}));var r4;(function(e){e[e.Default=0]="Default",e[e.None=1]="None",e[e.Full=2]="Full",e[e.Decorrelated=3]="Decorrelated"})(r4=ni.RetryJitterType||(ni.RetryJitterType={}))});var mR=c(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.PacketType=F.RetainHandlingType=F.QoS=F.PayloadFormatIndicator=F.isSuccessfulPubackReasonCode=F.PubackReasonCode=F.isSuccessfulUnsubackReasonCode=F.UnsubackReasonCode=F.isSuccessfulSubackReasonCode=F.SubackReasonCode=F.isSuccessfulDisconnectReasonCode=F.DisconnectReasonCode=F.isSuccessfulConnectReasonCode=F.ConnectReasonCode=void 0;var n4;(function(e){e[e.Success=0]="Success",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.MalformedPacket=129]="MalformedPacket",e[e.ProtocolError=130]="ProtocolError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.UnsupportedProtocolVersion=132]="UnsupportedProtocolVersion",e[e.ClientIdentifierNotValid=133]="ClientIdentifierNotValid",e[e.BadUsernameOrPassword=134]="BadUsernameOrPassword",e[e.NotAuthorized=135]="NotAuthorized",e[e.ServerUnavailable=136]="ServerUnavailable",e[e.ServerBusy=137]="ServerBusy",e[e.Banned=138]="Banned",e[e.BadAuthenticationMethod=140]="BadAuthenticationMethod",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.PacketTooLarge=149]="PacketTooLarge",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid",e[e.RetainNotSupported=154]="RetainNotSupported",e[e.QosNotSupported=155]="QosNotSupported",e[e.UseAnotherServer=156]="UseAnotherServer",e[e.ServerMoved=157]="ServerMoved",e[e.ConnectionRateExceeded=159]="ConnectionRateExceeded"})(n4=F.ConnectReasonCode||(F.ConnectReasonCode={}));function i4(e){return e<128}F.isSuccessfulConnectReasonCode=i4;var o4;(function(e){e[e.NormalDisconnection=0]="NormalDisconnection",e[e.DisconnectWithWillMessage=4]="DisconnectWithWillMessage",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.MalformedPacket=129]="MalformedPacket",e[e.ProtocolError=130]="ProtocolError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.ServerBusy=137]="ServerBusy",e[e.ServerShuttingDown=139]="ServerShuttingDown",e[e.KeepAliveTimeout=141]="KeepAliveTimeout",e[e.SessionTakenOver=142]="SessionTakenOver",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.ReceiveMaximumExceeded=147]="ReceiveMaximumExceeded",e[e.TopicAliasInvalid=148]="TopicAliasInvalid",e[e.PacketTooLarge=149]="PacketTooLarge",e[e.MessageRateTooHigh=150]="MessageRateTooHigh",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.AdministrativeAction=152]="AdministrativeAction",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid",e[e.RetainNotSupported=154]="RetainNotSupported",e[e.QosNotSupported=155]="QosNotSupported",e[e.UseAnotherServer=156]="UseAnotherServer",e[e.ServerMoved=157]="ServerMoved",e[e.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",e[e.ConnectionRateExceeded=159]="ConnectionRateExceeded",e[e.MaximumConnectTime=160]="MaximumConnectTime",e[e.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",e[e.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(o4=F.DisconnectReasonCode||(F.DisconnectReasonCode={}));function s4(e){return e<128}F.isSuccessfulDisconnectReasonCode=s4;var a4;(function(e){e[e.GrantedQoS0=0]="GrantedQoS0",e[e.GrantedQoS1=1]="GrantedQoS1",e[e.GrantedQoS2=2]="GrantedQoS2",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",e[e.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",e[e.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(a4=F.SubackReasonCode||(F.SubackReasonCode={}));function c4(e){return e<128}F.isSuccessfulSubackReasonCode=c4;var u4;(function(e){e[e.Success=0]="Success",e[e.NoSubscriptionExisted=17]="NoSubscriptionExisted",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse"})(u4=F.UnsubackReasonCode||(F.UnsubackReasonCode={}));function d4(e){return e<128}F.isSuccessfulUnsubackReasonCode=d4;var l4;(function(e){e[e.Success=0]="Success",e[e.NoMatchingSubscribers=16]="NoMatchingSubscribers",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid"})(l4=F.PubackReasonCode||(F.PubackReasonCode={}));function p4(e){return e<128}F.isSuccessfulPubackReasonCode=p4;var f4;(function(e){e[e.Bytes=0]="Bytes",e[e.Utf8=1]="Utf8"})(f4=F.PayloadFormatIndicator||(F.PayloadFormatIndicator={}));var m4;(function(e){e[e.AtMostOnce=0]="AtMostOnce",e[e.AtLeastOnce=1]="AtLeastOnce",e[e.ExactlyOnce=2]="ExactlyOnce"})(m4=F.QoS||(F.QoS={}));var h4;(function(e){e[e.SendOnSubscribe=0]="SendOnSubscribe",e[e.SendOnSubscribeIfNew=1]="SendOnSubscribeIfNew",e[e.DontSend=2]="DontSend"})(h4=F.RetainHandlingType||(F.RetainHandlingType={}));var _4;(function(e){e[e.Connect=1]="Connect",e[e.Connack=2]="Connack",e[e.Publish=3]="Publish",e[e.Puback=4]="Puback",e[e.Pubrec=5]="Pubrec",e[e.Pubrel=6]="Pubrel",e[e.Pubcomp=7]="Pubcomp",e[e.Subscribe=8]="Subscribe",e[e.Suback=9]="Suback",e[e.Unsubscribe=10]="Unsubscribe",e[e.Unsuback=11]="Unsuback",e[e.Pingreq=12]="Pingreq",e[e.Pingresp=13]="Pingresp",e[e.Disconnect=14]="Disconnect",e[e.Auth=15]="Auth"})(_4=F.PacketType||(F.PacketType={}))});var bv=c(re=>{"use strict";var _R=re&&re.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),y4=re&&re.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yR=re&&re.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&_R(t,e,r);return y4(t,e),t},gR=re&&re.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_R(t,e,r)},wv=re&&re.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},g4=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0});re.Mqtt5Client=re.ClientExtendedValidationAndFlowControl=re.ClientOperationQueueBehavior=re.HttpProxyOptions=void 0;var ii=g4(Qt()),E4=zi(),v4=Fc(),Sv=yR(on()),w4=yR(lm()),hR=Kt(),S4=cm();Object.defineProperty(re,"HttpProxyOptions",{enumerable:!0,get:function(){return S4.HttpProxyOptions}});gR(fR(),re);gR(mR(),re);var b4;(function(e){e[e.Default=0]="Default",e[e.FailNonQos1PublishOnDisconnect=1]="FailNonQos1PublishOnDisconnect",e[e.FailQos0PublishOnDisconnect=2]="FailQos0PublishOnDisconnect",e[e.FailAllOnDisconnect=3]="FailAllOnDisconnect"})(b4=re.ClientOperationQueueBehavior||(re.ClientOperationQueueBehavior={}));var N4;(function(e){e[e.None=0]="None",e[e.AwsIotCoreDefaults=1]="AwsIotCoreDefaults"})(N4=re.ClientExtendedValidationAndFlowControl||(re.ClientExtendedValidationAndFlowControl={}));var Ar=class e extends(0,E4.NativeResourceMixin)(v4.BufferedEventEmitter){constructor(t){super(),this._super(ii.default.mqtt5_client_new(this,t,r=>{e._s_on_stopped(r)},r=>{e._s_on_attempting_connect(r)},(r,n,i)=>{e._s_on_connection_success(r,n,i)},(r,n,i)=>{e._s_on_connection_failure(r,new hR.CrtError(n),i)},(r,n,i)=>{e._s_on_disconnection(r,new hR.CrtError(n),i)},(r,n)=>{e._s_on_message_received(r,n)},t.clientBootstrap?t.clientBootstrap.native_handle():null,t.socketOptions?t.socketOptions.native_handle():null,t.tlsCtx?t.tlsCtx.native_handle():null,t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null))}close(){ii.default.mqtt5_client_close(this.native_handle())}start(){ii.default.mqtt5_client_start(this.native_handle())}stop(t){ii.default.mqtt5_client_stop(this.native_handle(),t)}subscribe(t){return wv(this,void 0,void 0,function*(){return new Promise((r,n)=>{function i(o,s,a){return e._s_on_suback_callback(r,n,o,s,a)}try{ii.default.mqtt5_client_subscribe(this.native_handle(),t,i)}catch(o){n(o)}})})}unsubscribe(t){return wv(this,void 0,void 0,function*(){return new Promise((r,n)=>{function i(o,s,a){return e._s_on_unsuback_callback(r,n,o,s,a)}try{ii.default.mqtt5_client_unsubscribe(this.native_handle(),t,i)}catch(o){n(o)}})})}publish(t){return wv(this,void 0,void 0,function*(){return new Promise((r,n)=>{t&&t.payload&&(t.payload=w4.normalize_payload(t.payload));function i(o,s,a){return e._s_on_puback_callback(r,n,o,s,a)}try{ii.default.mqtt5_client_publish(this.native_handle(),t,i)}catch(o){n(o)}})})}getQueueStatistics(){return ii.default.mqtt5_client_get_queue_statistics(this.native_handle())}on(t,r){return super.on(t,r),this}static _s_on_stopped(t){process.nextTick(()=>{let r={};t.emit(e.STOPPED,r)})}static _s_on_attempting_connect(t){process.nextTick(()=>{let r={};t.emit(e.ATTEMPTING_CONNECT,r)})}static _s_on_connection_success(t,r,n){let i={connack:r,settings:n};process.nextTick(()=>{t.emit(e.CONNECTION_SUCCESS,i)})}static _s_on_connection_failure(t,r,n){let i={error:r};n!=null&&(i.connack=n),process.nextTick(()=>{t.emit(e.CONNECTION_FAILURE,i)})}static _s_on_disconnection(t,r,n){let i={error:r};n!=null&&(i.disconnect=n),process.nextTick(()=>{t.emit(e.DISCONNECTION,i)})}static _s_on_suback_callback(t,r,n,i,o){i==0&&o!==void 0?t(o):r(Sv.error_code_to_string(i))}static _s_on_unsuback_callback(t,r,n,i,o){i==0&&o!==void 0?t(o):r(Sv.error_code_to_string(i))}static _s_on_puback_callback(t,r,n,i,o){i==0?t(o):r(Sv.error_code_to_string(i))}static _s_on_message_received(t,r){let n={message:r};process.nextTick(()=>{t.emit(e.MESSAGE_RECEIVED,n)})}};re.Mqtt5Client=Ar;Ar.ERROR="error";Ar.MESSAGE_RECEIVED="messageReceived";Ar.ATTEMPTING_CONNECT="attemptingConnect";Ar.CONNECTION_SUCCESS="connectionSuccess";Ar.CONNECTION_FAILURE="connectionFailure";Ar.DISCONNECTION="disconnection";Ar.STOPPED="stopped"});var wR=c(Wt=>{"use strict";var x4=Wt&&Wt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),C4=Wt&&Wt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wc=Wt&&Wt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&x4(t,e,r);return C4(t,e),t},ER=Wt&&Wt.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.AwsIotMqtt5ClientConfigBuilder=void 0;var O4=Wc(bv()),ft=Wc(on()),jc=Wc(em()),A4=Kt(),vR=Wc(yv()),P4=Wc(lm()),Bc=class e{constructor(t,r,n){this.tlsContextOptions=n,this.config={hostName:t,port:r,connectProperties:{keepAliveIntervalSeconds:P4.DEFAULT_KEEP_ALIVE},extendedValidationAndFlowControlOptions:O4.ClientExtendedValidationAndFlowControl.AwsIotCoreDefaults}}static newDirectMqttBuilderWithMtlsFromPath(t,r,n){let i=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ft.TlsContextOptions.create_client_with_mtls_from_path(r,n));return ft.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromMemory(t,r,n){let i=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ft.TlsContextOptions.create_client_with_mtls(r,n));return ft.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromPkcs11(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ft.TlsContextOptions.create_client_with_mtls_pkcs11(r));return ft.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithMtlsFromPkcs12(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ft.TlsContextOptions.create_client_with_mtls_pkcs12_from_path(r.pkcs12_file,r.pkcs12_password));return ft.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithMtlsFromWindowsCertStorePath(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ft.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(r));return ft.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithCustomAuth(t,r){let n=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,new ft.TlsContextOptions);return n.customAuthConfig=r,n.tlsContextOptions.alpn_list=["mqtt"],n}static newWebsocketMqttBuilderWithSigv4Auth(t,r){let n=new ft.TlsContextOptions;n.alpn_list=[];let i=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,n),o=r?.credentialsProvider;return o||(o=jc.AwsCredentialsProvider.newDefault()),i.config.websocketHandshakeTransform=(s,a)=>ER(this,void 0,void 0,function*(){var u;try{let l={algorithm:jc.AwsSigningAlgorithm.SigV4,signature_type:jc.AwsSignatureType.HttpRequestViaQueryParams,provider:o,region:(u=r?.region)!==null&&u!==void 0?u:vR.extractRegionFromEndpoint(t),service:"iotdevicegateway",signed_body_value:jc.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};yield jc.aws_sign_request(s,l),a()}catch(l){l instanceof A4.CrtError?a(l.error_code):a(3)}}),i}static newWebsocketMqttBuilderWithCustomAuth(t,r){let n=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,new ft.TlsContextOptions);return n.customAuthConfig=r,n.config.websocketHandshakeTransform=(i,o)=>ER(this,void 0,void 0,function*(){o(0)}),n}withCertificateAuthorityFromPath(t,r){return this.tlsContextOptions.override_default_trust_store_from_path(t,r),this}withCertificateAuthority(t){return this.tlsContextOptions.override_default_trust_store(t),this}withPort(t){return this.config.port=t,this}withConnectProperties(t){return this.config.connectProperties=t,this}withSessionBehavior(t){return this.config.sessionBehavior=t,this}withRetryJitterMode(t){return this.config.retryJitterMode=t,this}withMinReconnectDelayMs(t){return this.config.minReconnectDelayMs=t,this}withMaxReconnectDelayMs(t){return this.config.maxReconnectDelayMs=t,this}withMinConnectedTimeToResetReconnectDelayMs(t){return this.config.minConnectedTimeToResetReconnectDelayMs=t,this}withConnackTimeoutMs(t){return this.config.connackTimeoutMs=t,this}withOfflineQueueBehavior(t){return this.config.offlineQueueBehavior=t,this}withPingTimeoutMs(t){return this.config.pingTimeoutMs=t,this}withAckTimeoutSeconds(t){return this.config.ackTimeoutSeconds=t,this}withSocketOptions(t){return this.config.socketOptions=t,this}withHttpProxyOptions(t){return this.config.httpProxyOptions=t,this}withExtendedValidationAndFlowControlOptions(t){return this.config.extendedValidationAndFlowControlOptions=t,this}build(){var t,r;return this.config.tlsCtx===void 0&&(this.config.tlsCtx=new ft.ClientTlsContext(this.tlsContextOptions)),this.config.connectProperties&&(this.config.connectProperties.username=vR.buildMqtt5FinalUsername(this.customAuthConfig),!((t=this.customAuthConfig)===null||t===void 0)&&t.password&&(this.config.connectProperties.password=(r=this.customAuthConfig)===null||r===void 0?void 0:r.password)),this.config}};Wt.AwsIotMqtt5ClientConfigBuilder=Bc;Bc.DEFAULT_WEBSOCKET_MQTT_PORT=443;Bc.DEFAULT_DIRECT_MQTT_PORT=8883});var bR=c(oi=>{"use strict";var T4=oi&&oi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),SR=oi&&oi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&T4(t,e,r)};Object.defineProperty(oi,"__esModule",{value:!0});SR(pR(),oi);SR(wR(),oi)});var PR=c(be=>{"use strict";var I4=be&&be.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),R4=be&&be.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),CR=be&&be.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&I4(t,e,r);return R4(t,e),t},gs=be&&be.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{l(n.next(p))}catch(f){s(f)}}function u(p){try{l(n.throw(p))}catch(f){s(f)}}function l(p){p.done?o(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},q4=be&&be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(be,"__esModule",{value:!0});be.MqttClientConnection=be.MqttClient=be.MqttWill=be.QoS=be.HttpProxyOptions=void 0;var Vt=q4(Qt()),OR=zi(),M4=Fc(),NR=CR(lm()),si=Kt(),pm=CR(on()),D4=cm();Object.defineProperty(be,"HttpProxyOptions",{enumerable:!0,get:function(){return D4.HttpProxyOptions}});var xR=um(),AR=um();Object.defineProperty(be,"QoS",{enumerable:!0,get:function(){return AR.QoS}});Object.defineProperty(be,"MqttWill",{enumerable:!0,get:function(){return AR.MqttWill}});var Nv=class extends OR.NativeResource{constructor(t=void 0){super(Vt.default.mqtt_client_new(t!=null?t.native_handle():null)),this.bootstrap=t}new_connection(t){return new xt(this,t)}};be.MqttClient=Nv;var xt=class extends(0,OR.NativeResourceMixin)(M4.BufferedEventEmitter){constructor(t,r){if(super(),this.client=t,this.config=r,r==null||r==null)throw new si.CrtError("MqttClientConnection constructor: config not defined");let n=r.will?{topic:r.will.topic,qos:r.will.qos,payload:NR.normalize_payload(r.will.payload),retain:r.will.retain}:void 0;var i=xR.DEFAULT_RECONNECT_MIN_SEC,o=xR.DEFAULT_RECONNECT_MAX_SEC;if(r.reconnect_min_sec&&(i=r.reconnect_min_sec,o=Math.max(i,o)),r.reconnect_max_sec&&(o=r.reconnect_max_sec,i=Math.min(i,o)),t==null||t==null)throw new si.CrtError("MqttClientConnection constructor: client not defined");if(r.socket_options==null||r.socket_options==null)throw new si.CrtError("MqttClientConnection constructor: socket_options in configuration not defined");this._super(Vt.default.mqtt_client_connection_new(t.native_handle(),s=>{this._on_connection_interrupted(s)},(s,a)=>{this._on_connection_resumed(s,a)},r.tls_ctx?r.tls_ctx.native_handle():null,n,r.username,r.password,r.use_websocket,r.proxy_options?r.proxy_options.create_native_handle():void 0,r.websocket_handshake_transform,i,o)),this.tls_ctx=r.tls_ctx,Vt.default.mqtt_client_connection_on_message(this.native_handle(),this._on_any_publish.bind(this)),Vt.default.mqtt_client_connection_on_closed(this.native_handle(),this._on_connection_closed.bind(this)),this.on("error",s=>{})}close(){Vt.default.mqtt_client_connection_close(this.native_handle())}on(t,r){return super.on(t,r),t=="connect"&&process.nextTick(()=>{this.uncork()}),this}connect(){return gs(this,void 0,void 0,function*(){return new Promise((t,r)=>{if(r=this._reject(r),this.config.socket_options==null||this.config.socket_options==null)throw new si.CrtError("MqttClientConnection connect: socket_options in configuration not defined");try{Vt.default.mqtt_client_connection_connect(this.native_handle(),this.config.client_id,this.config.host_name,this.config.port,this.config.socket_options.native_handle(),this.config.keep_alive,this.config.ping_timeout,this.config.protocol_operation_timeout,this.config.clean_session,this._on_connect_callback.bind(this,t,r))}catch(n){r(n)}})})}reconnect(){return gs(this,void 0,void 0,function*(){return new Promise((t,r)=>{r=this._reject(r);try{Vt.default.mqtt_client_connection_reconnect(this.native_handle(),this._on_connect_callback.bind(this,t,r))}catch(n){r(n)}})})}publish(t,r,n,i=!1){return gs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):typeof n!="number"?Promise.reject("qos is not a number"):typeof i!="boolean"?Promise.reject("retain is not a boolean"):new Promise((o,s)=>{s=this._reject(s);try{Vt.default.mqtt_client_connection_publish(this.native_handle(),t,NR.normalize_payload(r),n,i,this._on_puback_callback.bind(this,o,s))}catch(a){s(a)}})})}subscribe(t,r,n){return gs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):typeof r!="number"?Promise.reject("qos is not a number"):new Promise((i,o)=>{o=this._reject(o);try{Vt.default.mqtt_client_connection_subscribe(this.native_handle(),t,r,n,this._on_suback_callback.bind(this,i,o))}catch(s){o(s)}})})}unsubscribe(t){return gs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):new Promise((r,n)=>{n=this._reject(n);try{Vt.default.mqtt_client_connection_unsubscribe(this.native_handle(),t,this._on_unsuback_callback.bind(this,r,n))}catch(i){n(i)}})})}disconnect(){return gs(this,void 0,void 0,function*(){return new Promise((t,r)=>{r=this._reject(r);try{Vt.default.mqtt_client_connection_disconnect(this.native_handle(),this._on_disconnect_callback.bind(this,t))}catch(n){r(n)}})})}getQueueStatistics(){return Vt.default.mqtt_client_connection_get_queue_statistics(this.native_handle())}_reject(t){return r=>{t(r),process.nextTick(()=>{this.emit("error",new si.CrtError(r))})}}_on_connection_interrupted(t){this.emit("interrupt",new si.CrtError(t))}_on_connection_resumed(t,r){this.emit("resume",t,r);let n={session_present:r,reason_code:t};this.emit("connection_success",n)}_on_any_publish(t,r,n,i,o){this.emit("message",t,r,n,i,o)}_on_connection_closed(){let t={};this.emit("closed",t),this.close()}_on_connect_callback(t,r,n,i,o){if(n==0&&i==0){t(o),this.emit("connect",o);let s={session_present:o,reason_code:i};this.emit("connection_success",s)}else if(n!=0){r("Failed to connect: "+pm.error_code_to_string(n));let s={error:new si.CrtError(n)};this.emit("connection_failure",s)}else{r("Server rejected connection.");let s={error:new si.CrtError(5134)};this.emit("connection_failure",s)}}_on_puback_callback(t,r,n,i){i==0?t({packet_id:n}):r("Failed to publish: "+pm.error_code_to_string(i))}_on_suback_callback(t,r,n,i,o,s){s==0?t({packet_id:n,topic:i,qos:o,error_code:s}):r("Failed to subscribe: "+pm.error_code_to_string(s))}_on_unsuback_callback(t,r,n,i){i==0?t({packet_id:n}):r("Failed to unsubscribe: "+pm.error_code_to_string(i))}_on_disconnect_callback(t){t(),this.emit("disconnect")}};be.MqttClientConnection=xt;xt.CONNECT="connect";xt.DISCONNECT="disconnect";xt.ERROR="error";xt.INTERRUPT="interrupt";xt.RESUME="resume";xt.MESSAGE="message";xt.CONNECTION_SUCCESS="connection_success";xt.CONNECTION_FAILURE="connection_failure";xt.CLOSED="closed"});var TR=c(L=>{"use strict";var k4=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),F4=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mt=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&k4(t,e,r);return F4(t,e),t};Object.defineProperty(L,"__esModule",{value:!0});L.CrtError=L.resource_safety=L.promise=L.platform=L.mqtt5=L.mqtt=L.iot=L.io=L.http=L.eventstream=L.crt=L.crypto=L.checksums=L.cancel=L.auth=void 0;var L4=mt(DI());L.cancel=L4;var U4=mt(Yf());L.platform=U4;var j4=mt(Jf());L.promise=j4;var B4=mt(UI());L.resource_safety=B4;var W4=mt(em());L.auth=W4;var V4=mt(KI());L.checksums=V4;var $4=mt(YI());L.crt=$4;var z4=mt(ZI());L.crypto=z4;var H4=mt(oR());L.eventstream=H4;var G4=mt(cm());L.http=G4;var Q4=mt(on());L.io=Q4;var K4=mt(bR());L.iot=K4;var J4=mt(PR());L.mqtt=J4;var Y4=mt(bv());L.mqtt5=Y4;var X4=Kt();Object.defineProperty(L,"CrtError",{enumerable:!0,get:function(){return X4.CrtError}})});var RR=c((fm,IR)=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.isCrtAvailable=void 0;var Z4=()=>{try{return typeof q=="function"&&typeof IR<"u"&&TR()?["md/crt-avail"]:null}catch{return null}};fm.isCrtAvailable=Z4});var Vc=c(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.defaultUserAgent=Pr.UA_APP_ID_INI_NAME=Pr.UA_APP_ID_ENV_NAME=void 0;var e5=Xn(),qR=q("os"),xv=q("process"),t5=RR();Pr.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";Pr.UA_APP_ID_INI_NAME="sdk-ua-app-id";var r5=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,qR.platform)()}`,(0,qR.release)()],["lang/js"],["md/nodejs",`${xv.versions.node}`]],n=(0,t5.isCrtAvailable)();n&&r.push(n),e&&r.push([`api/${e}`,t]),xv.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${xv.env.AWS_EXECUTION_ENV}`]);let i=(0,e5.loadConfig)({environmentVariableSelector:s=>s[Pr.UA_APP_ID_ENV_NAME],configFileSelector:s=>s[Pr.UA_APP_ID_INI_NAME],default:void 0})(),o;return async()=>{if(!o){let s=await i;o=s?[...r,[`app/${s}`]]:[...r]}return o}};Pr.defaultUserAgent=r5});var $c=c(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.Hash=void 0;var Cv=Ai(),n5=ur(),i5=q("buffer"),MR=q("crypto"),Ov=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update((0,n5.toUint8Array)(DR(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,MR.createHmac)(this.algorithmIdentifier,DR(this.secret)):(0,MR.createHash)(this.algorithmIdentifier)}};mm.Hash=Ov;function DR(e,t){return i5.Buffer.isBuffer(e)?e:typeof e=="string"?(0,Cv.fromString)(e,t):ArrayBuffer.isView(e)?(0,Cv.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength):(0,Cv.fromArrayBuffer)(e)}});var FR=c(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.calculateBodyLength=void 0;var kR=q("fs"),o5=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,kR.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,kR.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};hm.calculateBodyLength=o5});var zc=c(Av=>{"use strict";Object.defineProperty(Av,"__esModule",{value:!0});var s5=(N(),S(b));s5.__exportStar(FR(),Av)});var KR=c(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.ruleSet=void 0;var zR="required",an="fn",cn="argv",Es="ref",Pv="PartitionResult",Tr="tree",Hc="error",Gc="endpoint",LR={[zR]:!1,type:"String"},UR={[zR]:!0,default:!1,type:"Boolean"},HR={[Es]:"Endpoint"},GR={[an]:"booleanEquals",[cn]:[{[Es]:"UseFIPS"},!0]},QR={[an]:"booleanEquals",[cn]:[{[Es]:"UseDualStack"},!0]},Ir={},jR={[an]:"booleanEquals",[cn]:[!0,{[an]:"getAttr",[cn]:[{[Es]:Pv},"supportsFIPS"]}]},BR={[an]:"booleanEquals",[cn]:[!0,{[an]:"getAttr",[cn]:[{[Es]:Pv},"supportsDualStack"]}]},WR=[HR],VR=[GR],$R=[QR],a5={version:"1.0",parameters:{Region:LR,UseDualStack:UR,UseFIPS:UR,Endpoint:LR},rules:[{conditions:[{[an]:"aws.partition",[cn]:[{[Es]:"Region"}],assign:Pv}],type:Tr,rules:[{conditions:[{[an]:"isSet",[cn]:WR},{[an]:"parseURL",[cn]:WR,assign:"url"}],type:Tr,rules:[{conditions:VR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Hc},{type:Tr,rules:[{conditions:$R,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Hc},{endpoint:{url:HR,properties:Ir,headers:Ir},type:Gc}]}]},{conditions:[GR,QR],type:Tr,rules:[{conditions:[jR,BR],type:Tr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:Gc}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Hc}]},{conditions:VR,type:Tr,rules:[{conditions:[jR],type:Tr,rules:[{type:Tr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:Gc}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Hc}]},{conditions:$R,type:Tr,rules:[{conditions:[BR],type:Tr,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:Gc}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Hc}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:Gc}]}]};_m.ruleSet=a5});var JR=c(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.defaultEndpointResolver=void 0;var c5=Vo(),u5=KR(),d5=(e,t={})=>(0,c5.resolveEndpoint)(u5.ruleSet,{endpointParams:e,logger:t.logger});ym.defaultEndpointResolver=d5});var ZR=c(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});gm.getRuntimeConfig=void 0;var l5=A(),p5=Di(),YR=Qo(),XR=ur(),f5=JR(),m5=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??YR.fromBase64,base64Encoder:e?.base64Encoder??YR.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??f5.defaultEndpointResolver,extensions:e?.extensions??[],logger:e?.logger??new l5.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??p5.parseUrl,utf8Decoder:e?.utf8Decoder??XR.fromUtf8,utf8Encoder:e?.utf8Encoder??XR.toUtf8});gm.getRuntimeConfig=m5});var eq=c(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.IMDS_REGION_PATH=ht.DEFAULTS_MODE_OPTIONS=ht.ENV_IMDS_DISABLED=ht.AWS_DEFAULT_REGION_ENV=ht.AWS_REGION_ENV=ht.AWS_EXECUTION_ENV=void 0;ht.AWS_EXECUTION_ENV="AWS_EXECUTION_ENV";ht.AWS_REGION_ENV="AWS_REGION";ht.AWS_DEFAULT_REGION_ENV="AWS_DEFAULT_REGION";ht.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";ht.DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"];ht.IMDS_REGION_PATH="/latest/meta-data/placement/region"});var tq=c(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.NODE_DEFAULTS_MODE_CONFIG_OPTIONS=void 0;var h5="AWS_DEFAULTS_MODE",_5="defaults_mode";Em.NODE_DEFAULTS_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[h5],configFileSelector:e=>e[_5],default:"legacy"}});var iq=c(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.resolveDefaultsModeConfig=void 0;var y5=pr(),rq=Vf(),nq=Xn(),g5=X(),ai=eq(),E5=tq(),v5=({region:e=(0,nq.loadConfig)(y5.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=(0,nq.loadConfig)(E5.NODE_DEFAULTS_MODE_CONFIG_OPTIONS)}={})=>(0,g5.memoize)(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return w5(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ai.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${r}`)}});vm.resolveDefaultsModeConfig=v5;var w5=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await S5();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},S5=async()=>{var e;if(process.env[ai.AWS_EXECUTION_ENV]&&(process.env[ai.AWS_REGION_ENV]||process.env[ai.AWS_DEFAULT_REGION_ENV]))return(e=process.env[ai.AWS_REGION_ENV])!==null&&e!==void 0?e:process.env[ai.AWS_DEFAULT_REGION_ENV];if(!process.env[ai.ENV_IMDS_DISABLED])try{let t=await(0,rq.getInstanceMetadataEndpoint)();return(await(0,rq.httpRequest)({...t,path:ai.IMDS_REGION_PATH})).toString()}catch{}}});var Qc=c(Tv=>{"use strict";Object.defineProperty(Tv,"__esModule",{value:!0});var b5=(N(),S(b));b5.__exportStar(iq(),Tv)});var aq=c(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.getRuntimeConfig=void 0;var N5=(N(),S(b)),x5=N5.__importDefault(qI()),C5=Vc(),wm=pr(),O5=$c(),oq=Zr(),Kc=Xn(),sq=Yo(),A5=zc(),P5=Ft(),T5=ZR(),I5=A(),R5=Qc(),q5=A(),M5=e=>{(0,q5.emitWarningIfUnsupportedVersion)(process.version);let t=(0,R5.resolveDefaultsModeConfig)(e),r=()=>t().then(I5.loadConfigsForDefaultMode),n=(0,T5.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??A5.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,C5.defaultUserAgent)({serviceId:n.serviceId,clientVersion:x5.default.version}),maxAttempts:e?.maxAttempts??(0,Kc.loadConfig)(oq.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,Kc.loadConfig)(wm.NODE_REGION_CONFIG_OPTIONS,wm.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new sq.NodeHttpHandler(r),retryMode:e?.retryMode??(0,Kc.loadConfig)({...oq.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||P5.DEFAULT_RETRY_MODE}),sha256:e?.sha256??O5.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??sq.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Kc.loadConfig)(wm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,Kc.loadConfig)(wm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Sm.getRuntimeConfig=M5});var uq=c(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.resolveRuntimeExtensions=void 0;var cq=A(),D5=e=>e,k5=(e,t)=>{let r={...D5((0,cq.getDefaultExtensionConfiguration)(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,cq.resolveDefaultRuntimeConfig)(r)}};bm.resolveRuntimeExtensions=k5});var Jc=c(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.SSOClient=vs.__Client=void 0;var dq=Ka(),F5=Ja(),L5=Ya(),lq=dc(),U5=pr(),j5=fc(),B5=ee(),pq=Zr(),fq=A();Object.defineProperty(vs,"__Client",{enumerable:!0,get:function(){return fq.Client}});var W5=RI(),V5=aq(),$5=uq(),Iv=class extends fq.Client{constructor(...[t]){let r=(0,V5.getRuntimeConfig)(t||{}),n=(0,W5.resolveClientEndpointParameters)(r),i=(0,U5.resolveRegionConfig)(n),o=(0,B5.resolveEndpointConfig)(i),s=(0,pq.resolveRetryConfig)(o),a=(0,dq.resolveHostHeaderConfig)(s),u=(0,lq.resolveUserAgentConfig)(a),l=(0,$5.resolveRuntimeExtensions)(u,t?.extensions||[]);super(l),this.config=l,this.middlewareStack.use((0,pq.getRetryPlugin)(this.config)),this.middlewareStack.use((0,j5.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,dq.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,F5.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,L5.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,lq.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};vs.SSOClient=Iv});var Nm=c(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.SSOServiceException=ws.__ServiceException=void 0;var mq=A();Object.defineProperty(ws,"__ServiceException",{enumerable:!0,get:function(){return mq.ServiceException}});var Rv=class e extends mq.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};ws.SSOServiceException=Rv});var Qi=c(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.LogoutRequestFilterSensitiveLog=ge.ListAccountsRequestFilterSensitiveLog=ge.ListAccountRolesRequestFilterSensitiveLog=ge.GetRoleCredentialsResponseFilterSensitiveLog=ge.RoleCredentialsFilterSensitiveLog=ge.GetRoleCredentialsRequestFilterSensitiveLog=ge.UnauthorizedException=ge.TooManyRequestsException=ge.ResourceNotFoundException=ge.InvalidRequestException=void 0;var Ss=A(),xm=Nm(),qv=class e extends xm.SSOServiceException{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};ge.InvalidRequestException=qv;var Mv=class e extends xm.SSOServiceException{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};ge.ResourceNotFoundException=Mv;var Dv=class e extends xm.SSOServiceException{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};ge.TooManyRequestsException=Dv;var kv=class e extends xm.SSOServiceException{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};ge.UnauthorizedException=kv;var z5=e=>({...e,...e.accessToken&&{accessToken:Ss.SENSITIVE_STRING}});ge.GetRoleCredentialsRequestFilterSensitiveLog=z5;var H5=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Ss.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:Ss.SENSITIVE_STRING}});ge.RoleCredentialsFilterSensitiveLog=H5;var G5=e=>({...e,...e.roleCredentials&&{roleCredentials:(0,ge.RoleCredentialsFilterSensitiveLog)(e.roleCredentials)}});ge.GetRoleCredentialsResponseFilterSensitiveLog=G5;var Q5=e=>({...e,...e.accessToken&&{accessToken:Ss.SENSITIVE_STRING}});ge.ListAccountRolesRequestFilterSensitiveLog=Q5;var K5=e=>({...e,...e.accessToken&&{accessToken:Ss.SENSITIVE_STRING}});ge.ListAccountsRequestFilterSensitiveLog=K5;var J5=e=>({...e,...e.accessToken&&{accessToken:Ss.SENSITIVE_STRING}});ge.LogoutRequestFilterSensitiveLog=J5});var Yc=c(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.de_LogoutCommand=Fe.de_ListAccountsCommand=Fe.de_ListAccountRolesCommand=Fe.de_GetRoleCredentialsCommand=Fe.se_LogoutCommand=Fe.se_ListAccountsCommand=Fe.se_ListAccountRolesCommand=Fe.se_GetRoleCredentialsCommand=void 0;var Cm=et(),I=A(),Om=Qi(),Y5=Nm(),X5=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s=(0,I.map)({},Rm,{"x-amz-sso_bearer_token":e.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,u=(0,I.map)({role_name:[,(0,I.expectNonNull)(e.roleName,"roleName")],account_id:[,(0,I.expectNonNull)(e.accountId,"accountId")]}),l;return new Cm.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:u,body:l})};Fe.se_GetRoleCredentialsCommand=X5;var Z5=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s=(0,I.map)({},Rm,{"x-amz-sso_bearer_token":e.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/roles`,u=(0,I.map)({next_token:[,e.nextToken],max_result:[()=>e.maxResults!==void 0,()=>e.maxResults.toString()],account_id:[,(0,I.expectNonNull)(e.accountId,"accountId")]}),l;return new Cm.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:u,body:l})};Fe.se_ListAccountRolesCommand=Z5;var eQ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s=(0,I.map)({},Rm,{"x-amz-sso_bearer_token":e.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/accounts`,u=(0,I.map)({next_token:[,e.nextToken],max_result:[()=>e.maxResults!==void 0,()=>e.maxResults.toString()]}),l;return new Cm.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:u,body:l})};Fe.se_ListAccountsCommand=eQ;var tQ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s=(0,I.map)({},Rm,{"x-amz-sso_bearer_token":e.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/logout`,u;return new Cm.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};Fe.se_LogoutCommand=tQ;var rQ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return nQ(e,t);let r=(0,I.map)({$metadata:ci(e)}),n=(0,I.expectNonNull)((0,I.expectObject)(await qm(e.body,t)),"body"),i=(0,I.take)(n,{roleCredentials:I._json});return Object.assign(r,i),r};Fe.de_GetRoleCredentialsCommand=rQ;var nQ=async(e,t)=>{let r={...e,body:await Mm(e.body,t)},n=Dm(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Pm(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Fv(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Tm(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Im(r,t);default:let i=r.body;return Am({output:e,parsedBody:i,errorCode:n})}},iQ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return oQ(e,t);let r=(0,I.map)({$metadata:ci(e)}),n=(0,I.expectNonNull)((0,I.expectObject)(await qm(e.body,t)),"body"),i=(0,I.take)(n,{nextToken:I.expectString,roleList:I._json});return Object.assign(r,i),r};Fe.de_ListAccountRolesCommand=iQ;var oQ=async(e,t)=>{let r={...e,body:await Mm(e.body,t)},n=Dm(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Pm(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Fv(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Tm(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Im(r,t);default:let i=r.body;return Am({output:e,parsedBody:i,errorCode:n})}},sQ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return aQ(e,t);let r=(0,I.map)({$metadata:ci(e)}),n=(0,I.expectNonNull)((0,I.expectObject)(await qm(e.body,t)),"body"),i=(0,I.take)(n,{accountList:I._json,nextToken:I.expectString});return Object.assign(r,i),r};Fe.de_ListAccountsCommand=sQ;var aQ=async(e,t)=>{let r={...e,body:await Mm(e.body,t)},n=Dm(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Pm(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Fv(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Tm(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Im(r,t);default:let i=r.body;return Am({output:e,parsedBody:i,errorCode:n})}},cQ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return uQ(e,t);let r=(0,I.map)({$metadata:ci(e)});return await(0,I.collectBody)(e.body,t),r};Fe.de_LogoutCommand=cQ;var uQ=async(e,t)=>{let r={...e,body:await Mm(e.body,t)},n=Dm(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Pm(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Tm(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Im(r,t);default:let i=r.body;return Am({output:e,parsedBody:i,errorCode:n})}},Am=(0,I.withBaseException)(Y5.SSOServiceException),Pm=async(e,t)=>{let r=(0,I.map)({}),n=e.body,i=(0,I.take)(n,{message:I.expectString});Object.assign(r,i);let o=new Om.InvalidRequestException({$metadata:ci(e),...r});return(0,I.decorateServiceException)(o,e.body)},Fv=async(e,t)=>{let r=(0,I.map)({}),n=e.body,i=(0,I.take)(n,{message:I.expectString});Object.assign(r,i);let o=new Om.ResourceNotFoundException({$metadata:ci(e),...r});return(0,I.decorateServiceException)(o,e.body)},Tm=async(e,t)=>{let r=(0,I.map)({}),n=e.body,i=(0,I.take)(n,{message:I.expectString});Object.assign(r,i);let o=new Om.TooManyRequestsException({$metadata:ci(e),...r});return(0,I.decorateServiceException)(o,e.body)},Im=async(e,t)=>{let r=(0,I.map)({}),n=e.body,i=(0,I.take)(n,{message:I.expectString});Object.assign(r,i);let o=new Om.UnauthorizedException({$metadata:ci(e),...r});return(0,I.decorateServiceException)(o,e.body)},ci=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),dQ=(e,t)=>(0,I.collectBody)(e,t).then(r=>t.utf8Encoder(r)),Rm=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),qm=(e,t)=>dQ(e,t).then(r=>r.length?JSON.parse(r):{}),Mm=async(e,t)=>{let r=await qm(e,t);return r.message=r.message??r.Message,r},Dm=(e,t)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var Uv=c(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.GetRoleCredentialsCommand=bs.$Command=void 0;var lQ=ee(),pQ=_e(),yq=A();Object.defineProperty(bs,"$Command",{enumerable:!0,get:function(){return yq.Command}});var hq=Qi(),_q=Yc(),Lv=class e extends yq.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,pQ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,lQ.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:hq.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:hq.GetRoleCredentialsResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,_q.se_GetRoleCredentialsCommand)(t,r)}deserialize(t,r){return(0,_q.de_GetRoleCredentialsCommand)(t,r)}};bs.GetRoleCredentialsCommand=Lv});var km=c(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.ListAccountRolesCommand=Ns.$Command=void 0;var fQ=ee(),mQ=_e(),Eq=A();Object.defineProperty(Ns,"$Command",{enumerable:!0,get:function(){return Eq.Command}});var hQ=Qi(),gq=Yc(),jv=class e extends Eq.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,mQ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,fQ.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:hQ.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,gq.se_ListAccountRolesCommand)(t,r)}deserialize(t,r){return(0,gq.de_ListAccountRolesCommand)(t,r)}};Ns.ListAccountRolesCommand=jv});var Fm=c(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.ListAccountsCommand=xs.$Command=void 0;var _Q=ee(),yQ=_e(),wq=A();Object.defineProperty(xs,"$Command",{enumerable:!0,get:function(){return wq.Command}});var gQ=Qi(),vq=Yc(),Bv=class e extends wq.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,yQ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,_Q.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:gQ.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,vq.se_ListAccountsCommand)(t,r)}deserialize(t,r){return(0,vq.de_ListAccountsCommand)(t,r)}};xs.ListAccountsCommand=Bv});var Vv=c(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.LogoutCommand=Cs.$Command=void 0;var EQ=ee(),vQ=_e(),bq=A();Object.defineProperty(Cs,"$Command",{enumerable:!0,get:function(){return bq.Command}});var wQ=Qi(),Sq=Yc(),Wv=class e extends bq.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,vQ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,EQ.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:wQ.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,Sq.se_LogoutCommand)(t,r)}deserialize(t,r){return(0,Sq.de_LogoutCommand)(t,r)}};Cs.LogoutCommand=Wv});var Nq=c(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.SSO=void 0;var SQ=A(),bQ=Uv(),NQ=km(),xQ=Fm(),CQ=Vv(),OQ=Jc(),AQ={GetRoleCredentialsCommand:bQ.GetRoleCredentialsCommand,ListAccountRolesCommand:NQ.ListAccountRolesCommand,ListAccountsCommand:xQ.ListAccountsCommand,LogoutCommand:CQ.LogoutCommand},Lm=class extends OQ.SSOClient{};Um.SSO=Lm;(0,SQ.createAggregatedClient)(AQ,Lm)});var xq=c(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});var jm=(N(),S(b));jm.__exportStar(Uv(),Os);jm.__exportStar(km(),Os);jm.__exportStar(Fm(),Os);jm.__exportStar(Vv(),Os)});var Oq=c(Cq=>{"use strict";Object.defineProperty(Cq,"__esModule",{value:!0})});var Aq=c(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.paginateListAccountRoles=void 0;var PQ=km(),TQ=Jc(),IQ=async(e,t,...r)=>await e.send(new PQ.ListAccountRolesCommand(t),...r);async function*RQ(e,t,...r){let n=e.startingToken||void 0,i=!0,o;for(;i;){if(t.nextToken=n,t.maxResults=e.pageSize,e.client instanceof TQ.SSOClient)o=await IQ(e.client,t,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let s=n;n=o.nextToken,i=!!(n&&(!e.stopOnSameToken||n!==s))}return void 0}Bm.paginateListAccountRoles=RQ});var Pq=c(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.paginateListAccounts=void 0;var qQ=Fm(),MQ=Jc(),DQ=async(e,t,...r)=>await e.send(new qQ.ListAccountsCommand(t),...r);async function*kQ(e,t,...r){let n=e.startingToken||void 0,i=!0,o;for(;i;){if(t.nextToken=n,t.maxResults=e.pageSize,e.client instanceof MQ.SSOClient)o=await DQ(e.client,t,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let s=n;n=o.nextToken,i=!!(n&&(!e.stopOnSameToken||n!==s))}return void 0}Wm.paginateListAccounts=kQ});var Tq=c(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var $v=(N(),S(b));$v.__exportStar(Oq(),Xc);$v.__exportStar(Aq(),Xc);$v.__exportStar(Pq(),Xc)});var Iq=c(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});var FQ=(N(),S(b));FQ.__exportStar(Qi(),zv)});var Rq=c(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.SSOServiceException=void 0;var Zc=(N(),S(b));Zc.__exportStar(Jc(),un);Zc.__exportStar(Nq(),un);Zc.__exportStar(xq(),un);Zc.__exportStar(Tq(),un);Zc.__exportStar(Iq(),un);var LQ=Nm();Object.defineProperty(un,"SSOServiceException",{enumerable:!0,get:function(){return LQ.SSOServiceException}})});var zm=c(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.UnsupportedGrantTypeException=ne.UnauthorizedClientException=ne.SlowDownException=ne.SSOOIDCClient=ne.InvalidScopeException=ne.InvalidRequestException=ne.InvalidClientException=ne.InternalServerException=ne.ExpiredTokenException=ne.CreateTokenCommand=ne.AuthorizationPendingException=ne.AccessDeniedException=void 0;var qq=Ka(),UQ=Ja(),jQ=Ya(),Mq=dc(),BQ=pr(),WQ=fc(),VQ=ee(),Dq=Zr(),$Q=A(),zQ=e=>{var t,r;return{...e,useDualstackEndpoint:(t=e.useDualstackEndpoint)!==null&&t!==void 0?t:!1,useFipsEndpoint:(r=e.useFipsEndpoint)!==null&&r!==void 0?r:!1,defaultSigningName:"awsssooidc"}},HQ={version:"3.387.0"},GQ=Vc(),Vm=pr(),QQ=$c(),kq=Zr(),eu=Xn(),Fq=Yo(),KQ=zc(),JQ=Ft(),YQ=A(),XQ=Di(),Lq=Qo(),Uq=ur(),ZQ=Vo(),Gq="required",dn="fn",ln="argv",As="ref",Hv="PartitionResult",Rr="tree",tu="error",ru="endpoint",jq={[Gq]:!1,type:"String"},Bq={[Gq]:!0,default:!1,type:"Boolean"},Qq={[As]:"Endpoint"},Kq={[dn]:"booleanEquals",[ln]:[{[As]:"UseFIPS"},!0]},Jq={[dn]:"booleanEquals",[ln]:[{[As]:"UseDualStack"},!0]},qr={},Wq={[dn]:"booleanEquals",[ln]:[!0,{[dn]:"getAttr",[ln]:[{[As]:Hv},"supportsFIPS"]}]},Vq={[dn]:"booleanEquals",[ln]:[!0,{[dn]:"getAttr",[ln]:[{[As]:Hv},"supportsDualStack"]}]},$q=[Qq],zq=[Kq],Hq=[Jq],eK={version:"1.0",parameters:{Region:jq,UseDualStack:Bq,UseFIPS:Bq,Endpoint:jq},rules:[{conditions:[{[dn]:"aws.partition",[ln]:[{[As]:"Region"}],assign:Hv}],type:Rr,rules:[{conditions:[{[dn]:"isSet",[ln]:$q},{[dn]:"parseURL",[ln]:$q,assign:"url"}],type:Rr,rules:[{conditions:zq,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:tu},{type:Rr,rules:[{conditions:Hq,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:tu},{endpoint:{url:Qq,properties:qr,headers:qr},type:ru}]}]},{conditions:[Kq,Jq],type:Rr,rules:[{conditions:[Wq,Vq],type:Rr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qr,headers:qr},type:ru}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:tu}]},{conditions:zq,type:Rr,rules:[{conditions:[Wq],type:Rr,rules:[{type:Rr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:qr,headers:qr},type:ru}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:tu}]},{conditions:Hq,type:Rr,rules:[{conditions:[Vq],type:Rr,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qr,headers:qr},type:ru}]},{error:"DualStack is enabled but this partition does not support DualStack",type:tu}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:qr,headers:qr},type:ru}]}]},tK=eK,rK=(e,t={})=>(0,ZQ.resolveEndpoint)(tK,{endpointParams:e,logger:t.logger}),nK=e=>{var t,r,n,i,o,s,a,u,l;return{apiVersion:"2019-06-10",base64Decoder:(t=e?.base64Decoder)!==null&&t!==void 0?t:Lq.fromBase64,base64Encoder:(r=e?.base64Encoder)!==null&&r!==void 0?r:Lq.toBase64,disableHostPrefix:(n=e?.disableHostPrefix)!==null&&n!==void 0?n:!1,endpointProvider:(i=e?.endpointProvider)!==null&&i!==void 0?i:rK,logger:(o=e?.logger)!==null&&o!==void 0?o:new YQ.NoOpLogger,serviceId:(s=e?.serviceId)!==null&&s!==void 0?s:"SSO OIDC",urlParser:(a=e?.urlParser)!==null&&a!==void 0?a:XQ.parseUrl,utf8Decoder:(u=e?.utf8Decoder)!==null&&u!==void 0?u:Uq.fromUtf8,utf8Encoder:(l=e?.utf8Encoder)!==null&&l!==void 0?l:Uq.toUtf8}},iK=A(),oK=Qc(),sK=A(),aK=e=>{var t,r,n,i,o,s,a,u,l,p;(0,sK.emitWarningIfUnsupportedVersion)(process.version);let f=(0,oK.resolveDefaultsModeConfig)(e),m=()=>f().then(iK.loadConfigsForDefaultMode),h=nK(e);return{...h,...e,runtime:"node",defaultsMode:f,bodyLengthChecker:(t=e?.bodyLengthChecker)!==null&&t!==void 0?t:KQ.calculateBodyLength,defaultUserAgentProvider:(r=e?.defaultUserAgentProvider)!==null&&r!==void 0?r:(0,GQ.defaultUserAgent)({serviceId:h.serviceId,clientVersion:HQ.version}),maxAttempts:(n=e?.maxAttempts)!==null&&n!==void 0?n:(0,eu.loadConfig)(kq.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(i=e?.region)!==null&&i!==void 0?i:(0,eu.loadConfig)(Vm.NODE_REGION_CONFIG_OPTIONS,Vm.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:(o=e?.requestHandler)!==null&&o!==void 0?o:new Fq.NodeHttpHandler(m),retryMode:(s=e?.retryMode)!==null&&s!==void 0?s:(0,eu.loadConfig)({...kq.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await m()).retryMode||JQ.DEFAULT_RETRY_MODE}),sha256:(a=e?.sha256)!==null&&a!==void 0?a:QQ.Hash.bind(null,"sha256"),streamCollector:(u=e?.streamCollector)!==null&&u!==void 0?u:Fq.streamCollector,useDualstackEndpoint:(l=e?.useDualstackEndpoint)!==null&&l!==void 0?l:(0,eu.loadConfig)(Vm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(p=e?.useFipsEndpoint)!==null&&p!==void 0?p:(0,eu.loadConfig)(Vm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},Yq=class extends $Q.Client{constructor(...[e]){let t=aK(e||{}),r=zQ(t),n=(0,BQ.resolveRegionConfig)(r),i=(0,VQ.resolveEndpointConfig)(n),o=(0,Dq.resolveRetryConfig)(i),s=(0,qq.resolveHostHeaderConfig)(o),a=(0,Mq.resolveUserAgentConfig)(s);super(a),this.config=a,this.middlewareStack.use((0,Dq.getRetryPlugin)(this.config)),this.middlewareStack.use((0,WQ.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,qq.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,UQ.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,jQ.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Mq.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};ne.SSOOIDCClient=Yq;var cK=A(),uK=ee(),dK=_e(),lK=A(),Gv=et(),g=A(),pK=A(),Ct=class Xq extends pK.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,Xq.prototype)}},Zq=class e1 extends Ct{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.AccessDeniedException=Zq;var t1=class r1 extends Ct{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,r1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.AuthorizationPendingException=t1;var n1=class i1 extends Ct{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,i1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.ExpiredTokenException=n1;var o1=class s1 extends Ct{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,s1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.InternalServerException=o1;var a1=class c1 extends Ct{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,c1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.InvalidClientException=a1;var fK=class u1 extends Ct{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,u1.prototype),this.error=t.error,this.error_description=t.error_description}},d1=class l1 extends Ct{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,l1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.InvalidRequestException=d1;var p1=class f1 extends Ct{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,f1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.InvalidScopeException=p1;var m1=class h1 extends Ct{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,h1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.SlowDownException=m1;var _1=class y1 extends Ct{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,y1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.UnauthorizedClientException=_1;var g1=class E1 extends Ct{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,E1.prototype),this.error=t.error,this.error_description=t.error_description}};ne.UnsupportedGrantTypeException=g1;var mK=class v1 extends Ct{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,v1.prototype),this.error=t.error,this.error_description=t.error_description}},hK=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/token`,u;return u=JSON.stringify((0,g.take)(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:l=>(0,g._json)(l)})),new Gv.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})},_K=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/client/register`,u;return u=JSON.stringify((0,g.take)(e,{clientName:[],clientType:[],scopes:l=>(0,g._json)(l)})),new Gv.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})},yK=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/device_authorization`,u;return u=JSON.stringify((0,g.take)(e,{clientId:[],clientSecret:[],startUrl:[]})),new Gv.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})},gK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return EK(e,t);let r=(0,g.map)({$metadata:it(e)}),n=(0,g.expectNonNull)((0,g.expectObject)(await $m(e.body,t)),"body"),i=(0,g.take)(n,{accessToken:g.expectString,expiresIn:g.expectInt32,idToken:g.expectString,refreshToken:g.expectString,tokenType:g.expectString});return Object.assign(r,i),r},EK=async(e,t)=>{let r={...e,body:await Yv(e.body,t)},n=Xv(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await NK(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await xK(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await CK(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Kv(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await w1(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await AK(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Jv(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await S1(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await b1(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await N1(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await PK(r,t);default:let i=r.body;return Qv({output:e,parsedBody:i,errorCode:n})}},vK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return wK(e,t);let r=(0,g.map)({$metadata:it(e)}),n=(0,g.expectNonNull)((0,g.expectObject)(await $m(e.body,t)),"body"),i=(0,g.take)(n,{authorizationEndpoint:g.expectString,clientId:g.expectString,clientIdIssuedAt:g.expectLong,clientSecret:g.expectString,clientSecretExpiresAt:g.expectLong,tokenEndpoint:g.expectString});return Object.assign(r,i),r},wK=async(e,t)=>{let r={...e,body:await Yv(e.body,t)},n=Xv(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Kv(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await OK(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Jv(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await S1(r,t);default:let i=r.body;return Qv({output:e,parsedBody:i,errorCode:n})}},SK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bK(e,t);let r=(0,g.map)({$metadata:it(e)}),n=(0,g.expectNonNull)((0,g.expectObject)(await $m(e.body,t)),"body"),i=(0,g.take)(n,{deviceCode:g.expectString,expiresIn:g.expectInt32,interval:g.expectInt32,userCode:g.expectString,verificationUri:g.expectString,verificationUriComplete:g.expectString});return Object.assign(r,i),r},bK=async(e,t)=>{let r={...e,body:await Yv(e.body,t)},n=Xv(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Kv(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await w1(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Jv(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await b1(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await N1(r,t);default:let i=r.body;return Qv({output:e,parsedBody:i,errorCode:n})}},Qv=(0,g.withBaseException)(Ct),NK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new Zq({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},xK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new t1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},CK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new n1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},Kv=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new o1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},w1=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new a1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},OK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new mK({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},AK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new fK({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},Jv=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new d1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},S1=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new p1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},b1=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new m1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},N1=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new _1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},PK=async(e,t)=>{let r=(0,g.map)({}),n=e.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new g1({$metadata:it(e),...r});return(0,g.decorateServiceException)(o,e.body)},it=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!==null&&t!==void 0?t:e.headers["x-amzn-request-id"])!==null&&r!==void 0?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},TK=(e,t)=>(0,g.collectBody)(e,t).then(r=>t.utf8Encoder(r)),$m=(e,t)=>TK(e,t).then(r=>r.length?JSON.parse(r):{}),Yv=async(e,t)=>{var r;let n=await $m(e,t);return n.message=(r=n.message)!==null&&r!==void 0?r:n.Message,n},Xv=(e,t)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},x1=class C1 extends lK.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,dK.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,uK.getEndpointPlugin)(r,C1.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return hK(t,r)}deserialize(t,r){return gK(t,r)}};ne.CreateTokenCommand=x1;var IK=ee(),RK=_e(),qK=A(),MK=class O1 extends qK.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,RK.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,IK.getEndpointPlugin)(r,O1.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return _K(t,r)}deserialize(t,r){return vK(t,r)}},DK=ee(),kK=_e(),FK=A(),LK=class A1 extends FK.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,kK.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,DK.getEndpointPlugin)(r,A1.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return yK(t,r)}deserialize(t,r){return SK(t,r)}},UK={CreateTokenCommand:x1,RegisterClientCommand:MK,StartDeviceAuthorizationCommand:LK},jK=class extends Yq{};(0,cK.createAggregatedClient)(UK,jK)});var Hm=c(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.REFRESH_MESSAGE=Ps.EXPIRE_WINDOW_MS=void 0;Ps.EXPIRE_WINDOW_MS=5*60*1e3;Ps.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var P1=c(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.getSsoOidcClient=void 0;var BK=zm(),Zv={},WK=e=>{if(Zv[e])return Zv[e];let t=new BK.SSOOIDCClient({region:e});return Zv[e]=t,t};Gm.getSsoOidcClient=WK});var T1=c(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.getNewSsoOidcToken=void 0;var VK=zm(),$K=P1(),zK=(e,t)=>(0,$K.getSsoOidcClient)(t).send(new VK.CreateTokenCommand({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));Qm.getNewSsoOidcToken=zK});var I1=c(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.validateTokenExpiry=void 0;var HK=X(),GK=Hm(),QK=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new HK.TokenProviderError(`Token is expired. ${GK.REFRESH_MESSAGE}`,!1)};Km.validateTokenExpiry=QK});var R1=c(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.validateTokenKey=void 0;var KK=X(),JK=Hm(),YK=(e,t,r=!1)=>{if(typeof t>"u")throw new KK.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${JK.REFRESH_MESSAGE}`,!1)};Jm.validateTokenKey=YK});var q1=c(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.writeSSOTokenToFile=void 0;var XK=vr(),ZK=q("fs"),{writeFile:e9}=ZK.promises,t9=(e,t)=>{let r=(0,XK.getSSOTokenFilepath)(e),n=JSON.stringify(t,null,2);return e9(r,n)};Ym.writeSSOTokenToFile=t9});var ew=c(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.fromSso=void 0;var nu=X(),Xm=vr(),M1=Hm(),r9=T1(),D1=I1(),Ki=R1(),n9=q1(),k1=new Date(0),i9=(e={})=>async()=>{let t=await(0,Xm.parseKnownFiles)(e),r=(0,Xm.getProfileName)(e),n=t[r];if(n){if(!n.sso_session)throw new nu.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new nu.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let i=n.sso_session,s=(await(0,Xm.loadSsoSessionData)(e))[i];if(!s)throw new nu.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!s[h])throw new nu.TokenProviderError(`Sso session '${i}' is missing required property '${h}'.`,!1);let a=s.sso_start_url,u=s.sso_region,l;try{l=await(0,Xm.getSSOTokenFromFile)(i)}catch{throw new nu.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${M1.REFRESH_MESSAGE}`,!1)}(0,Ki.validateTokenKey)("accessToken",l.accessToken),(0,Ki.validateTokenKey)("expiresAt",l.expiresAt);let{accessToken:p,expiresAt:f}=l,m={token:p,expiration:new Date(f)};if(m.expiration.getTime()-Date.now()>M1.EXPIRE_WINDOW_MS)return m;if(Date.now()-k1.getTime()<30*1e3)return(0,D1.validateTokenExpiry)(m),m;(0,Ki.validateTokenKey)("clientId",l.clientId,!0),(0,Ki.validateTokenKey)("clientSecret",l.clientSecret,!0),(0,Ki.validateTokenKey)("refreshToken",l.refreshToken,!0);try{k1.setTime(Date.now());let h=await(0,r9.getNewSsoOidcToken)(l,u);(0,Ki.validateTokenKey)("accessToken",h.accessToken),(0,Ki.validateTokenKey)("expiresIn",h.expiresIn);let y=new Date(Date.now()+h.expiresIn*1e3);try{await(0,n9.writeSSOTokenToFile)(i,{...l,accessToken:h.accessToken,expiresAt:y.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:y}}catch{return(0,D1.validateTokenExpiry)(m),m}};Zm.fromSso=i9});var F1=c(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.fromStatic=void 0;var o9=X(),s9=({token:e})=>async()=>{if(!e||!e.token)throw new o9.TokenProviderError("Please pass a valid token to fromStatic",!1);return e};eh.fromStatic=s9});var L1=c(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.nodeProvider=void 0;var tw=X(),a9=ew(),c9=(e={})=>(0,tw.memoize)((0,tw.chain)((0,a9.fromSso)(e),async()=>{throw new tw.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);th.nodeProvider=c9});var U1=c(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});var rh=(N(),S(b));rh.__exportStar(zm(),Ts);rh.__exportStar(ew(),Ts);rh.__exportStar(F1(),Ts);rh.__exportStar(L1(),Ts)});var B1=c(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.resolveSSOCredentials=void 0;var j1=Rq(),u9=U1(),iu=X(),d9=vr(),ou=!1,l9=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,profile:s})=>{let a,u="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let w=await(0,u9.fromSso)({profile:s})();a={accessToken:w.token,expiresAt:new Date(w.expiration).toISOString()}}catch(w){throw new iu.CredentialsProviderError(w.message,ou)}else try{a=await(0,d9.getSSOTokenFromFile)(e)}catch{throw new iu.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${u}`,ou)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new iu.CredentialsProviderError(`The SSO session associated with this profile has expired. ${u}`,ou);let{accessToken:l}=a,p=o||new j1.SSOClient({region:n}),f;try{f=await p.send(new j1.GetRoleCredentialsCommand({accountId:r,roleName:i,accessToken:l}))}catch(w){throw iu.CredentialsProviderError.from(w,ou)}let{roleCredentials:{accessKeyId:m,secretAccessKey:h,sessionToken:y,expiration:E}={}}=f;if(!m||!h||!y||!E)throw new iu.CredentialsProviderError("SSO returns an invalid temporary credential.",ou);return{accessKeyId:m,secretAccessKey:h,sessionToken:y,expiration:new Date(E)}};nh.resolveSSOCredentials=l9});var rw=c(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.validateSsoProfile=void 0;var p9=X(),f9=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:i}=e;if(!t||!r||!n||!i)throw new p9.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};ih.validateSsoProfile=f9});var V1=c(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.fromSSO=void 0;var su=X(),nw=vr(),m9=FE(),W1=B1(),h9=rw(),_9=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,ssoSession:s}=e,a=(0,nw.getProfileName)(e);if(!t&&!r&&!n&&!i&&!s){let l=(await(0,nw.parseKnownFiles)(e))[a];if(!l)throw new su.CredentialsProviderError(`Profile ${a} was not found.`);if(!(0,m9.isSsoProfile)(l))throw new su.CredentialsProviderError(`Profile ${a} is not configured with SSO credentials.`);if(l?.sso_session){let w=(await(0,nw.loadSsoSessionData)(e))[l.sso_session],K=` configurations in profile ${a} and sso-session ${l.sso_session}`;if(n&&n!==w.sso_region)throw new su.CredentialsProviderError("Conflicting SSO region"+K,!1);if(t&&t!==w.sso_start_url)throw new su.CredentialsProviderError("Conflicting SSO start_url"+K,!1);l.sso_region=w.sso_region,l.sso_start_url=w.sso_start_url}let{sso_start_url:p,sso_account_id:f,sso_region:m,sso_role_name:h,sso_session:y}=(0,h9.validateSsoProfile)(l);return(0,W1.resolveSSOCredentials)({ssoStartUrl:p,ssoSession:y,ssoAccountId:f,ssoRegion:m,ssoRoleName:h,ssoClient:o,profile:a})}else{if(!t||!r||!n||!i)throw new su.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,W1.resolveSSOCredentials)({ssoStartUrl:t,ssoSession:s,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,profile:a})}};oh.fromSSO=_9});var z1=c($1=>{"use strict";Object.defineProperty($1,"__esModule",{value:!0})});var ah=c(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});var sh=(N(),S(b));sh.__exportStar(V1(),Is);sh.__exportStar(FE(),Is);sh.__exportStar(z1(),Is);sh.__exportStar(rw(),Is)});var G1=c(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.resolveSsoCredentials=Rs.isSsoProfile=void 0;var H1=ah(),y9=ah();Object.defineProperty(Rs,"isSsoProfile",{enumerable:!0,get:function(){return y9.isSsoProfile}});var g9=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:i,sso_role_name:o}=(0,H1.validateSsoProfile)(e);return(0,H1.fromSSO)({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:i,ssoRoleName:o})()};Rs.resolveSsoCredentials=g9});var Q1=c(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.resolveStaticCredentials=qs.isStaticCredsProfile=void 0;var E9=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1;qs.isStaticCredsProfile=E9;var v9=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});qs.resolveStaticCredentials=v9});var iw=c(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.fromWebToken=void 0;var w9=X(),S9=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:o,policy:s,durationSeconds:a,roleAssumerWithWebIdentity:u}=e;if(!u)throw new w9.CredentialsProviderError(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return u({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:o,Policy:s,DurationSeconds:a})};ch.fromWebToken=S9});var K1=c(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.fromTokenFile=void 0;var b9=X(),N9=q("fs"),x9=iw(),C9="AWS_WEB_IDENTITY_TOKEN_FILE",O9="AWS_ROLE_ARN",A9="AWS_ROLE_SESSION_NAME",P9=(e={})=>async()=>{var t,r,n;let i=(t=e?.webIdentityTokenFile)!==null&&t!==void 0?t:process.env[C9],o=(r=e?.roleArn)!==null&&r!==void 0?r:process.env[O9],s=(n=e?.roleSessionName)!==null&&n!==void 0?n:process.env[A9];if(!i||!o)throw new b9.CredentialsProviderError("Web identity configuration not specified");return(0,x9.fromWebToken)({...e,webIdentityToken:(0,N9.readFileSync)(i,{encoding:"ascii"}),roleArn:o,roleSessionName:s})()};uh.fromTokenFile=P9});var ow=c(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var J1=(N(),S(b));J1.__exportStar(K1(),dh);J1.__exportStar(iw(),dh)});var Y1=c(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.resolveWebIdentityCredentials=Ms.isWebIdentityProfile=void 0;var T9=ow(),I9=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1;Ms.isWebIdentityProfile=I9;var R9=async(e,t)=>(0,T9.fromTokenFile)({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();Ms.resolveWebIdentityCredentials=R9});var qE=c(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.resolveProfileData=void 0;var q9=X(),X1=CI(),Z1=II(),eM=G1(),lh=Q1(),tM=Y1(),M9=async(e,t,r,n={})=>{let i=t[e];if(Object.keys(n).length>0&&(0,lh.isStaticCredsProfile)(i))return(0,lh.resolveStaticCredentials)(i);if((0,X1.isAssumeRoleProfile)(i))return(0,X1.resolveAssumeRoleCredentials)(e,t,r,n);if((0,lh.isStaticCredsProfile)(i))return(0,lh.resolveStaticCredentials)(i);if((0,tM.isWebIdentityProfile)(i))return(0,tM.resolveWebIdentityCredentials)(i,r);if((0,Z1.isProcessProfile)(i))return(0,Z1.resolveProcessCredentials)(r,e);if((0,eM.isSsoProfile)(i))return(0,eM.resolveSsoCredentials)(i);throw new q9.CredentialsProviderError(`Profile ${e} could not be found or parsed in shared credentials file.`)};ph.resolveProfileData=M9});var nM=c(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.fromIni=void 0;var rM=vr(),D9=qE(),k9=(e={})=>async()=>{let t=await(0,rM.parseKnownFiles)(e);return(0,D9.resolveProfileData)((0,rM.getProfileName)(e),t,e)};fh.fromIni=k9});var iM=c(sw=>{"use strict";Object.defineProperty(sw,"__esModule",{value:!0});var F9=(N(),S(b));F9.__exportStar(nM(),sw)});var oM=c(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.remoteProvider=Ji.ENV_IMDS_DISABLED=void 0;var mh=Vf(),L9=X();Ji.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var U9=e=>process.env[mh.ENV_CMDS_RELATIVE_URI]||process.env[mh.ENV_CMDS_FULL_URI]?(0,mh.fromContainerMetadata)(e):process.env[Ji.ENV_IMDS_DISABLED]?async()=>{throw new L9.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,mh.fromInstanceMetadata)(e);Ji.remoteProvider=U9});var sM=c(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.defaultProvider=void 0;var j9=_E(),B9=iM(),W9=kE(),V9=ah(),$9=ow(),aw=X(),z9=vr(),H9=oM(),G9=(e={})=>(0,aw.memoize)((0,aw.chain)(...e.profile||process.env[z9.ENV_PROFILE]?[]:[(0,j9.fromEnv)()],(0,V9.fromSSO)(e),(0,B9.fromIni)(e),(0,W9.fromProcess)(e),(0,$9.fromTokenFile)(e),(0,H9.remoteProvider)(e),async()=>{throw new aw.CredentialsProviderError("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);hh.defaultProvider=G9});var uw=c(cw=>{"use strict";Object.defineProperty(cw,"__esModule",{value:!0});var Q9=(N(),S(b));Q9.__exportStar(sM(),cw)});var AM=c(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.ruleSet=void 0;var gM="required",R="type",G="fn",Q="argv",ui="ref",aM=!1,K9=!0,Yi="booleanEquals",Ke="tree",We="stringEquals",EM="sigv4",vM="sts",wM="us-east-1",pe="endpoint",cM="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ds="error",lw="getAttr",uM={[gM]:!1,[R]:"String"},dw={[gM]:!0,default:!1,[R]:"Boolean"},SM={[ui]:"Endpoint"},dM={[G]:"isSet",[Q]:[{[ui]:"Region"}]},Ve={[ui]:"Region"},lM={[G]:"aws.partition",[Q]:[Ve],assign:"PartitionResult"},bM={[ui]:"UseFIPS"},NM={[ui]:"UseDualStack"},Je={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:EM,signingName:vM,signingRegion:wM}]},headers:{}},Ot={},pM={conditions:[{[G]:We,[Q]:[Ve,"aws-global"]}],[pe]:Je,[R]:pe},xM={[G]:Yi,[Q]:[bM,!0]},CM={[G]:Yi,[Q]:[NM,!0]},fM={[G]:Yi,[Q]:[!0,{[G]:lw,[Q]:[{[ui]:"PartitionResult"},"supportsFIPS"]}]},OM={[ui]:"PartitionResult"},mM={[G]:Yi,[Q]:[!0,{[G]:lw,[Q]:[OM,"supportsDualStack"]}]},hM=[{[G]:"isSet",[Q]:[SM]}],_M=[xM],yM=[CM],J9={version:"1.0",parameters:{Region:uM,UseDualStack:dw,UseFIPS:dw,Endpoint:uM,UseGlobalEndpoint:dw},rules:[{conditions:[{[G]:Yi,[Q]:[{[ui]:"UseGlobalEndpoint"},K9]},{[G]:"not",[Q]:hM},dM,lM,{[G]:Yi,[Q]:[bM,aM]},{[G]:Yi,[Q]:[NM,aM]}],[R]:Ke,rules:[{conditions:[{[G]:We,[Q]:[Ve,"ap-northeast-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"ap-south-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"ap-southeast-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"ap-southeast-2"]}],endpoint:Je,[R]:pe},pM,{conditions:[{[G]:We,[Q]:[Ve,"ca-central-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"eu-central-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"eu-north-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"eu-west-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"eu-west-2"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"eu-west-3"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"sa-east-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,wM]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"us-east-2"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"us-west-1"]}],endpoint:Je,[R]:pe},{conditions:[{[G]:We,[Q]:[Ve,"us-west-2"]}],endpoint:Je,[R]:pe},{endpoint:{url:cM,properties:{authSchemes:[{name:EM,signingName:vM,signingRegion:"{Region}"}]},headers:Ot},[R]:pe}]},{conditions:hM,[R]:Ke,rules:[{conditions:_M,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[R]:Ds},{[R]:Ke,rules:[{conditions:yM,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[R]:Ds},{endpoint:{url:SM,properties:Ot,headers:Ot},[R]:pe}]}]},{[R]:Ke,rules:[{conditions:[dM],[R]:Ke,rules:[{conditions:[lM],[R]:Ke,rules:[{conditions:[xM,CM],[R]:Ke,rules:[{conditions:[fM,mM],[R]:Ke,rules:[{[R]:Ke,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},[R]:pe}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[R]:Ds}]},{conditions:_M,[R]:Ke,rules:[{conditions:[fM],[R]:Ke,rules:[{[R]:Ke,rules:[{conditions:[{[G]:We,[Q]:["aws-us-gov",{[G]:lw,[Q]:[OM,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Ot,headers:Ot},[R]:pe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ot,headers:Ot},[R]:pe}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[R]:Ds}]},{conditions:yM,[R]:Ke,rules:[{conditions:[mM],[R]:Ke,rules:[{[R]:Ke,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},[R]:pe}]}]},{error:"DualStack is enabled but this partition does not support DualStack",[R]:Ds}]},{[R]:Ke,rules:[pM,{endpoint:{url:cM,properties:Ot,headers:Ot},[R]:pe}]}]}]},{error:"Invalid Configuration: Missing Region",[R]:Ds}]}]};_h.ruleSet=J9});var PM=c(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.defaultEndpointResolver=void 0;var Y9=Vo(),X9=AM(),Z9=(e,t={})=>(0,Y9.resolveEndpoint)(X9.ruleSet,{endpointParams:e,logger:t.logger});yh.defaultEndpointResolver=Z9});var RM=c(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.getRuntimeConfig=void 0;var e7=A(),t7=Di(),TM=Qo(),IM=ur(),r7=PM(),n7=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??TM.fromBase64,base64Encoder:e?.base64Encoder??TM.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??r7.defaultEndpointResolver,extensions:e?.extensions??[],logger:e?.logger??new e7.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??t7.parseUrl,utf8Decoder:e?.utf8Decoder??IM.fromUtf8,utf8Encoder:e?.utf8Encoder??IM.toUtf8});gh.getRuntimeConfig=n7});var DM=c(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.getRuntimeConfig=void 0;var i7=(N(),S(b)),o7=i7.__importDefault(JP()),s7=mE(),a7=uw(),c7=Vc(),Eh=pr(),u7=$c(),qM=Zr(),au=Xn(),MM=Yo(),d7=zc(),l7=Ft(),p7=RM(),f7=A(),m7=Qc(),h7=A(),_7=e=>{(0,h7.emitWarningIfUnsupportedVersion)(process.version);let t=(0,m7.resolveDefaultsModeConfig)(e),r=()=>t().then(f7.loadConfigsForDefaultMode),n=(0,p7.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??d7.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??(0,s7.decorateDefaultCredentialProvider)(a7.defaultProvider),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,c7.defaultUserAgent)({serviceId:n.serviceId,clientVersion:o7.default.version}),maxAttempts:e?.maxAttempts??(0,au.loadConfig)(qM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,au.loadConfig)(Eh.NODE_REGION_CONFIG_OPTIONS,Eh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new MM.NodeHttpHandler(r),retryMode:e?.retryMode??(0,au.loadConfig)({...qM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||l7.DEFAULT_RETRY_MODE}),sha256:e?.sha256??u7.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??MM.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,au.loadConfig)(Eh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,au.loadConfig)(Eh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};vh.getRuntimeConfig=_7});var FM=c(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.resolveRuntimeExtensions=void 0;var kM=A(),y7=e=>e,g7=(e,t)=>{let r={...y7((0,kM.getDefaultExtensionConfiguration)(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,kM.resolveDefaultRuntimeConfig)(r)}};wh.resolveRuntimeExtensions=g7});var Sh=c(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.STSClient=ks.__Client=void 0;var LM=Ka(),E7=Ja(),v7=Ya(),w7=QP(),UM=dc(),S7=pr(),b7=fc(),N7=ee(),jM=Zr(),BM=A();Object.defineProperty(ks,"__Client",{enumerable:!0,get:function(){return BM.Client}});var x7=KP(),C7=DM(),O7=FM(),pw=class e extends BM.Client{constructor(...[t]){let r=(0,C7.getRuntimeConfig)(t||{}),n=(0,x7.resolveClientEndpointParameters)(r),i=(0,S7.resolveRegionConfig)(n),o=(0,N7.resolveEndpointConfig)(i),s=(0,jM.resolveRetryConfig)(o),a=(0,LM.resolveHostHeaderConfig)(s),u=(0,w7.resolveStsAuthConfig)(a,{stsClientCtor:e}),l=(0,UM.resolveUserAgentConfig)(u),p=(0,O7.resolveRuntimeExtensions)(l,t?.extensions||[]);super(p),this.config=p,this.middlewareStack.use((0,jM.getRetryPlugin)(this.config)),this.middlewareStack.use((0,b7.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,LM.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,E7.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,v7.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,UM.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};ks.STSClient=pw});var mw=c(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AssumeRoleWithSAMLCommand=Fs.$Command=void 0;var A7=ee(),P7=_e(),$M=A();Object.defineProperty(Fs,"$Command",{enumerable:!0,get:function(){return $M.Command}});var WM=Wn(),VM=nn(),fw=class e extends $M.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,P7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,A7.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:WM.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:WM.AssumeRoleWithSAMLResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,VM.se_AssumeRoleWithSAMLCommand)(t,r)}deserialize(t,r){return(0,VM.de_AssumeRoleWithSAMLCommand)(t,r)}};Fs.AssumeRoleWithSAMLCommand=fw});var _w=c(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.DecodeAuthorizationMessageCommand=Ls.$Command=void 0;var T7=Qr(),I7=ee(),R7=_e(),HM=A();Object.defineProperty(Ls,"$Command",{enumerable:!0,get:function(){return HM.Command}});var zM=nn(),hw=class e extends HM.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,R7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,I7.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,T7.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,zM.se_DecodeAuthorizationMessageCommand)(t,r)}deserialize(t,r){return(0,zM.de_DecodeAuthorizationMessageCommand)(t,r)}};Ls.DecodeAuthorizationMessageCommand=hw});var gw=c(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.GetAccessKeyInfoCommand=Us.$Command=void 0;var q7=Qr(),M7=ee(),D7=_e(),QM=A();Object.defineProperty(Us,"$Command",{enumerable:!0,get:function(){return QM.Command}});var GM=nn(),yw=class e extends QM.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,D7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,M7.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,q7.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,GM.se_GetAccessKeyInfoCommand)(t,r)}deserialize(t,r){return(0,GM.de_GetAccessKeyInfoCommand)(t,r)}};Us.GetAccessKeyInfoCommand=yw});var vw=c(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.GetCallerIdentityCommand=js.$Command=void 0;var k7=Qr(),F7=ee(),L7=_e(),JM=A();Object.defineProperty(js,"$Command",{enumerable:!0,get:function(){return JM.Command}});var KM=nn(),Ew=class e extends JM.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,L7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,F7.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,k7.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,KM.se_GetCallerIdentityCommand)(t,r)}deserialize(t,r){return(0,KM.de_GetCallerIdentityCommand)(t,r)}};js.GetCallerIdentityCommand=Ew});var Sw=c(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.GetFederationTokenCommand=Bs.$Command=void 0;var U7=Qr(),j7=ee(),B7=_e(),XM=A();Object.defineProperty(Bs,"$Command",{enumerable:!0,get:function(){return XM.Command}});var W7=Wn(),YM=nn(),ww=class e extends XM.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,B7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,j7.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,U7.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:W7.GetFederationTokenResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,YM.se_GetFederationTokenCommand)(t,r)}deserialize(t,r){return(0,YM.de_GetFederationTokenCommand)(t,r)}};Bs.GetFederationTokenCommand=ww});var Nw=c(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.GetSessionTokenCommand=Ws.$Command=void 0;var V7=Qr(),$7=ee(),z7=_e(),eD=A();Object.defineProperty(Ws,"$Command",{enumerable:!0,get:function(){return eD.Command}});var H7=Wn(),ZM=nn(),bw=class e extends eD.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,z7.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,$7.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,V7.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:H7.GetSessionTokenResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,ZM.se_GetSessionTokenCommand)(t,r)}deserialize(t,r){return(0,ZM.de_GetSessionTokenCommand)(t,r)}};Ws.GetSessionTokenCommand=bw});var tD=c(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.STS=void 0;var G7=A(),Q7=_f(),K7=mw(),J7=yf(),Y7=_w(),X7=gw(),Z7=vw(),eJ=Sw(),tJ=Nw(),rJ=Sh(),nJ={AssumeRoleCommand:Q7.AssumeRoleCommand,AssumeRoleWithSAMLCommand:K7.AssumeRoleWithSAMLCommand,AssumeRoleWithWebIdentityCommand:J7.AssumeRoleWithWebIdentityCommand,DecodeAuthorizationMessageCommand:Y7.DecodeAuthorizationMessageCommand,GetAccessKeyInfoCommand:X7.GetAccessKeyInfoCommand,GetCallerIdentityCommand:Z7.GetCallerIdentityCommand,GetFederationTokenCommand:eJ.GetFederationTokenCommand,GetSessionTokenCommand:tJ.GetSessionTokenCommand},bh=class extends rJ.STSClient{};Nh.STS=bh;(0,G7.createAggregatedClient)(nJ,bh)});var rD=c(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});var di=(N(),S(b));di.__exportStar(_f(),Mr);di.__exportStar(mw(),Mr);di.__exportStar(yf(),Mr);di.__exportStar(_w(),Mr);di.__exportStar(gw(),Mr);di.__exportStar(vw(),Mr);di.__exportStar(Sw(),Mr);di.__exportStar(Nw(),Mr)});var nD=c(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});var iJ=(N(),S(b));iJ.__exportStar(Wn(),xw)});var aD=c(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.decorateDefaultCredentialProvider=Dr.getDefaultRoleAssumerWithWebIdentity=Dr.getDefaultRoleAssumer=void 0;var iD=mE(),oD=Sh(),sD=(e,t)=>t?class extends e{constructor(n){super(n);for(let i of t)this.middlewareStack.use(i)}}:e,oJ=(e={},t)=>(0,iD.getDefaultRoleAssumer)(e,sD(oD.STSClient,t));Dr.getDefaultRoleAssumer=oJ;var sJ=(e={},t)=>(0,iD.getDefaultRoleAssumerWithWebIdentity)(e,sD(oD.STSClient,t));Dr.getDefaultRoleAssumerWithWebIdentity=sJ;var aJ=e=>t=>e({roleAssumer:(0,Dr.getDefaultRoleAssumer)(t),roleAssumerWithWebIdentity:(0,Dr.getDefaultRoleAssumerWithWebIdentity)(t),...t});Dr.decorateDefaultCredentialProvider=aJ});var cD=c(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.STSServiceException=void 0;var cu=(N(),S(b));cu.__exportStar(Sh(),pn);cu.__exportStar(tD(),pn);cu.__exportStar(rD(),pn);cu.__exportStar(nD(),pn);cu.__exportStar(aD(),pn);var cJ=lf();Object.defineProperty(pn,"STSServiceException",{enumerable:!0,get:function(){return cJ.STSServiceException}})});var vD=c(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.ruleSet=void 0;var _D="required",mn="fn",hn="argv",Vs="ref",Cw="PartitionResult",fn="tree",uu="error",du="endpoint",uD={[_D]:!1,type:"String"},dD={[_D]:!0,default:!1,type:"Boolean"},yD={[Vs]:"Endpoint"},gD={[mn]:"booleanEquals",[hn]:[{[Vs]:"UseFIPS"},!0]},ED={[mn]:"booleanEquals",[hn]:[{[Vs]:"UseDualStack"},!0]},kr={},lD={[mn]:"booleanEquals",[hn]:[!0,{[mn]:"getAttr",[hn]:[{[Vs]:Cw},"supportsFIPS"]}]},pD={[mn]:"booleanEquals",[hn]:[!0,{[mn]:"getAttr",[hn]:[{[Vs]:Cw},"supportsDualStack"]}]},fD=[yD],mD=[gD],hD=[ED],uJ={version:"1.0",parameters:{Region:uD,UseDualStack:dD,UseFIPS:dD,Endpoint:uD},rules:[{conditions:[{[mn]:"aws.partition",[hn]:[{[Vs]:"Region"}],assign:Cw}],type:fn,rules:[{conditions:[{[mn]:"isSet",[hn]:fD},{[mn]:"parseURL",[hn]:fD,assign:"url"}],type:fn,rules:[{conditions:mD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:uu},{type:fn,rules:[{conditions:hD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:uu},{endpoint:{url:yD,properties:kr,headers:kr},type:du}]}]},{conditions:[gD,ED],type:fn,rules:[{conditions:[lD,pD],type:fn,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kr,headers:kr},type:du}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:uu}]},{conditions:mD,type:fn,rules:[{conditions:[lD],type:fn,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:kr,headers:kr},type:du}]},{error:"FIPS is enabled but this partition does not support FIPS",type:uu}]},{conditions:hD,type:fn,rules:[{conditions:[pD],type:fn,rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kr,headers:kr},type:du}]},{error:"DualStack is enabled but this partition does not support DualStack",type:uu}]},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:kr,headers:kr},type:du}]}]};xh.ruleSet=uJ});var wD=c(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.defaultEndpointResolver=void 0;var dJ=Vo(),lJ=vD(),pJ=(e,t={})=>(0,dJ.resolveEndpoint)(lJ.ruleSet,{endpointParams:e,logger:t.logger});Ch.defaultEndpointResolver=pJ});var ND=c(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.getRuntimeConfig=void 0;var fJ=A(),mJ=Di(),SD=Qo(),bD=ur(),hJ=wD(),_J=e=>({apiVersion:"2018-08-01",base64Decoder:e?.base64Decoder??SD.fromBase64,base64Encoder:e?.base64Encoder??SD.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??hJ.defaultEndpointResolver,extensions:e?.extensions??[],logger:e?.logger??new fJ.NoOpLogger,serviceId:e?.serviceId??"RDS Data",urlParser:e?.urlParser??mJ.parseUrl,utf8Decoder:e?.utf8Decoder??bD.fromUtf8,utf8Encoder:e?.utf8Encoder??bD.toUtf8});Oh.getRuntimeConfig=_J});var OD=c(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.getRuntimeConfig=void 0;var yJ=(N(),S(b)),gJ=yJ.__importDefault(GP()),EJ=cD(),vJ=uw(),wJ=Vc(),Ah=pr(),SJ=$c(),xD=Zr(),lu=Xn(),CD=Yo(),bJ=zc(),NJ=Ft(),xJ=ND(),CJ=A(),OJ=Qc(),AJ=A(),PJ=e=>{(0,AJ.emitWarningIfUnsupportedVersion)(process.version);let t=(0,OJ.resolveDefaultsModeConfig)(e),r=()=>t().then(CJ.loadConfigsForDefaultMode),n=(0,xJ.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??bJ.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??(0,EJ.decorateDefaultCredentialProvider)(vJ.defaultProvider),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,wJ.defaultUserAgent)({serviceId:n.serviceId,clientVersion:gJ.default.version}),maxAttempts:e?.maxAttempts??(0,lu.loadConfig)(xD.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,lu.loadConfig)(Ah.NODE_REGION_CONFIG_OPTIONS,Ah.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new CD.NodeHttpHandler(r),retryMode:e?.retryMode??(0,lu.loadConfig)({...xD.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||NJ.DEFAULT_RETRY_MODE}),sha256:e?.sha256??SJ.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??CD.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,lu.loadConfig)(Ah.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,lu.loadConfig)(Ah.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Ph.getRuntimeConfig=PJ});var PD=c(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.resolveRuntimeExtensions=void 0;var AD=A(),TJ=e=>e,IJ=(e,t)=>{let r={...TJ((0,AD.getDefaultExtensionConfiguration)(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,AD.resolveDefaultRuntimeConfig)(r)}};Th.resolveRuntimeExtensions=IJ});var Aw=c($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.RDSDataClient=$s.__Client=void 0;var TD=Ka(),RJ=Ja(),qJ=Ya(),ID=Qr(),RD=dc(),MJ=pr(),DJ=fc(),kJ=ee(),qD=Zr(),MD=A();Object.defineProperty($s,"__Client",{enumerable:!0,get:function(){return MD.Client}});var FJ=HP(),LJ=OD(),UJ=PD(),Ow=class extends MD.Client{constructor(...[t]){let r=(0,LJ.getRuntimeConfig)(t||{}),n=(0,FJ.resolveClientEndpointParameters)(r),i=(0,MJ.resolveRegionConfig)(n),o=(0,kJ.resolveEndpointConfig)(i),s=(0,qD.resolveRetryConfig)(o),a=(0,TD.resolveHostHeaderConfig)(s),u=(0,ID.resolveAwsAuthConfig)(a),l=(0,RD.resolveUserAgentConfig)(u),p=(0,UJ.resolveRuntimeExtensions)(l,t?.extensions||[]);super(p),this.config=p,this.middlewareStack.use((0,qD.getRetryPlugin)(this.config)),this.middlewareStack.use((0,DJ.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,TD.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,RJ.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,qJ.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,ID.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,RD.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};$s.RDSDataClient=Ow});var Ih=c(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.RDSDataServiceException=zs.__ServiceException=void 0;var DD=A();Object.defineProperty(zs,"__ServiceException",{enumerable:!0,get:function(){return DD.ServiceException}});var Pw=class e extends DD.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};zs.RDSDataServiceException=Pw});var Fw=c(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.Value=z.Field=z.ArrayValue=z.LongReturnType=z.RecordsFormatType=z.DecimalReturnType=z.NotFoundException=z.StatementTimeoutException=z.ServiceUnavailableError=z.InternalServerErrorException=z.ForbiddenException=z.TypeHint=z.BadRequestException=z.AccessDeniedException=void 0;var Xi=Ih(),Tw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};z.AccessDeniedException=Tw;var Iw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"BadRequestException",$fault:"client",...t}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};z.BadRequestException=Iw;z.TypeHint={DATE:"DATE",DECIMAL:"DECIMAL",JSON:"JSON",TIME:"TIME",TIMESTAMP:"TIMESTAMP",UUID:"UUID"};var Rw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"ForbiddenException",$fault:"client",...t}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};z.ForbiddenException=Rw;var qw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"InternalServerErrorException",$fault:"server",...t}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,e.prototype)}};z.InternalServerErrorException=qw;var Mw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"ServiceUnavailableError",$fault:"server",...t}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,e.prototype)}};z.ServiceUnavailableError=Mw;var Dw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"StatementTimeoutException",$fault:"client",...t}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.dbConnectionId=t.dbConnectionId}};z.StatementTimeoutException=Dw;var kw=class e extends Xi.RDSDataServiceException{constructor(t){super({name:"NotFoundException",$fault:"client",...t}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};z.NotFoundException=kw;z.DecimalReturnType={DOUBLE_OR_LONG:"DOUBLE_OR_LONG",STRING:"STRING"};z.RecordsFormatType={JSON:"JSON",NONE:"NONE"};z.LongReturnType={LONG:"LONG",STRING:"STRING"};var jJ;(function(e){e.visit=(t,r)=>t.booleanValues!==void 0?r.booleanValues(t.booleanValues):t.longValues!==void 0?r.longValues(t.longValues):t.doubleValues!==void 0?r.doubleValues(t.doubleValues):t.stringValues!==void 0?r.stringValues(t.stringValues):t.arrayValues!==void 0?r.arrayValues(t.arrayValues):r._(t.$unknown[0],t.$unknown[1])})(jJ=z.ArrayValue||(z.ArrayValue={}));var BJ;(function(e){e.visit=(t,r)=>t.isNull!==void 0?r.isNull(t.isNull):t.booleanValue!==void 0?r.booleanValue(t.booleanValue):t.longValue!==void 0?r.longValue(t.longValue):t.doubleValue!==void 0?r.doubleValue(t.doubleValue):t.stringValue!==void 0?r.stringValue(t.stringValue):t.blobValue!==void 0?r.blobValue(t.blobValue):t.arrayValue!==void 0?r.arrayValue(t.arrayValue):r._(t.$unknown[0],t.$unknown[1])})(BJ=z.Field||(z.Field={}));var WJ;(function(e){e.visit=(t,r)=>t.isNull!==void 0?r.isNull(t.isNull):t.bitValue!==void 0?r.bitValue(t.bitValue):t.bigIntValue!==void 0?r.bigIntValue(t.bigIntValue):t.intValue!==void 0?r.intValue(t.intValue):t.doubleValue!==void 0?r.doubleValue(t.doubleValue):t.realValue!==void 0?r.realValue(t.realValue):t.stringValue!==void 0?r.stringValue(t.stringValue):t.blobValue!==void 0?r.blobValue(t.blobValue):t.arrayValues!==void 0?r.arrayValues(t.arrayValues):t.structValue!==void 0?r.structValue(t.structValue):r._(t.$unknown[0],t.$unknown[1])})(WJ=z.Value||(z.Value={}))});var eo=c(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.de_RollbackTransactionCommand=ie.de_ExecuteStatementCommand=ie.de_ExecuteSqlCommand=ie.de_CommitTransactionCommand=ie.de_BeginTransactionCommand=ie.de_BatchExecuteStatementCommand=ie.se_RollbackTransactionCommand=ie.se_ExecuteStatementCommand=ie.se_ExecuteSqlCommand=ie.se_CommitTransactionCommand=ie.se_BeginTransactionCommand=ie.se_BatchExecuteStatementCommand=void 0;var Hs=et(),_=A(),_n=Fw(),VJ=Ih(),$J=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BatchExecute`,u;return u=JSON.stringify((0,_.take)(e,{database:[],parameterSets:l=>pY(l,t),resourceArn:[],schema:[],secretArn:[],sql:[],transactionId:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_BatchExecuteStatementCommand=$J;var zJ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BeginTransaction`,u;return u=JSON.stringify((0,_.take)(e,{database:[],resourceArn:[],schema:[],secretArn:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_BeginTransactionCommand=zJ;var HJ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/CommitTransaction`,u;return u=JSON.stringify((0,_.take)(e,{resourceArn:[],secretArn:[],transactionId:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_CommitTransactionCommand=HJ;var GJ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/ExecuteSql`,u;return u=JSON.stringify((0,_.take)(e,{awsSecretStoreArn:[],database:[],dbClusterOrInstanceArn:[],schema:[],sqlStatements:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_ExecuteSqlCommand=GJ;var QJ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/Execute`,u;return u=JSON.stringify((0,_.take)(e,{continueAfterTimeout:[],database:[],formatRecordsAs:[],includeResultMetadata:[],parameters:l=>LD(l,t),resourceArn:[],resultSetOptions:l=>(0,_._json)(l),schema:[],secretArn:[],sql:[],transactionId:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_ExecuteStatementCommand=QJ;var KJ=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await t.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/RollbackTransaction`,u;return u=JSON.stringify((0,_.take)(e,{resourceArn:[],secretArn:[],transactionId:[]})),new Hs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:u})};ie.se_RollbackTransactionCommand=KJ;var JJ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return YJ(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{updateResults:o=>xY(o,t)});return Object.assign(r,i),r};ie.de_BatchExecuteStatementCommand=JJ;var YJ=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await pu(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},XJ=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ZJ(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{transactionId:_.expectString});return Object.assign(r,i),r};ie.de_BeginTransactionCommand=XJ;var ZJ=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await pu(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},eY=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return tY(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{transactionStatus:_.expectString});return Object.assign(r,i),r};ie.de_CommitTransactionCommand=eY;var tY=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await kD(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await pu(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},rY=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return nY(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{sqlStatementResults:o=>SY(o,t)});return Object.assign(r,i),r};ie.de_ExecuteSqlCommand=rY;var nY=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},iY=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return oY(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{columnMetadata:_._json,formattedRecords:_.expectString,generatedFields:o=>Lw(o,t),numberOfRecordsUpdated:_.expectLong,records:o=>vY(o,t)});return Object.assign(r,i),r};ie.de_ExecuteStatementCommand=iY;var oY=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await pu(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},sY=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return aY(e,t);let r=(0,_.map)({$metadata:At(e)}),n=(0,_.expectNonNull)((0,_.expectObject)(await Zi(e.body,t)),"body"),i=(0,_.take)(n,{transactionStatus:_.expectString});return Object.assign(r,i),r};ie.de_RollbackTransactionCommand=sY;var aY=async(e,t)=>{let r={...e,body:await Zs(e.body,t)},n=ea(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Qs(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Ks(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Js(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ys(r,t);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await kD(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Xs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await pu(r,t);default:let i=r.body;return Gs({output:e,parsedBody:i,errorCode:n})}},Gs=(0,_.withBaseException)(VJ.RDSDataServiceException),Qs=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{message:_.expectString});Object.assign(r,i);let o=new _n.AccessDeniedException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},Ks=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{message:_.expectString});Object.assign(r,i);let o=new _n.BadRequestException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},Js=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{message:_.expectString});Object.assign(r,i);let o=new _n.ForbiddenException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},Ys=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{});Object.assign(r,i);let o=new _n.InternalServerErrorException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},kD=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{message:_.expectString});Object.assign(r,i);let o=new _n.NotFoundException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},Xs=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{});Object.assign(r,i);let o=new _n.ServiceUnavailableError({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},pu=async(e,t)=>{let r=(0,_.map)({}),n=e.body,i=(0,_.take)(n,{dbConnectionId:_.expectLong,message:_.expectString});Object.assign(r,i);let o=new _n.StatementTimeoutException({$metadata:At(e),...r});return(0,_.decorateServiceException)(o,e.body)},cY=(e,t)=>e.filter(r=>r!=null).map(r=>FD(r,t)),FD=(e,t)=>_n.ArrayValue.visit(e,{arrayValues:r=>({arrayValues:cY(r,t)}),booleanValues:r=>({booleanValues:(0,_._json)(r)}),doubleValues:r=>({doubleValues:uY(r,t)}),longValues:r=>({longValues:(0,_._json)(r)}),stringValues:r=>({stringValues:(0,_._json)(r)}),_:(r,n)=>({name:n})}),uY=(e,t)=>e.filter(r=>r!=null).map(r=>(0,_.serializeFloat)(r)),dY=(e,t)=>_n.Field.visit(e,{arrayValue:r=>({arrayValue:FD(r,t)}),blobValue:r=>({blobValue:t.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,_.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,n)=>({name:n})}),lY=(e,t)=>(0,_.take)(e,{name:[],typeHint:[],value:r=>dY(r,t)}),pY=(e,t)=>e.filter(r=>r!=null).map(r=>LD(r,t)),LD=(e,t)=>e.filter(r=>r!=null).map(r=>lY(r,t)),fY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>UD((0,_.expectUnion)(n),t)),UD=(e,t)=>e.arrayValues!=null?{arrayValues:fY(e.arrayValues,t)}:e.booleanValues!=null?{booleanValues:(0,_._json)(e.booleanValues)}:e.doubleValues!=null?{doubleValues:mY(e.doubleValues,t)}:e.longValues!=null?{longValues:(0,_._json)(e.longValues)}:e.stringValues!=null?{stringValues:(0,_._json)(e.stringValues)}:{$unknown:Object.entries(e)[0]},jD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>BD((0,_.expectUnion)(n),t)),mY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>(0,_.limitedParseDouble)(n)),hY=(e,t)=>e.arrayValue!=null?{arrayValue:UD((0,_.expectUnion)(e.arrayValue),t)}:e.blobValue!=null?{blobValue:t.base64Decoder(e.blobValue)}:(0,_.expectBoolean)(e.booleanValue)!==void 0?{booleanValue:(0,_.expectBoolean)(e.booleanValue)}:(0,_.limitedParseDouble)(e.doubleValue)!==void 0?{doubleValue:(0,_.limitedParseDouble)(e.doubleValue)}:(0,_.expectBoolean)(e.isNull)!==void 0?{isNull:(0,_.expectBoolean)(e.isNull)}:(0,_.expectLong)(e.longValue)!==void 0?{longValue:(0,_.expectLong)(e.longValue)}:(0,_.expectString)(e.stringValue)!==void 0?{stringValue:(0,_.expectString)(e.stringValue)}:{$unknown:Object.entries(e)[0]},Lw=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>hY((0,_.expectUnion)(n),t)),_Y=(e,t)=>(0,_.take)(e,{values:r=>EY(r,t)}),yY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>_Y(n,t)),gY=(e,t)=>(0,_.take)(e,{records:r=>yY(r,t),resultSetMetadata:_._json}),EY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>BD((0,_.expectUnion)(n),t)),vY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>Lw(n,t)),wY=(e,t)=>(0,_.take)(e,{numberOfRecordsUpdated:_.expectLong,resultFrame:r=>gY(r,t)}),SY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>wY(n,t)),bY=(e,t)=>(0,_.take)(e,{attributes:r=>jD(r,t)}),NY=(e,t)=>(0,_.take)(e,{generatedFields:r=>Lw(r,t)}),xY=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>NY(n,t)),BD=(e,t)=>e.arrayValues!=null?{arrayValues:jD(e.arrayValues,t)}:(0,_.expectLong)(e.bigIntValue)!==void 0?{bigIntValue:(0,_.expectLong)(e.bigIntValue)}:(0,_.expectBoolean)(e.bitValue)!==void 0?{bitValue:(0,_.expectBoolean)(e.bitValue)}:e.blobValue!=null?{blobValue:t.base64Decoder(e.blobValue)}:(0,_.limitedParseDouble)(e.doubleValue)!==void 0?{doubleValue:(0,_.limitedParseDouble)(e.doubleValue)}:(0,_.expectInt32)(e.intValue)!==void 0?{intValue:(0,_.expectInt32)(e.intValue)}:(0,_.expectBoolean)(e.isNull)!==void 0?{isNull:(0,_.expectBoolean)(e.isNull)}:(0,_.limitedParseFloat32)(e.realValue)!==void 0?{realValue:(0,_.limitedParseFloat32)(e.realValue)}:(0,_.expectString)(e.stringValue)!==void 0?{stringValue:(0,_.expectString)(e.stringValue)}:e.structValue!=null?{structValue:bY(e.structValue,t)}:{$unknown:Object.entries(e)[0]},At=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),CY=(e,t)=>(0,_.collectBody)(e,t).then(r=>t.utf8Encoder(r)),Zi=(e,t)=>CY(e,t).then(r=>r.length?JSON.parse(r):{}),Zs=async(e,t)=>{let r=await Zi(e,t);return r.message=r.message??r.Message,r},ea=(e,t)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var jw=c(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.BatchExecuteStatementCommand=ta.$Command=void 0;var OY=ee(),AY=_e(),VD=A();Object.defineProperty(ta,"$Command",{enumerable:!0,get:function(){return VD.Command}});var WD=eo(),Uw=class e extends VD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,AY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,OY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,WD.se_BatchExecuteStatementCommand)(t,r)}deserialize(t,r){return(0,WD.de_BatchExecuteStatementCommand)(t,r)}};ta.BatchExecuteStatementCommand=Uw});var Ww=c(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.BeginTransactionCommand=ra.$Command=void 0;var PY=ee(),TY=_e(),zD=A();Object.defineProperty(ra,"$Command",{enumerable:!0,get:function(){return zD.Command}});var $D=eo(),Bw=class e extends zD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,TY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,PY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,$D.se_BeginTransactionCommand)(t,r)}deserialize(t,r){return(0,$D.de_BeginTransactionCommand)(t,r)}};ra.BeginTransactionCommand=Bw});var $w=c(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.CommitTransactionCommand=na.$Command=void 0;var IY=ee(),RY=_e(),GD=A();Object.defineProperty(na,"$Command",{enumerable:!0,get:function(){return GD.Command}});var HD=eo(),Vw=class e extends GD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,RY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,IY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,HD.se_CommitTransactionCommand)(t,r)}deserialize(t,r){return(0,HD.de_CommitTransactionCommand)(t,r)}};na.CommitTransactionCommand=Vw});var Hw=c(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.ExecuteSqlCommand=ia.$Command=void 0;var qY=ee(),MY=_e(),KD=A();Object.defineProperty(ia,"$Command",{enumerable:!0,get:function(){return KD.Command}});var QD=eo(),zw=class e extends KD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,MY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,qY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,QD.se_ExecuteSqlCommand)(t,r)}deserialize(t,r){return(0,QD.de_ExecuteSqlCommand)(t,r)}};ia.ExecuteSqlCommand=zw});var Qw=c(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.ExecuteStatementCommand=oa.$Command=void 0;var DY=ee(),kY=_e(),YD=A();Object.defineProperty(oa,"$Command",{enumerable:!0,get:function(){return YD.Command}});var JD=eo(),Gw=class e extends YD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,kY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,DY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,JD.se_ExecuteStatementCommand)(t,r)}deserialize(t,r){return(0,JD.de_ExecuteStatementCommand)(t,r)}};oa.ExecuteStatementCommand=Gw});var Jw=c(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.RollbackTransactionCommand=sa.$Command=void 0;var FY=ee(),LY=_e(),ZD=A();Object.defineProperty(sa,"$Command",{enumerable:!0,get:function(){return ZD.Command}});var XD=eo(),Kw=class e extends ZD.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use((0,LY.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,FY.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:o}=r,u={logger:o,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:p=>p,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,XD.se_RollbackTransactionCommand)(t,r)}deserialize(t,r){return(0,XD.de_RollbackTransactionCommand)(t,r)}};sa.RollbackTransactionCommand=Kw});var ek=c(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.RDSData=void 0;var UY=A(),jY=jw(),BY=Ww(),WY=$w(),VY=Hw(),$Y=Qw(),zY=Jw(),HY=Aw(),GY={BatchExecuteStatementCommand:jY.BatchExecuteStatementCommand,BeginTransactionCommand:BY.BeginTransactionCommand,CommitTransactionCommand:WY.CommitTransactionCommand,ExecuteSqlCommand:VY.ExecuteSqlCommand,ExecuteStatementCommand:$Y.ExecuteStatementCommand,RollbackTransactionCommand:zY.RollbackTransactionCommand},Rh=class extends HY.RDSDataClient{};qh.RDSData=Rh;(0,UY.createAggregatedClient)(GY,Rh)});var tk=c(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var aa=(N(),S(b));aa.__exportStar(jw(),li);aa.__exportStar(Ww(),li);aa.__exportStar($w(),li);aa.__exportStar(Hw(),li);aa.__exportStar(Qw(),li);aa.__exportStar(Jw(),li)});var rk=c(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});var QY=(N(),S(b));QY.__exportStar(Fw(),Yw)});var nk=c(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.RDSDataServiceException=void 0;var Mh=(N(),S(b));Mh.__exportStar(Aw(),pi);Mh.__exportStar(ek(),pi);Mh.__exportStar(tk(),pi);Mh.__exportStar(rk(),pi);var KY=Ih();Object.defineProperty(pi,"RDSDataServiceException",{enumerable:!0,get:function(){return KY.RDSDataServiceException}})});import JY from"path";function gn(e){return typeof e>"u"||e===void 0}function Te(e){return typeof e=="string"}function r0(e){return typeof e=="number"}function mu(e){return typeof e=="boolean"}function hu(e){return e===null}function n0(e){return e instanceof Date}function i0(e){return typeof e=="bigint"}function fe(e){return typeof e=="function"}function $e(e){return typeof e=="object"&&e!==null}function o0(e){return e[e.length-1]}function d(e){return Object.freeze(e)}function Zt(e){return Array.isArray(e)}function En(e){return e}var se=d({is(e){return e.kind==="AlterTableNode"},create(e){return d({kind:"AlterTableNode",table:e})},cloneWithTableProps(e,t){return d({...e,...t})},cloneWithColumnAlteration(e,t){return d({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})}});var M=d({is(e){return e.kind==="IdentifierNode"},create(e){return d({kind:"IdentifierNode",name:e})}});var er=d({is(e){return e.kind==="CreateIndexNode"},create(e){return d({kind:"CreateIndexNode",name:M.create(e)})},cloneWith(e,t){return d({...e,...t})},cloneWithColumns(e,t){return d({...e,columns:[...e.columns||[],...t]})}});var _u=d({is(e){return e.kind==="CreateSchemaNode"},create(e,t){return d({kind:"CreateSchemaNode",schema:M.create(e),...t})},cloneWith(e,t){return d({...e,...t})}});var s0=["preserve rows","delete rows","drop"],_t=d({is(e){return e.kind==="CreateTableNode"},create(e){return d({kind:"CreateTableNode",table:e,columns:d([])})},cloneWithColumn(e,t){return d({...e,columns:d([...e.columns,t])})},cloneWithConstraint(e,t){return d({...e,constraints:e.constraints?d([...e.constraints,t]):d([t])})},cloneWithFrontModifier(e,t){return d({...e,frontModifiers:e.frontModifiers?d([...e.frontModifiers,t]):d([t])})},cloneWithEndModifier(e,t){return d({...e,endModifiers:e.endModifiers?d([...e.endModifiers,t]):d([t])})},cloneWith(e,t){return d({...e,...t})}});var ot=d({is(e){return e.kind==="SchemableIdentifierNode"},create(e){return d({kind:"SchemableIdentifierNode",identifier:M.create(e)})},createWithSchema(e,t){return d({kind:"SchemableIdentifierNode",schema:M.create(e),identifier:M.create(t)})}});var ro=d({is(e){return e.kind==="DropIndexNode"},create(e,t){return d({kind:"DropIndexNode",name:ot.create(e),...t})},cloneWith(e,t){return d({...e,...t})}});var ua=d({is(e){return e.kind==="DropSchemaNode"},create(e,t){return d({kind:"DropSchemaNode",schema:M.create(e),...t})},cloneWith(e,t){return d({...e,...t})}});var da=d({is(e){return e.kind==="DropTableNode"},create(e,t){return d({kind:"DropTableNode",table:e,...t})},cloneWith(e,t){return d({...e,...t})}});var st=d({is(e){return e.kind==="AliasNode"},create(e,t){return d({kind:"AliasNode",node:e,alias:t})}});var Pt=d({is(e){return e.kind==="TableNode"},create(e){return d({kind:"TableNode",table:ot.create(e)})},createWithSchema(e,t){return d({kind:"TableNode",table:ot.createWithSchema(e,t)})}});function me(e){return $e(e)&&fe(e.toOperationNode)}function a0(e){return $e(e)&&"expressionType"in e&&me(e)}function c0(e){return $e(e)&&"expression"in e&&Te(e.alias)&&me(e)}var tr=d({is(e){return e.kind==="SelectModifierNode"},create(e){return d({kind:"SelectModifierNode",modifier:e})},createWithExpression(e){return d({kind:"SelectModifierNode",rawModifier:e})}});var Fr=d({is(e){return e.kind==="AndNode"},create(e,t){return d({kind:"AndNode",left:e,right:t})}});var Lr=d({is(e){return e.kind==="OrNode"},create(e,t){return d({kind:"OrNode",left:e,right:t})}});var no=d({is(e){return e.kind==="OnNode"},create(e){return d({kind:"OnNode",on:e})},cloneWithOperation(e,t,r){return d({...e,on:t==="And"?Fr.create(e.on,r):Lr.create(e.on,r)})}});var ze=d({is(e){return e.kind==="JoinNode"},create(e,t){return d({kind:"JoinNode",joinType:e,table:t,on:void 0})},createWithOn(e,t,r){return d({kind:"JoinNode",joinType:e,table:t,on:no.create(r)})},cloneWithOn(e,t){return d({...e,on:e.on?no.cloneWithOperation(e.on,"And",t):no.create(t)})},cloneWithOrOn(e,t){return d({...e,on:e.on?no.cloneWithOperation(e.on,"Or",t):no.create(t)})}});var la=d({is(e){return e.kind==="BinaryOperationNode"},create(e,t,r){return d({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:r})}});var Ce=d({is(e){return e.kind==="RawNode"},create(e,t){return d({kind:"RawNode",sqlFragments:d(e),parameters:d(t)})},createWithSql(e){return Ce.create([e],[])},createWithChild(e){return Ce.create(["",""],[e])},createWithChildren(e){return Ce.create(new Array(e.length+1).fill(""),e)}});var u0=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->"],fk=["+","-","*","/","%","^","&","|","#","<<",">>"],d0=[...u0,...fk,"&&","||"],mk=["exists","not exists"],hk=["not","-",...mk],l0=[...d0,...hk],io=d({is(e){return e.kind==="OperatorNode"},create(e){return d({kind:"OperatorNode",operator:e})}});function Fh(e){return Te(e)&&d0.includes(e)}function Lh(e){return Te(e)&&u0.includes(e)}var vn=d({is(e){return e.kind==="ParensNode"},create(e){return d({kind:"ParensNode",node:e})}});var j=d({is(e){return e.kind==="ColumnNode"},create(e){return d({kind:"ColumnNode",column:M.create(e)})}});var oo=d({is(e){return e.kind==="SelectAllNode"},create(){return d({kind:"SelectAllNode"})}});var mi=d({is(e){return e.kind==="ReferenceNode"},create(e,t){return d({kind:"ReferenceNode",table:e,column:t})},createSelectAll(e){return d({kind:"ReferenceNode",table:e,column:oo.create()})}});var p0=d({is(e){return e.kind==="OrderByItemNode"},create(e,t){return d({kind:"OrderByItemNode",orderBy:e,direction:t})}});function f0(e){return e==="asc"||e==="desc"}function wn(e,t){return p0.create(_k(e),yk(t))}function _k(e){return yt(e)}function yk(e){if(e)return e==="asc"||e==="desc"?Ce.createWithSql(e):e.toOperationNode()}function Uh(e){return Te(e)?Ur(e):e.toOperationNode()}function jr(e){return Zt(e)?e.map(t=>yt(t)):[yt(e)]}function yt(e){return hi(e)?Sn(e):Uh(e)}function Ur(e){let t=".";if(e.includes(t)){let r=e.split(t).map(Wh);if(r.length===3)return gk(r);if(r.length===2)return Ek(r);throw new Error(`invalid column reference ${e}`)}else return j.create(e)}function m0(e){let t=" as ";if(e.includes(t)){let[r,n]=e.split(t).map(Wh);return st.create(Ur(r),M.create(n))}else return Ur(e)}function jh(e){return j.create(e)}function Bh(e){let t=" ";if(e.includes(t)){let[r,n]=e.split(t).map(Wh);if(!f0(n))throw new Error(`invalid order direction "${n}" next to "${r}"`);return wn(r,n)}else return jh(e)}function gk(e){let[t,r,n]=e;return mi.create(Pt.createWithSchema(t,r),j.create(n))}function Ek(e){let[t,r]=e;return mi.create(Pt.create(t),j.create(r))}function Wh(e){return e.trim()}var yu=d({is(e){return e.kind==="PrimitiveValueListNode"},create(e){return d({kind:"PrimitiveValueListNode",values:d([...e])})}});var so=d({is(e){return e.kind==="ValueListNode"},create(e){return d({kind:"ValueListNode",values:d(e)})}});var qe=d({is(e){return e.kind==="ValueNode"},create(e){return d({kind:"ValueNode",value:e})},createImmediate(e){return d({kind:"ValueNode",value:e,immediate:!0})}});function gu(e){return Zt(e)?vk(e):gt(e)}function gt(e){return hi(e)?Sn(e):qe.create(e)}function vk(e){return e.some(hi)?so.create(e.map(t=>gt(t))):yu.create(e)}var Br=d({is(e){return e.kind==="OrderByNode"},create(e){return d({kind:"OrderByNode",items:d([e])})},cloneWithItem(e,t){return d({...e,items:d([...e.items,t])})}});var Vh=d({is(e){return e.kind==="PartitionByNode"},create(e){return d({kind:"PartitionByNode",items:d(e)})},cloneWithItems(e,t){return d({...e,items:d([...e.items,...t])})}});var pa=d({is(e){return e.kind==="OverNode"},create(){return d({kind:"OverNode"})},cloneWithOrderByItem(e,t){return d({...e,orderBy:e.orderBy?Br.cloneWithItem(e.orderBy,t):Br.create(t)})},cloneWithPartitionByItems(e,t){return d({...e,partitionBy:e.partitionBy?Vh.cloneWithItems(e.partitionBy,t):Vh.create(t)})}});var _i=d({is(e){return e.kind==="FromNode"},create(e){return d({kind:"FromNode",froms:d(e)})},cloneWithFroms(e,t){return d({...e,froms:d([...e.froms,...t])})}});var $h=d({is(e){return e.kind==="GroupByNode"},create(e){return d({kind:"GroupByNode",items:d(e)})},cloneWithItems(e,t){return d({...e,items:d([...e.items,...t])})}});var fa=d({is(e){return e.kind==="HavingNode"},create(e){return d({kind:"HavingNode",having:e})},cloneWithOperation(e,t,r){return d({...e,having:t==="And"?Fr.create(e.having,r):Lr.create(e.having,r)})}});var T=d({is(e){return e.kind==="SelectQueryNode"},create(e,t){return d({kind:"SelectQueryNode",from:_i.create(e),...t&&{with:t}})},cloneWithSelections(e,t){return d({...e,selections:e.selections?d([...e.selections,...t]):d(t)})},cloneWithDistinctOn(e,t){return d({...e,distinctOn:e.distinctOn?d([...e.distinctOn,...t]):d(t)})},cloneWithFrontModifier(e,t){return d({...e,frontModifiers:e.frontModifiers?d([...e.frontModifiers,t]):d([t])})},cloneWithEndModifier(e,t){return d({...e,endModifiers:e.endModifiers?d([...e.endModifiers,t]):d([t])})},cloneWithOrderByItem(e,t){return d({...e,orderBy:e.orderBy?Br.cloneWithItem(e.orderBy,t):Br.create(t)})},cloneWithGroupByItems(e,t){return d({...e,groupBy:e.groupBy?$h.cloneWithItems(e.groupBy,t):$h.create(t)})},cloneWithLimit(e,t){return d({...e,limit:t})},cloneWithOffset(e,t){return d({...e,offset:t})},cloneWithHaving(e,t){return d({...e,having:e.having?fa.cloneWithOperation(e.having,"And",t):fa.create(t)})},cloneWithOrHaving(e,t){return d({...e,having:e.having?fa.cloneWithOperation(e.having,"Or",t):fa.create(t)})},cloneWithSetOperation(e,t){return d({...e,setOperations:e.setOperations?d([...e.setOperations,t]):d([t])})},cloneWithoutSelections(e){return d({...e,selections:[]})},cloneWithoutLimit(e){return d({...e,limit:void 0})},cloneWithoutOffset(e){return d({...e,offset:void 0})},cloneWithoutOrderBy(e){return d({...e,orderBy:void 0})}});var Eu=d({is(e){return e.kind==="UnaryOperationNode"},create(e,t){return d({kind:"UnaryOperationNode",operator:e,operand:t})}});function Ee(e){return vu("exists",e)}function he(e){return vu("not exists",e)}function vu(e,t){return Eu.create(io.create(e),yt(t))}function O(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw new Error(t)}}})}var ma=class e{#e;constructor(t){this.#e=d(t)}on(...t){return new e({...this.#e,joinNode:ze.cloneWithOn(this.#e.joinNode,zh(t))})}orOn(...t){return new e({...this.#e,joinNode:ze.cloneWithOrOn(this.#e.joinNode,zh(t))})}onRef(t,r,n){return new e({...this.#e,joinNode:ze.cloneWithOn(this.#e.joinNode,ae(t,r,n))})}orOnRef(t,r,n){return new e({...this.#e,joinNode:ze.cloneWithOrOn(this.#e.joinNode,ae(t,r,n))})}onExists(t){return new e({...this.#e,joinNode:ze.cloneWithOn(this.#e.joinNode,Ee(t))})}onNotExists(t){return new e({...this.#e,joinNode:ze.cloneWithOn(this.#e.joinNode,he(t))})}orOnExists(t){return new e({...this.#e,joinNode:ze.cloneWithOrOn(this.#e.joinNode,Ee(t))})}orOnNotExists(t){return new e({...this.#e,joinNode:ze.cloneWithOrOn(this.#e.joinNode,he(t))})}onTrue(){return new e({...this.#e,joinNode:ze.cloneWithOn(this.#e.joinNode,Ce.createWithSql("true"))})}$call(t){return t(this)}toOperationNode(){return this.#e.joinNode}};O(ma,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var h0=d({is(e){return e.kind==="PartitionByItemNode"},create(e){return d({kind:"PartitionByItemNode",partitionBy:e})}});function _0(e){return jr(e).map(h0.create)}var ha=class e{#e;constructor(t){this.#e=d(t)}orderBy(t,r){return new e({overNode:pa.cloneWithOrderByItem(this.#e.overNode,wn(t,r))})}partitionBy(t){return new e({overNode:pa.cloneWithPartitionByItems(this.#e.overNode,_0(t))})}$call(t){return t(this)}toOperationNode(){return this.#e.overNode}};O(ha,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var ao=d({is(e){return e.kind==="SelectionNode"},create(e){return d({kind:"SelectionNode",selection:e})},createSelectAll(){return d({kind:"SelectionNode",selection:oo.create()})},createSelectAllFromTable(e){return d({kind:"SelectionNode",selection:mi.createSelectAll(e)})}});var wu=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(t){this.#e=t}toOperationNode(){return Uh(this.#e)}};function y0(e){return $e(e)&&me(e)&&Te(e.dynamicReference)}function Wr(e){return fe(e)?Wr(e(Ye())):Zt(e)?e.map(t=>g0(t)):[g0(e)]}function g0(e){return Te(e)?ao.create(m0(e)):y0(e)?ao.create(e.toOperationNode()):ao.create(Su(e))}function rr(e){return e?Array.isArray(e)?e.map(E0):[E0(e)]:[ao.createSelectAll()]}function E0(e){if(Te(e))return ao.createSelectAllFromTable(ve(e));throw new Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}var v0=d({is(e){return e.kind==="ValuesNode"},create(e){return d({kind:"ValuesNode",values:d(e)})}});var w0=d({is(e){return e.kind==="DefaultInsertValueNode"},create(){return d({kind:"DefaultInsertValueNode"})}});function S0(e){let t=fe(e)?e(Ye()):e,r=Zt(t)?t:d([t]);return wk(r)}function wk(e){let t=Sk(e);return[d([...t.keys()].map(j.create)),v0.create(e.map(r=>bk(r,t)))]}function Sk(e){let t=new Map;for(let r of e){let n=Object.keys(r);for(let i of n)!t.has(i)&&r[i]!==void 0&&t.set(i,t.size)}return t}function bk(e,t){let r=Object.keys(e),n=Array.from({length:t.size}),i=!1;for(let s of r){let a=t.get(s);if(gn(a))continue;let u=e[s];(gn(u)||hi(u))&&(i=!0),n[a]=u}if(r.length<t.size||i){let s=w0.create();return so.create(n.map(a=>gn(a)?s:gt(a)))}return yu.create(n)}var at=d({is(e){return e.kind==="InsertQueryNode"},create(e,t,r){return d({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:r})},cloneWith(e,t){return d({...e,...t})}});var yi=d({is(e){return e.kind==="UpdateQueryNode"},create(e,t){return d({kind:"UpdateQueryNode",table:e,...t&&{with:t}})},cloneWithFromItems(e,t){return d({...e,from:e.from?_i.cloneWithFroms(e.from,t):_i.create(t)})},cloneWithUpdates(e,t){return d({...e,updates:e.updates?d([...e.updates,...t]):t})}});var Hh=d({is(e){return e.kind==="UsingNode"},create(e){return d({kind:"UsingNode",tables:d(e)})},cloneWithTables(e,t){return d({...e,tables:d([...e.tables,...t])})}});var bn=d({is(e){return e.kind==="DeleteQueryNode"},create(e,t){return d({kind:"DeleteQueryNode",from:_i.create(e),...t&&{with:t}})},cloneWithOrderByItem(e,t){return d({...e,orderBy:e.orderBy?Br.cloneWithItem(e.orderBy,t):Br.create(t)})},cloneWithLimit(e,t){return d({...e,limit:t})},cloneWithUsing(e,t){return d({...e,using:e.using!==void 0?Hh.cloneWithTables(e.using,t):Hh.create(t)})}});var Ie=d({is(e){return e.kind==="WhereNode"},create(e){return d({kind:"WhereNode",where:e})},cloneWithOperation(e,t,r){return d({...e,where:t==="And"?Fr.create(e.where,r):Lr.create(e.where,r)})}});var Gh=d({is(e){return e.kind==="ReturningNode"},create(e){return d({kind:"ReturningNode",selections:d(e)})},cloneWithSelections(e,t){return d({...e,selections:e.selections?d([...e.selections,...t]):d(t)})}});var b0=d({is(e){return e.kind==="ExplainNode"},create(e,t){return d({kind:"ExplainNode",format:e,options:t})}});var C=d({is(e){return T.is(e)||at.is(e)||yi.is(e)||bn.is(e)},cloneWithWhere(e,t){return d({...e,where:e.where?Ie.cloneWithOperation(e.where,"And",t):Ie.create(t)})},cloneWithOrWhere(e,t){return d({...e,where:e.where?Ie.cloneWithOperation(e.where,"Or",t):Ie.create(t)})},cloneWithJoin(e,t){return d({...e,joins:e.joins?d([...e.joins,t]):d([t])})},cloneWithReturning(e,t){return d({...e,returning:e.returning?Gh.cloneWithSelections(e.returning,t):Gh.create(t)})},cloneWithoutWhere(e){return d({...e,where:void 0})},cloneWithExplain(e,t,r){return d({...e,explain:b0.create(t,r?.toOperationNode())})}});var N0=d({is(e){return e.kind==="ColumnUpdateNode"},create(e,t){return d({kind:"ColumnUpdateNode",column:e,value:t})}});function co(e){let t=fe(e)?e(Ye()):e;return Object.entries(t).filter(([r,n])=>n!==void 0).map(([r,n])=>N0.create(j.create(r),gt(n)))}var x0=d({is(e){return e.kind==="OnDuplicateKeyNode"},create(e){return d({kind:"OnDuplicateKeyNode",updates:e})}});var _a=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};for(let e of["insertId","numInsertedOrUpdatedRows"])Object.defineProperty(_a.prototype,e,{enumerable:!0});var nr=class extends Error{node;constructor(t){super("no result"),this.node=t}};function Nn(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}var Y=d({is(e){return e.kind==="OnConflictNode"},create(){return d({kind:"OnConflictNode"})},cloneWith(e,t){return d({...e,...t})},cloneWithIndexWhere(e,t){return d({...e,indexWhere:e.indexWhere?Ie.cloneWithOperation(e.indexWhere,"And",t):Ie.create(t)})},cloneWithIndexOrWhere(e,t){return d({...e,indexWhere:e.indexWhere?Ie.cloneWithOperation(e.indexWhere,"Or",t):Ie.create(t)})},cloneWithUpdateWhere(e,t){return d({...e,updateWhere:e.updateWhere?Ie.cloneWithOperation(e.updateWhere,"And",t):Ie.create(t)})},cloneWithUpdateOrWhere(e,t){return d({...e,updateWhere:e.updateWhere?Ie.cloneWithOperation(e.updateWhere,"Or",t):Ie.create(t)})},cloneWithoutIndexWhere(e){return d({...e,indexWhere:void 0})},cloneWithoutUpdateWhere(e){return d({...e,updateWhere:void 0})}});var ya=class e{#e;constructor(t){this.#e=d(t)}column(t){let r=j.create(t);return new e({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,r]):d([r])})})}columns(t){let r=t.map(j.create);return new e({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,...r]):d(r)})})}constraint(t){return new e({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{constraint:M.create(t)})})}expression(t){return new e({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{indexExpression:t.toOperationNode()})})}where(...t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexWhere(this.#e.onConflictNode,Re(t))})}whereRef(t,r,n){return new e({...this.#e,onConflictNode:Y.cloneWithIndexWhere(this.#e.onConflictNode,ae(t,r,n))})}orWhere(...t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexOrWhere(this.#e.onConflictNode,Re(t))})}orWhereRef(t,r,n){return new e({...this.#e,onConflictNode:Y.cloneWithIndexOrWhere(this.#e.onConflictNode,ae(t,r,n))})}whereExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexWhere(this.#e.onConflictNode,Ee(t))})}whereNotExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexWhere(this.#e.onConflictNode,he(t))})}orWhereExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexOrWhere(this.#e.onConflictNode,Ee(t))})}orWhereNotExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithIndexOrWhere(this.#e.onConflictNode,he(t))})}clearWhere(){return new e({...this.#e,onConflictNode:Y.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new bu({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(t){return new Nu({...this.#e,onConflictNode:Y.cloneWith(this.#e.onConflictNode,{updates:co(t)})})}$call(t){return t(this)}};O(ya,"don't await OnConflictBuilder instances.");var bu=class{#e;constructor(t){this.#e=d(t)}toOperationNode(){return this.#e.onConflictNode}};O(bu,"don't await OnConflictDoNothingBuilder instances.");var Nu=class e{#e;constructor(t){this.#e=d(t)}where(...t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateWhere(this.#e.onConflictNode,Re(t))})}whereRef(t,r,n){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateWhere(this.#e.onConflictNode,ae(t,r,n))})}orWhere(...t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateOrWhere(this.#e.onConflictNode,Re(t))})}orWhereRef(t,r,n){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateOrWhere(this.#e.onConflictNode,ae(t,r,n))})}whereExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateWhere(this.#e.onConflictNode,Ee(t))})}whereNotExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateWhere(this.#e.onConflictNode,he(t))})}orWhereExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateOrWhere(this.#e.onConflictNode,Ee(t))})}orWhereNotExists(t){return new e({...this.#e,onConflictNode:Y.cloneWithUpdateOrWhere(this.#e.onConflictNode,he(t))})}clearWhere(){return new e({...this.#e,onConflictNode:Y.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(t){return t(this)}toOperationNode(){return this.#e.onConflictNode}};O(Nu,"don't await OnConflictUpdateBuilder instances.");var uo=class e{#e;constructor(t){this.#e=d(t)}values(t){let[r,n]=S0(t);return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{columns:r,values:n})})}columns(t){return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{columns:d(t.map(j.create))})})}expression(t){return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{values:Sn(t)})})}ignore(){return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(t){return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{onConflict:t(new ya({onConflictNode:Y.create()})).toOperationNode()})})}onDuplicateKeyUpdate(t){return new e({...this.#e,queryNode:at.cloneWith(this.#e.queryNode,{onDuplicateKey:x0.create(co(t))})})}returning(t){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,Wr(t))})}returningAll(){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,rr())})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return t?r(this):new e({...this.#e})}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new _a(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw Nn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:C.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(uo,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var ga=class{#e;constructor(t){this.#e=t}get numDeletedRows(){return this.#e}};Object.defineProperty(ga.prototype,"numDeletedRows",{enumerable:!0});var xu=d({is(e){return e.kind==="LimitNode"},create(e){return d({kind:"LimitNode",limit:qe.create(e)})}});var Ea=class e{#e;constructor(t){this.#e=d(t)}where(...t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Re(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,ae(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Re(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,ae(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Ee(t))})}whereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,he(t))})}orWhereExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Ee(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,he(t))})}clearWhere(){return new e({...this.#e,queryNode:C.cloneWithoutWhere(this.#e.queryNode)})}using(t){return new e({...this.#e,queryNode:bn.cloneWithUsing(this.#e.queryNode,zt(t))})}innerJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",t))})}returning(t){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,Wr(t))})}returningAll(t){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,rr(t))})}orderBy(t,r){return new e({...this.#e,queryNode:bn.cloneWithOrderByItem(this.#e.queryNode,wn(t,r))})}limit(t){return new e({...this.#e,queryNode:bn.cloneWithLimit(this.#e.queryNode,xu.create(t))})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new ga(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw Nn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:C.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(Ea,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var va=class{#e;constructor(t){this.#e=t}get numUpdatedRows(){return this.#e}};Object.defineProperty(va.prototype,"numUpdatedRows",{enumerable:!0});var wa=class e{#e;constructor(t){this.#e=d(t)}where(...t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Re(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,ae(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Re(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,ae(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Ee(t))})}whereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,he(t))})}orWhereExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Ee(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,he(t))})}clearWhere(){return new e({...this.#e,queryNode:C.cloneWithoutWhere(this.#e.queryNode)})}from(t){return new e({...this.#e,queryNode:yi.cloneWithFromItems(this.#e.queryNode,zt(t))})}innerJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",t))})}set(t){return new e({...this.#e,queryNode:yi.cloneWithUpdates(this.#e.queryNode,co(t))})}returning(t){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,Wr(t))})}returningAll(){return new e({...this.#e,queryNode:C.cloneWithReturning(this.#e.queryNode,rr())})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new va(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw Nn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:C.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(wa,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var C0=d({is(e){return e.kind==="CommonTableExpressionNode"},create(e,t){return d({kind:"CommonTableExpressionNode",name:e,expression:t})}});var Qh=d({is(e){return e.kind==="CommonTableExpressionNameNode"},create(e,t){return d({kind:"CommonTableExpressionNameNode",table:Pt.create(e),columns:t?d(t.map(j.create)):void 0})}});function Kh(e,t){let r=t(O0());return C0.create(Nk(e),r.toOperationNode())}function Nk(e){if(e.includes("(")){let t=e.split(/[\(\)]/),r=t[0],n=t[1].split(",").map(i=>i.trim());return Qh.create(r,n)}else return Qh.create(e)}var Sa=d({is(e){return e.kind==="WithNode"},create(e,t){return d({kind:"WithNode",expressions:d([e]),...t})},cloneWithExpression(e,t){return d({...e,expressions:d([...e.expressions,t])})}});var A0=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function P0(e){let t="";for(let r=0;r<e;++r)t+=xk();return t}function xk(){return A0[~~(Math.random()*A0.length)]}function V(){return new Jh}var Jh=class{#e;get queryId(){return this.#e===void 0&&(this.#e=P0(8)),this.#e}};var lo=class{nodeStack=[];#e=d({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this)});transformNode(t){if(!t)return t;this.nodeStack.push(t);let r=this.transformNodeImpl(t);return this.nodeStack.pop(),d(r)}transformNodeImpl(t){return this.#e[t.kind](t)}transformNodeList(t){return t&&d(t.map(r=>this.transformNode(r)))}transformSelectQuery(t){return{kind:"SelectQueryNode",from:this.transformNode(t.from),selections:this.transformNodeList(t.selections),distinctOn:this.transformNodeList(t.distinctOn),joins:this.transformNodeList(t.joins),groupBy:this.transformNode(t.groupBy),orderBy:this.transformNode(t.orderBy),where:this.transformNode(t.where),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),limit:this.transformNode(t.limit),offset:this.transformNode(t.offset),with:this.transformNode(t.with),having:this.transformNode(t.having),explain:this.transformNode(t.explain),setOperations:this.transformNodeList(t.setOperations)}}transformSelection(t){return{kind:"SelectionNode",selection:this.transformNode(t.selection)}}transformColumn(t){return{kind:"ColumnNode",column:this.transformNode(t.column)}}transformAlias(t){return{kind:"AliasNode",node:this.transformNode(t.node),alias:this.transformNode(t.alias)}}transformTable(t){return{kind:"TableNode",table:this.transformNode(t.table)}}transformFrom(t){return{kind:"FromNode",froms:this.transformNodeList(t.froms)}}transformReference(t){return{kind:"ReferenceNode",table:this.transformNode(t.table),column:this.transformNode(t.column)}}transformAnd(t){return{kind:"AndNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformOr(t){return{kind:"OrNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformValueList(t){return{kind:"ValueListNode",values:this.transformNodeList(t.values)}}transformParens(t){return{kind:"ParensNode",node:this.transformNode(t.node)}}transformJoin(t){return{kind:"JoinNode",joinType:t.joinType,table:this.transformNode(t.table),on:this.transformNode(t.on)}}transformRaw(t){return{kind:"RawNode",sqlFragments:d([...t.sqlFragments]),parameters:this.transformNodeList(t.parameters)}}transformWhere(t){return{kind:"WhereNode",where:this.transformNode(t.where)}}transformInsertQuery(t){return{kind:"InsertQueryNode",into:this.transformNode(t.into),columns:this.transformNodeList(t.columns),values:this.transformNode(t.values),returning:this.transformNode(t.returning),onConflict:this.transformNode(t.onConflict),onDuplicateKey:this.transformNode(t.onDuplicateKey),with:this.transformNode(t.with),ignore:t.ignore,replace:t.replace,explain:this.transformNode(t.explain)}}transformValues(t){return{kind:"ValuesNode",values:this.transformNodeList(t.values)}}transformDeleteQuery(t){return{kind:"DeleteQueryNode",from:this.transformNode(t.from),using:this.transformNode(t.using),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),returning:this.transformNode(t.returning),with:this.transformNode(t.with),orderBy:this.transformNode(t.orderBy),limit:this.transformNode(t.limit),explain:this.transformNode(t.explain)}}transformReturning(t){return{kind:"ReturningNode",selections:this.transformNodeList(t.selections)}}transformCreateTable(t){return{kind:"CreateTableNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),constraints:this.transformNodeList(t.constraints),temporary:t.temporary,ifNotExists:t.ifNotExists,onCommit:t.onCommit,frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers)}}transformColumnDefinition(t){return{kind:"ColumnDefinitionNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),references:this.transformNode(t.references),primaryKey:t.primaryKey,autoIncrement:t.autoIncrement,unique:t.unique,notNull:t.notNull,unsigned:t.unsigned,defaultTo:this.transformNode(t.defaultTo),check:this.transformNode(t.check),generated:this.transformNode(t.generated),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers)}}transformAddColumn(t){return{kind:"AddColumnNode",column:this.transformNode(t.column)}}transformDropTable(t){return{kind:"DropTableNode",table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformOrderBy(t){return{kind:"OrderByNode",items:this.transformNodeList(t.items)}}transformOrderByItem(t){return{kind:"OrderByItemNode",orderBy:this.transformNode(t.orderBy),direction:this.transformNode(t.direction)}}transformGroupBy(t){return{kind:"GroupByNode",items:this.transformNodeList(t.items)}}transformGroupByItem(t){return{kind:"GroupByItemNode",groupBy:this.transformNode(t.groupBy)}}transformUpdateQuery(t){return{kind:"UpdateQueryNode",table:this.transformNode(t.table),from:this.transformNode(t.from),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),updates:this.transformNodeList(t.updates),returning:this.transformNode(t.returning),with:this.transformNode(t.with),explain:this.transformNode(t.explain)}}transformColumnUpdate(t){return{kind:"ColumnUpdateNode",column:this.transformNode(t.column),value:this.transformNode(t.value)}}transformLimit(t){return{kind:"LimitNode",limit:this.transformNode(t.limit)}}transformOffset(t){return{kind:"OffsetNode",offset:this.transformNode(t.offset)}}transformOnConflict(t){return{kind:"OnConflictNode",columns:this.transformNodeList(t.columns),constraint:this.transformNode(t.constraint),indexExpression:this.transformNode(t.indexExpression),indexWhere:this.transformNode(t.indexWhere),updates:this.transformNodeList(t.updates),updateWhere:this.transformNode(t.updateWhere),doNothing:t.doNothing}}transformOnDuplicateKey(t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(t.updates)}}transformCreateIndex(t){return{kind:"CreateIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists,where:this.transformNode(t.where)}}transformList(t){return{kind:"ListNode",items:this.transformNodeList(t.items)}}transformDropIndex(t){return{kind:"DropIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformPrimaryKeyConstraint(t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformUniqueConstraint(t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformForeignKeyConstraint(t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(t.columns),references:this.transformNode(t.references),name:this.transformNode(t.name),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformSetOperation(t){return{kind:"SetOperationNode",operator:t.operator,expression:this.transformNode(t.expression),all:t.all}}transformReferences(t){return{kind:"ReferencesNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformCheckConstraint(t){return{kind:"CheckConstraintNode",expression:this.transformNode(t.expression),name:this.transformNode(t.name)}}transformWith(t){return{kind:"WithNode",expressions:this.transformNodeList(t.expressions),recursive:t.recursive}}transformCommonTableExpression(t){return{kind:"CommonTableExpressionNode",name:this.transformNode(t.name),expression:this.transformNode(t.expression)}}transformCommonTableExpressionName(t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns)}}transformHaving(t){return{kind:"HavingNode",having:this.transformNode(t.having)}}transformCreateSchema(t){return{kind:"CreateSchemaNode",schema:this.transformNode(t.schema),ifNotExists:t.ifNotExists}}transformDropSchema(t){return{kind:"DropSchemaNode",schema:this.transformNode(t.schema),ifExists:t.ifExists,cascade:t.cascade}}transformAlterTable(t){return{kind:"AlterTableNode",table:this.transformNode(t.table),renameTo:this.transformNode(t.renameTo),setSchema:this.transformNode(t.setSchema),columnAlterations:this.transformNodeList(t.columnAlterations),addConstraint:this.transformNode(t.addConstraint),dropConstraint:this.transformNode(t.dropConstraint)}}transformDropColumn(t){return{kind:"DropColumnNode",column:this.transformNode(t.column)}}transformRenameColumn(t){return{kind:"RenameColumnNode",column:this.transformNode(t.column),renameTo:this.transformNode(t.renameTo)}}transformAlterColumn(t){return{kind:"AlterColumnNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),dataTypeExpression:this.transformNode(t.dataTypeExpression),setDefault:this.transformNode(t.setDefault),dropDefault:t.dropDefault,setNotNull:t.setNotNull,dropNotNull:t.dropNotNull}}transformModifyColumn(t){return{kind:"ModifyColumnNode",column:this.transformNode(t.column)}}transformAddConstraint(t){return{kind:"AddConstraintNode",constraint:this.transformNode(t.constraint)}}transformDropConstraint(t){return{kind:"DropConstraintNode",constraintName:this.transformNode(t.constraintName),ifExists:t.ifExists,modifier:t.modifier}}transformCreateView(t){return{kind:"CreateViewNode",name:this.transformNode(t.name),temporary:t.temporary,orReplace:t.orReplace,ifNotExists:t.ifNotExists,materialized:t.materialized,columns:this.transformNodeList(t.columns),as:this.transformNode(t.as)}}transformDropView(t){return{kind:"DropViewNode",name:this.transformNode(t.name),ifExists:t.ifExists,materialized:t.materialized,cascade:t.cascade}}transformGenerated(t){return{kind:"GeneratedNode",byDefault:t.byDefault,always:t.always,identity:t.identity,stored:t.stored,expression:this.transformNode(t.expression)}}transformDefaultValue(t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(t.defaultValue)}}transformOn(t){return{kind:"OnNode",on:this.transformNode(t.on)}}transformSelectModifier(t){return{kind:"SelectModifierNode",modifier:t.modifier,rawModifier:this.transformNode(t.rawModifier)}}transformCreateType(t){return{kind:"CreateTypeNode",name:this.transformNode(t.name),enum:this.transformNode(t.enum)}}transformDropType(t){return{kind:"DropTypeNode",name:this.transformNode(t.name),ifExists:t.ifExists}}transformExplain(t){return{kind:"ExplainNode",format:t.format,options:this.transformNode(t.options)}}transformSchemableIdentifier(t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(t.schema),identifier:this.transformNode(t.identifier)}}transformAggregateFunction(t){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(t.aggregated),distinct:t.distinct,filter:this.transformNode(t.filter),func:t.func,over:this.transformNode(t.over)}}transformOver(t){return{kind:"OverNode",orderBy:this.transformNode(t.orderBy),partitionBy:this.transformNode(t.partitionBy)}}transformPartitionBy(t){return{kind:"PartitionByNode",items:this.transformNodeList(t.items)}}transformPartitionByItem(t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(t.partitionBy)}}transformBinaryOperation(t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(t.leftOperand),operator:this.transformNode(t.operator),rightOperand:this.transformNode(t.rightOperand)}}transformUnaryOperation(t){return{kind:"UnaryOperationNode",operator:this.transformNode(t.operator),operand:this.transformNode(t.operand)}}transformUsing(t){return{kind:"UsingNode",tables:this.transformNodeList(t.tables)}}transformFunction(t){return{kind:"FunctionNode",func:t.func,arguments:this.transformNodeList(t.arguments)}}transformCase(t){return{kind:"CaseNode",value:this.transformNode(t.value),when:this.transformNodeList(t.when),else:this.transformNode(t.else),isStatement:t.isStatement}}transformWhen(t){return{kind:"WhenNode",condition:this.transformNode(t.condition),result:this.transformNode(t.result)}}transformDataType(t){return t}transformSelectAll(t){return t}transformIdentifier(t){return t}transformValue(t){return t}transformPrimitiveValueList(t){return t}transformOperator(t){return t}transformDefaultInsertValue(t){return t}};var Ck=d({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Cu=class extends lo{#e;#t=new Set;constructor(t){super(),this.#e=t}transformNodeImpl(t){if(!this.#r(t))return super.transformNodeImpl(t);let r=this.#n(t);for(let i of r)this.#t.add(i);let n=super.transformNodeImpl(t);for(let i of r)this.#t.delete(i);return n}transformSchemableIdentifier(t){let r=super.transformSchemableIdentifier(t);return r.schema||!this.#t.has(t.identifier.name)?r:{...r,schema:M.create(this.#e)}}transformReferences(t){let r=super.transformReferences(t);return r.table.table.schema?r:{...r,table:Pt.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(t){return t.kind in Ck}#n(t){let r=new Set;if("name"in t&&t.name&&ot.is(t.name)&&this.#o(t.name,r),"from"in t&&t.from)for(let n of t.from.froms)this.#i(n,r);if("into"in t&&t.into&&this.#i(t.into,r),"table"in t&&t.table&&this.#i(t.table,r),"joins"in t&&t.joins)for(let n of t.joins)this.#i(n.table,r);return"with"in t&&t.with&&this.#s(t.with,r),r}#i(t,r){let n=Pt.is(t)?t:st.is(t)&&Pt.is(t.node)?t.node:null;n&&this.#o(n.table,r)}#o(t,r){this.#t.has(t.identifier.name)||r.add(t.identifier.name)}#s(t,r){for(let n of t.expressions)r.delete(n.name.table.table.identifier.name)}};var Et=class{#e;constructor(t){this.#e=new Cu(t)}transformQuery(t){return this.#e.transformNode(t.node)}async transformResult(t){return t.result}};var po=class e{#e;constructor(t){this.#e=d(t)}selectFrom(t){return new Vr({queryId:V(),executor:this.#e.executor,queryNode:T.create(zt(t),this.#e.withNode)})}insertInto(t){return new uo({queryId:V(),executor:this.#e.executor,queryNode:at.create(ve(t),this.#e.withNode)})}replaceInto(t){return new uo({queryId:V(),executor:this.#e.executor,queryNode:at.create(ve(t),this.#e.withNode,!0)})}deleteFrom(t){return new Ea({queryId:V(),executor:this.#e.executor,queryNode:bn.create(zt(t),this.#e.withNode)})}updateTable(t){return new wa({queryId:V(),executor:this.#e.executor,queryNode:yi.create(xn(t),this.#e.withNode)})}with(t,r){let n=Kh(t,r);return new e({...this.#e,withNode:this.#e.withNode?Sa.cloneWithExpression(this.#e.withNode,n):Sa.create(n)})}withRecursive(t,r){let n=Kh(t,r);return new e({...this.#e,withNode:this.#e.withNode?Sa.cloneWithExpression(this.#e.withNode,n):Sa.create(n,{recursive:!0})})}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new Et(t))})}};var ba=class{#e;#t;#r;constructor(){this.#e=new Promise((t,r)=>{this.#r=r,this.#t=t})}get promise(){return this.#e}resolve=t=>{this.#t&&this.#t(t)};reject=t=>{this.#r&&this.#r(t)}};var T0=new Set;function I0(e){T0.has(e)||(T0.add(e),console.log(e))}var Ok=d([]),fo=class{#e;constructor(t=Ok){this.#e=t}get plugins(){return this.#e}transformQuery(t,r){for(let n of this.#e){let i=n.transformQuery({node:t,queryId:r});if(i.kind===t.kind)t=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${t.kind}`,`but it returned a ${i.kind}`].join(" "))}return t}async executeQuery(t,r){return await this.provideConnection(async n=>{let i=await n.executeQuery(t),o=await this.#t(i,r);return Ak(i,o),o})}async*stream(t,r,n){let i=new ba,o=new ba;this.provideConnection(async a=>(i.resolve(a),await o.promise)).catch(a=>i.reject(a));let s=await i.promise;try{for await(let a of s.streamQuery(t,r))yield await this.#t(a,n)}finally{o.resolve()}}async#t(t,r){for(let n of this.#e)t=await n.transformResult({result:t,queryId:r});return t}};function Ak(e,t){let{numAffectedRows:r}=e;r===void 0&&e.numUpdatedOrDeletedRows===void 0||r!==void 0&&t.numAffectedRows!==void 0||I0("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}var Yh=class e extends fo{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(t){return new e([...this.plugins,t])}withPlugins(t){return new e([...this.plugins,...t])}withPluginAtFront(t){return new e([t,...this.plugins])}withoutPlugins(){return new e([])}},gi=new Yh;function Xh(){return new Vr({queryId:V(),executor:gi,queryNode:T.create(zt([]))})}function O0(){return new po({executor:gi})}function Ou(e,t){return new ma({joinNode:ze.create(e,xn(t))})}function R0(){return new ha({overNode:pa.create()})}var Na=d({is(e){return e.kind==="WhenNode"},create(e){return d({kind:"WhenNode",condition:e})},cloneWithResult(e,t){return d({...e,result:t})}});var Xe=d({is(e){return e.kind==="CaseNode"},create(e){return d({kind:"CaseNode",value:e})},cloneWithWhen(e,t){return d({...e,when:d(e.when?[...e.when,t]:[t])})},cloneWithThen(e,t){return d({...e,when:e.when?d([...e.when.slice(0,-1),Na.cloneWithResult(e.when[e.when.length-1],t)]):void 0})},cloneWith(e,t){return d({...e,...t})}});function Au(e,t,r){if(!Fh(t)&&!me(t))throw new Error(`invalid binary operator ${JSON.stringify(t)}`);return Ik(t,r)?Rk(e,t,r):la.create(yt(e),t_(t),gu(r))}function Pk(e,t,r){if(!Fh(t)&&!me(t))throw new Error(`invalid binary operator ${JSON.stringify(t)}`);return la.create(yt(e),t_(t),yt(r))}function Tk(e,t,r){if(!Lh(t)&&!me(t))throw new Error(`invalid comparison operator ${JSON.stringify(t)}`);return Au(e,t,r)}function ae(e,t,r){if(!Lh(t)&&!me(t))throw new Error(`invalid comparison operator ${JSON.stringify(t)}`);return Pk(e,t,r)}function Re(e){return Pu("where",e)}function Zh(e){return Pu("having",e)}function zh(e){return Pu("on",e)}function e_(e){return Pu("when",e)}function Pu(e,t){if(t.length===3)return Tk(t[0],t[1],t[2]);if(t.length===1)return qk(e,t[0]);throw q0(e,t)}function Ik(e,t){return(e==="is"||e==="is not")&&(hu(t)||mu(t))}function Rk(e,t,r){return la.create(yt(e),t_(t),qe.createImmediate(r))}function t_(e){if(Te(e)&&l0.includes(e))return io.create(e);if(me(e))return e.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(e)}`)}function qk(e,t){if(fe(t)){if(e==="when")throw new Error("when method doesn't accept a callback as an argument");return Mk[e](t)}else if(me(t)){let r=t.toOperationNode();if(Ce.is(r)||la.is(r)||Eu.is(r)||vn.is(r)||Xe.is(r))return r}else if(e==="when")return qe.create(t);throw q0(e,t)}function q0(e,t){return new Error(`invalid arguments passed to a '${e}' method: ${JSON.stringify(t)}`)}var Mk=d({where(e){let t=Xh(),r=Ye(),i=e(Object.assign(t,r)).toOperationNode();if(T.is(i)){if(!i.where)throw new Error("no `where` methods called inside a group callback");return vn.create(i.where.where)}else return i},having(e){let t=Xh(),r=Ye(),i=e(Object.assign(t,r)).toOperationNode();if(T.is(i)){if(!i.having)throw new Error("no `having` methods called inside a group callback");return vn.create(i.having.having)}else return i},on(e){let t=Ou("InnerJoin","table"),r=Ye(),i=e(Object.assign(t,r)).toOperationNode();if(ze.is(i)){if(!i.on)throw new Error("no `on` methods called inside a group callback");return vn.create(i.on.on)}else return i}});function Ue(e,t){if(t.length===3)return kk(e,t[0],t[1],t[2]);if(t.length===2)return Dk(e,t[0],t[1]);throw new Error("not implemented")}function Dk(e,t,r){return r(Ou(e,t)).toOperationNode()}function kk(e,t,r,n){return ze.createWithOn(e,xn(t),ae(r,"=",n))}var M0=d({is(e){return e.kind==="OffsetNode"},create(e){return d({kind:"OffsetNode",offset:qe.create(e)})}});var D0=d({is(e){return e.kind==="GroupByItemNode"},create(e){return d({kind:"GroupByItemNode",groupBy:e})}});function k0(e){return e=fe(e)?e(Ye()):e,jr(e).map(D0.create)}var Tu=d({is(e){return e.kind==="SetOperationNode"},create(e,t,r){return d({kind:"SetOperationNode",operator:e,expression:t,all:r})}});function Ei(e,t,r){return Tu.create(e,t.toOperationNode(),r)}var Vr=class e{#e;constructor(t){this.#e=d(t)}get expressionType(){}where(...t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Re(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,ae(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Re(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,ae(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,Ee(t))})}whereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithWhere(this.#e.queryNode,he(t))})}orWhereExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,Ee(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:C.cloneWithOrWhere(this.#e.queryNode,he(t))})}having(...t){return new e({...this.#e,queryNode:T.cloneWithHaving(this.#e.queryNode,Zh(t))})}havingRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithHaving(this.#e.queryNode,ae(t,r,n))})}orHaving(...t){return new e({...this.#e,queryNode:T.cloneWithOrHaving(this.#e.queryNode,Zh(t))})}orHavingRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithOrHaving(this.#e.queryNode,ae(t,r,n))})}havingExists(t){return new e({...this.#e,queryNode:T.cloneWithHaving(this.#e.queryNode,Ee(t))})}havingNotExist(t){return new e({...this.#e,queryNode:T.cloneWithHaving(this.#e.queryNode,he(t))})}havingNotExists(t){return new e({...this.#e,queryNode:T.cloneWithHaving(this.#e.queryNode,he(t))})}orHavingExists(t){return new e({...this.#e,queryNode:T.cloneWithOrHaving(this.#e.queryNode,Ee(t))})}orHavingNotExists(t){return new e({...this.#e,queryNode:T.cloneWithOrHaving(this.#e.queryNode,he(t))})}select(t){return new e({...this.#e,queryNode:T.cloneWithSelections(this.#e.queryNode,Wr(t))})}distinctOn(t){return new e({...this.#e,queryNode:T.cloneWithDistinctOn(this.#e.queryNode,jr(t))})}modifyFront(t){return new e({...this.#e,queryNode:T.cloneWithFrontModifier(this.#e.queryNode,tr.createWithExpression(t.toOperationNode()))})}modifyEnd(t){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.createWithExpression(t.toOperationNode()))})}distinct(){return new e({...this.#e,queryNode:T.cloneWithFrontModifier(this.#e.queryNode,tr.create("Distinct"))})}forUpdate(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("ForUpdate"))})}forShare(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("ForShare"))})}forKeyShare(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("ForKeyShare"))})}forNoKeyUpdate(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("ForNoKeyUpdate"))})}skipLocked(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("SkipLocked"))})}noWait(){return new e({...this.#e,queryNode:T.cloneWithEndModifier(this.#e.queryNode,tr.create("NoWait"))})}selectAll(t){return new e({...this.#e,queryNode:T.cloneWithSelections(this.#e.queryNode,rr(t))})}innerJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",t))})}innerJoinLateral(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("LateralInnerJoin",t))})}leftJoinLateral(...t){return new e({...this.#e,queryNode:C.cloneWithJoin(this.#e.queryNode,Ue("LateralLeftJoin",t))})}orderBy(t,r){return new e({...this.#e,queryNode:T.cloneWithOrderByItem(this.#e.queryNode,wn(t,r))})}groupBy(t){return new e({...this.#e,queryNode:T.cloneWithGroupByItems(this.#e.queryNode,k0(t))})}limit(t){return new e({...this.#e,queryNode:T.cloneWithLimit(this.#e.queryNode,xu.create(t))})}offset(t){return new e({...this.#e,queryNode:T.cloneWithOffset(this.#e.queryNode,M0.create(t))})}union(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("union",t,!1))})}unionAll(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("union",t,!0))})}intersect(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("intersect",t,!1))})}intersectAll(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("intersect",t,!0))})}except(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("except",t,!1))})}exceptAll(t){return new e({...this.#e,queryNode:T.cloneWithSetOperation(this.#e.queryNode,Ei("except",t,!0))})}as(t){return new r_(this,t)}clearSelect(){return new e({...this.#e,queryNode:T.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new e({...this.#e,queryNode:C.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new e({...this.#e,queryNode:T.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new e({...this.#e,queryNode:T.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new e({...this.#e,queryNode:T.cloneWithoutOrderBy(this.#e.queryNode)})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile();return(await this.#e.executor.executeQuery(t,this.#e.queryId)).rows}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw Nn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:C.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(Vr,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var r_=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return st.create(this.#e.toOperationNode(),M.create(this.#t))}};var xe=class e{#e;constructor(t){this.#e=t}get expressionType(){}as(t){return new n_(this,t)}$castTo(){return new e(this.#e)}toOperationNode(){return this.#e}},n_=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return st.create(this.#e.toOperationNode(),me(this.#t)?this.#t.toOperationNode():M.create(this.#t))}};var ct=d({is(e){return e.kind==="AggregateFunctionNode"},create(e,t=[]){return d({kind:"AggregateFunctionNode",func:e,aggregated:t})},cloneWithDistinct(e){return d({...e,distinct:!0})},cloneWithFilter(e,t){return d({...e,filter:e.filter?Ie.cloneWithOperation(e.filter,"And",t):Ie.create(t)})},cloneWithOrFilter(e,t){return d({...e,filter:e.filter?Ie.cloneWithOperation(e.filter,"Or",t):Ie.create(t)})},cloneWithOver(e,t){return d({...e,over:t})}});var F0=d({is(e){return e.kind==="FunctionNode"},create(e,t){return d({kind:"FunctionNode",func:e,arguments:t})}});var mo=class e{#e;constructor(t){this.#e=d(t)}get expressionType(){}as(t){return new i_(this,t)}distinct(){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithFilter(this.#e.aggregateFunctionNode,Re(t))})}filterWhereExists(t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithFilter(this.#e.aggregateFunctionNode,Ee(t))})}filterWhereNotExists(t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithFilter(this.#e.aggregateFunctionNode,he(t))})}filterWhereRef(t,r,n){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithFilter(this.#e.aggregateFunctionNode,ae(t,r,n))})}orFilterWhere(...t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithOrFilter(this.#e.aggregateFunctionNode,Re(t))})}orFilterWhereExists(t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithOrFilter(this.#e.aggregateFunctionNode,Ee(t))})}orFilterWhereNotExists(t){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithOrFilter(this.#e.aggregateFunctionNode,he(t))})}orFilterWhereRef(t,r,n){return new e({...this.#e,aggregateFunctionNode:ct.cloneWithOrFilter(this.#e.aggregateFunctionNode,ae(t,r,n))})}over(t){let r=R0();return new e({...this.#e,aggregateFunctionNode:ct.cloneWithOver(this.#e.aggregateFunctionNode,(t?t(r):r).toOperationNode())})}$call(t){return t(this)}toOperationNode(){return this.#e.aggregateFunctionNode}};O(mo,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var i_=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return st.create(this.#e.toOperationNode(),M.create(this.#t))}};function Iu(){let e=(r,n)=>new xe(F0.create(r,jr(n))),t=(r,n)=>new mo({aggregateFunctionNode:ct.create(r,n?jr(n):void 0)});return Object.assign(e,{agg:t,avg(r){return t("avg",[r])},coalesce(r,...n){return e("coalesce",[r,...n])},count(r){return t("count",[r])},countAll(r){return new mo({aggregateFunctionNode:ct.create("count",rr(r))})},max(r){return t("max",[r])},min(r){return t("min",[r])},sum(r){return t("sum",[r])}})}var ho=class{#e;constructor(t){this.#e=d(t)}when(...t){return new Ru({...this.#e,node:Xe.cloneWithWhen(this.#e.node,Na.create(e_(t)))})}},Ru=class{#e;constructor(t){this.#e=d(t)}then(t){return new o_({...this.#e,node:Xe.cloneWithThen(this.#e.node,gt(t))})}},o_=class{#e;constructor(t){this.#e=d(t)}when(...t){return new Ru({...this.#e,node:Xe.cloneWithWhen(this.#e.node,Na.create(e_(t)))})}else(t){return new s_({...this.#e,node:Xe.cloneWith(this.#e.node,{else:gt(t)})})}end(){return new xe(Xe.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new xe(Xe.cloneWith(this.#e.node,{isStatement:!0}))}},s_=class{#e;constructor(t){this.#e=d(t)}end(){return new xe(Xe.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new xe(Xe.cloneWith(this.#e.node,{isStatement:!0}))}};function L0(e=gi){function t(r,n){return new xe(vu(r,n))}return{get fn(){return Iu()},selectFrom(r){return new Vr({queryId:V(),executor:e,queryNode:T.create(zt(r))})},case(r){return new ho({node:Xe.create(gn(r)?void 0:yt(r))})},ref(r){return new xe(Ur(r))},val(r){return new xe(gu(r))},cmpr(r,n,i){return new xe(Au(r,n,i))},bxp(r,n,i){return new xe(Au(r,n,i))},unary:t,not(r){return t("not",r)},exists(r){return t("exists",r)},neg(r){return t("-",r)},and(r){if(r.length===0)return new xe(qe.createImmediate(!0));if(r.length===1)return new xe(r[0].toOperationNode());let n=Fr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Fr.create(n,r[i].toOperationNode());return new xe(vn.create(n))},or(r){if(r.length===0)return new xe(qe.createImmediate(!1));if(r.length===1)return new xe(r[0].toOperationNode());let n=Lr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Lr.create(n,r[i].toOperationNode());return new xe(vn.create(n))},withSchema(r){return L0(e.withPluginAtFront(new Et(r)))}}}function Ye(e){return L0()}function Sn(e){if(me(e))return e.toOperationNode();if(fe(e))return e(Ye()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(e)}`)}function Su(e){if(me(e))return e.toOperationNode();if(fe(e))return e(Ye()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function hi(e){return a0(e)||c0(e)||fe(e)}function zt(e){return Zt(e)?e.map(t=>xn(t)):[xn(e)]}function xn(e){return Te(e)?Fk(e):Su(e)}function Fk(e){let t=" as ";if(e.includes(t)){let[r,n]=e.split(t).map(U0);return st.create(ve(r),M.create(n))}else return ve(e)}function ve(e){let t=".";if(e.includes(t)){let[r,n]=e.split(t).map(U0);return Pt.createWithSchema(r,n)}else return Pt.create(e)}function U0(e){return e.trim()}var a_=d({is(e){return e.kind==="AddColumnNode"},create(e){return d({kind:"AddColumnNode",column:e})}});var $r=d({is(e){return e.kind==="AlterColumnNode"},create(e){return d({kind:"AlterColumnNode",column:j.create(e)})},cloneWith(e,t){return d({...e,...t})}});var ce=d({is(e){return e.kind==="ColumnDefinitionNode"},create(e,t){return d({kind:"ColumnDefinitionNode",column:j.create(e),dataType:t})},cloneWithFrontModifier(e,t){return d({...e,frontModifiers:e.frontModifiers?d([...e.frontModifiers,t]):[t]})},cloneWithEndModifier(e,t){return d({...e,endModifiers:e.endModifiers?d([...e.endModifiers,t]):[t]})},cloneWith(e,t){return d({...e,...t})}});var c_=d({is(e){return e.kind==="DropColumnNode"},create(e){return d({kind:"DropColumnNode",column:j.create(e)})}});var u_=d({is(e){return e.kind==="RenameColumnNode"},create(e,t){return d({kind:"RenameColumnNode",column:j.create(e),renameTo:j.create(t)})}});var _o=d({is(e){return e.kind==="CheckConstraintNode"},create(e,t){return d({kind:"CheckConstraintNode",expression:e,name:t?M.create(t):void 0})}});var j0=["no action","restrict","cascade","set null","set default"],yo=d({is(e){return e.kind==="ReferencesNode"},create(e,t){return d({kind:"ReferencesNode",table:e,columns:d([...t])})},cloneWithOnDelete(e,t){return d({...e,onDelete:t})},cloneWithOnUpdate(e,t){return d({...e,onUpdate:t})}});function qu(e){return me(e)?e.toOperationNode():qe.createImmediate(e)}var xa=d({is(e){return e.kind==="GeneratedNode"},create(e){return d({kind:"GeneratedNode",...e})},createWithExpression(e){return d({kind:"GeneratedNode",always:!0,expression:e})},cloneWith(e,t){return d({...e,...t})}});var B0=d({is(e){return e.kind==="DefaultValueNode"},create(e){return d({kind:"DefaultValueNode",defaultValue:e})}});function go(e){if(j0.includes(e))return e;throw new Error(`invalid OnModifyForeignAction ${e}`)}var ir=class e{#e;constructor(t){this.#e=t}autoIncrement(){return new e(ce.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new e(ce.cloneWith(this.#e,{primaryKey:!0}))}references(t){let r=Ur(t);if(!mi.is(r)||oo.is(r.column))throw new Error(`invalid call references('${t}'). The reference must have format table.column or schema.table.column`);return new e(ce.cloneWith(this.#e,{references:yo.create(r.table,[r.column])}))}onDelete(t){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new e(ce.cloneWith(this.#e,{references:yo.cloneWithOnDelete(this.#e.references,go(t))}))}onUpdate(t){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new e(ce.cloneWith(this.#e,{references:yo.cloneWithOnUpdate(this.#e.references,go(t))}))}unique(){return new e(ce.cloneWith(this.#e,{unique:!0}))}notNull(){return new e(ce.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new e(ce.cloneWith(this.#e,{unsigned:!0}))}defaultTo(t){return new e(ce.cloneWith(this.#e,{defaultTo:B0.create(qu(t))}))}check(t){return new e(ce.cloneWith(this.#e,{check:_o.create(t.toOperationNode())}))}generatedAlwaysAs(t){return new e(ce.cloneWith(this.#e,{generated:xa.createWithExpression(t.toOperationNode())}))}generatedAlwaysAsIdentity(){return new e(ce.cloneWith(this.#e,{generated:xa.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new e(ce.cloneWith(this.#e,{generated:xa.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new e(ce.cloneWith(this.#e,{generated:xa.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(t){return new e(ce.cloneWithFrontModifier(this.#e,t.toOperationNode()))}modifyEnd(t){return new e(ce.cloneWithEndModifier(this.#e,t.toOperationNode()))}$call(t){return t(this)}toOperationNode(){return this.#e}};O(ir,"don't await ColumnDefinitionBuilder instances directly.");var d_=d({is(e){return e.kind==="ModifyColumnNode"},create(e){return d({kind:"ModifyColumnNode",column:e})}});var W0=d({is(e){return e.kind==="DataTypeNode"},create(e){return d({kind:"DataTypeNode",dataType:e})}});function zr(e){return me(e)?e.toOperationNode():W0.create(e)}var vi=d({is(e){return e.kind==="ForeignKeyConstraintNode"},create(e,t,r,n){return d({kind:"ForeignKeyConstraintNode",columns:e,references:yo.create(t,r),name:n?M.create(n):void 0})},cloneWith(e,t){return d({...e,...t})}});var wi=class e{#e;constructor(t){this.#e=t}onDelete(t){return new e(vi.cloneWith(this.#e,{onDelete:go(t)}))}onUpdate(t){return new e(vi.cloneWith(this.#e,{onUpdate:go(t)}))}$call(t){return t(this)}toOperationNode(){return this.#e}};O(wi,"don't await ForeignKeyConstraintBuilder instances directly.");var Ca=d({is(e){return e.kind==="AddConstraintNode"},create(e){return d({kind:"AddConstraintNode",constraint:e})}});var Mu=d({is(e){return e.kind==="UniqueConstraintNode"},create(e,t){return d({kind:"UniqueConstraintNode",columns:d(e.map(j.create)),name:t?M.create(t):void 0})}});var Eo=d({is(e){return e.kind==="DropConstraintNode"},create(e){return d({kind:"DropConstraintNode",constraintName:M.create(e)})},cloneWith(e,t){return d({...e,...t})}});var bi=class{alterColumnNode;constructor(t){this.alterColumnNode=t}setDataType(t){return new Si($r.cloneWith(this.alterColumnNode,{dataType:zr(t)}))}setDefault(t){return new Si($r.cloneWith(this.alterColumnNode,{setDefault:qu(t)}))}dropDefault(){return new Si($r.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new Si($r.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new Si($r.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}$call(t){return t(this)}},Si=class extends bi{toOperationNode(){return this.alterColumnNode}};var Cn=class{#e;constructor(t){this.#e=d(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Cn,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Oa=class e{#e;constructor(t){this.#e=d(t)}onDelete(t){return new e({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(t)})}onUpdate(t){return new e({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(t)})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(se.cloneWithTableProps(this.#e.node,{addConstraint:Ca.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Oa,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Aa=class e{#e;constructor(t){this.#e=d(t)}ifExists(){return new e({...this.#e,node:se.cloneWithTableProps(this.#e.node,{dropConstraint:Eo.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new e({...this.#e,node:se.cloneWithTableProps(this.#e.node,{dropConstraint:Eo.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new e({...this.#e,node:se.cloneWithTableProps(this.#e.node,{dropConstraint:Eo.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Aa,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var Pa=class{#e;constructor(t){this.#e=d(t)}renameTo(t){return new Cn({...this.#e,node:se.cloneWithTableProps(this.#e.node,{renameTo:ve(t)})})}setSchema(t){return new Cn({...this.#e,node:se.cloneWithTableProps(this.#e.node,{setSchema:M.create(t)})})}alterColumn(t,r){let n=r(new bi($r.create(t)));return new On({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(t){return new On({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,c_.create(t))})}renameColumn(t,r){return new On({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,u_.create(t,r))})}addColumn(t,r,n=En){let i=n(new ir(ce.create(t,zr(r))));return new On({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,a_.create(i.toOperationNode()))})}modifyColumn(t,r,n=En){let i=n(new ir(ce.create(t,zr(r))));return new On({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,d_.create(i.toOperationNode()))})}addUniqueConstraint(t,r){return new Cn({...this.#e,node:se.cloneWithTableProps(this.#e.node,{addConstraint:Ca.create(Mu.create(r,t))})})}addCheckConstraint(t,r){return new Cn({...this.#e,node:se.cloneWithTableProps(this.#e.node,{addConstraint:Ca.create(_o.create(r.toOperationNode(),t))})})}addForeignKeyConstraint(t,r,n,i){return new Oa({...this.#e,constraintBuilder:new wi(vi.create(r.map(j.create),ve(n),i.map(j.create),t))})}dropConstraint(t){return new Aa({...this.#e,node:se.cloneWithTableProps(this.#e.node,{dropConstraint:Eo.create(t)})})}$call(t){return t(this)}call(t){return this.$call(t)}},On=class e{#e;constructor(t){this.#e=d(t)}alterColumn(t,r){let n=r(new bi($r.create(t)));return new e({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(t){return new e({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,c_.create(t))})}renameColumn(t,r){return new e({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,u_.create(t,r))})}addColumn(t,r,n=En){let i=n(new ir(ce.create(t,zr(r))));return new e({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,a_.create(i.toOperationNode()))})}modifyColumn(t,r,n=En){let i=n(new ir(ce.create(t,zr(r))));return new e({...this.#e,node:se.cloneWithColumnAlteration(this.#e.node,d_.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Pa,"don't await AlterTableBuilder instances");O(bi,"don't await AlterColumnBuilder instances");O(On,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var vo=class extends lo{transformValue(t){return{...super.transformValue(t),immediate:!0}}};var Ta=class e{#e;constructor(t){this.#e=d(t)}ifNotExists(){return new e({...this.#e,node:er.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new e({...this.#e,node:er.cloneWith(this.#e.node,{unique:!0})})}on(t){return new e({...this.#e,node:er.cloneWith(this.#e.node,{table:ve(t)})})}column(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,[Bh(t)])})}columns(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,t.map(Bh))})}expression(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,[t.toOperationNode()])})}using(t){return new e({...this.#e,node:er.cloneWith(this.#e.node,{using:Ce.createWithSql(t)})})}where(...t){let r=new vo;return new e({...this.#e,node:C.cloneWithWhere(this.#e.node,r.transformNode(Re(t)))})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ta,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Ia=class e{#e;constructor(t){this.#e=d(t)}ifNotExists(){return new e({...this.#e,node:_u.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ia,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var V0=d({is(e){return e.kind==="PrimaryKeyConstraintNode"},create(e,t){return d({kind:"PrimaryKeyConstraintNode",columns:d(e.map(j.create)),name:t?M.create(t):void 0})}});function $0(e){if(s0.includes(e))return e;throw new Error(`invalid OnCommitAction ${e}`)}var Ra=class e{#e;constructor(t){this.#e=d(t)}temporary(){return new e({...this.#e,node:_t.cloneWith(this.#e.node,{temporary:!0})})}onCommit(t){return new e({...this.#e,node:_t.cloneWith(this.#e.node,{onCommit:$0(t)})})}ifNotExists(){return new e({...this.#e,node:_t.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(t,r,n=En){let i=n(new ir(ce.create(t,zr(r))));return new e({...this.#e,node:_t.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(t,r){return new e({...this.#e,node:_t.cloneWithConstraint(this.#e.node,V0.create(r,t))})}addUniqueConstraint(t,r){return new e({...this.#e,node:_t.cloneWithConstraint(this.#e.node,Mu.create(r,t))})}addCheckConstraint(t,r){return new e({...this.#e,node:_t.cloneWithConstraint(this.#e.node,_o.create(r.toOperationNode(),t))})}addForeignKeyConstraint(t,r,n,i,o=En){let s=o(new wi(vi.create(r.map(j.create),ve(n),i.map(j.create),t)));return new e({...this.#e,node:_t.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(t){return new e({...this.#e,node:_t.cloneWithFrontModifier(this.#e.node,t.toOperationNode())})}modifyEnd(t){return new e({...this.#e,node:_t.cloneWithEndModifier(this.#e.node,t.toOperationNode())})}$call(t){return t(this)}call(t){return this.$call(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ra,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var qa=class e{#e;constructor(t){this.#e=d(t)}on(t){return new e({...this.#e,node:ro.cloneWith(this.#e.node,{table:ve(t)})})}ifExists(){return new e({...this.#e,node:ro.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:ro.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(qa,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Ma=class e{#e;constructor(t){this.#e=d(t)}ifExists(){return new e({...this.#e,node:ua.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:ua.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ma,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Da=class e{#e;constructor(t){this.#e=d(t)}ifExists(){return new e({...this.#e,node:da.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:da.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Da,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var Ht=d({is(e){return e.kind==="CreateViewNode"},create(e){return d({kind:"CreateViewNode",name:ot.create(e)})},cloneWith(e,t){return d({...e,...t})}});var Du=class{#e=new vo;transformQuery(t){return this.#e.transformNode(t.node)}transformResult(t){return Promise.resolve(t.result)}};var ka=class e{#e;constructor(t){this.#e=d(t)}temporary(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{orReplace:!0})})}columns(t){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{columns:t.map(jh)})})}as(t){let r=t.withPlugin(new Du).toOperationNode();return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{as:r})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(ka,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var wo=d({is(e){return e.kind==="DropViewNode"},create(e){return d({kind:"DropViewNode",name:ot.create(e)})},cloneWith(e,t){return d({...e,...t})}});var Fa=class e{#e;constructor(t){this.#e=d(t)}materialized(){return new e({...this.#e,node:wo.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new e({...this.#e,node:wo.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:wo.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Fa,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var ku=d({is(e){return e.kind==="CreateTypeNode"},create(e){return d({kind:"CreateTypeNode",name:e})},cloneWithEnum(e,t){return d({...e,enum:so.create(t.map(r=>qe.createImmediate(r)))})}});var La=class e{#e;constructor(t){this.#e=d(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(t){return new e({...this.#e,node:ku.cloneWithEnum(this.#e.node,t)})}$call(t){return t(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(La,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var Fu=d({is(e){return e.kind==="DropTypeNode"},create(e){return d({kind:"DropTypeNode",name:e})},cloneWith(e,t){return d({...e,...t})}});var Ua=class e{#e;constructor(t){this.#e=d(t)}ifExists(){return new e({...this.#e,node:Fu.cloneWith(this.#e.node,{ifExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ua,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function l_(e){let t=".";if(e.includes(t)){let r=e.split(t).map(Lk);if(r.length===2)return ot.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${e}`)}else return ot.create(e)}function Lk(e){return e.trim()}var Lu=class e{#e;constructor(t){this.#e=t}createTable(t){return new Ra({queryId:V(),executor:this.#e,node:_t.create(ve(t))})}dropTable(t){return new Da({queryId:V(),executor:this.#e,node:da.create(ve(t))})}createIndex(t){return new Ta({queryId:V(),executor:this.#e,node:er.create(t)})}dropIndex(t){return new qa({queryId:V(),executor:this.#e,node:ro.create(t)})}createSchema(t){return new Ia({queryId:V(),executor:this.#e,node:_u.create(t)})}dropSchema(t){return new Ma({queryId:V(),executor:this.#e,node:ua.create(t)})}alterTable(t){return new Pa({queryId:V(),executor:this.#e,node:se.create(ve(t))})}createView(t){return new ka({queryId:V(),executor:this.#e,node:Ht.create(t)})}dropView(t){return new Fa({queryId:V(),executor:this.#e,node:wo.create(t)})}createType(t){return new La({queryId:V(),executor:this.#e,node:ku.create(l_(t))})}dropType(t){return new Ua({queryId:V(),executor:this.#e,node:Fu.create(l_(t))})}withPlugin(t){return new e(this.#e.withPlugin(t))}withoutPlugins(){return new e(this.#e.withoutPlugins())}withSchema(t){return new e(this.#e.withPluginAtFront(new Et(t)))}};var Uu=class{ref(t){return new wu(t)}};var ju=class{#e;constructor(t){this.#e=t}async provideConnection(t){let r=await this.#e.acquireConnection();try{return await t(r)}finally{await this.#e.releaseConnection(r)}}};var Bu=class e extends fo{#e;#t;#r;constructor(t,r,n,i=[]){super(i),this.#e=t,this.#t=r,this.#r=n}get adapter(){return this.#t}compileQuery(t){return this.#e.compileQuery(t)}provideConnection(t){return this.#r.provideConnection(t)}withPlugins(t){return new e(this.#e,this.#t,this.#r,[...this.plugins,...t])}withPlugin(t){return new e(this.#e,this.#t,this.#r,[...this.plugins,t])}withPluginAtFront(t){return new e(this.#e,this.#t,this.#r,[t,...this.plugins])}withConnectionProvider(t){return new e(this.#e,this.#t,t,[...this.plugins])}withoutPlugins(){return new e(this.#e,this.#t,this.#r,[])}};function p_(){return typeof performance<"u"&&fe(performance.now)?performance.now():Date.now()}var Wu=class{#e;#t;#r;#n;#i=new WeakSet;constructor(t,r){this.#e=t,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(t=>(this.#r=void 0,Promise.reject(t)))),await this.#r}async acquireConnection(){await this.init();let t=await this.#e.acquireConnection();return this.#i.has(t)||(this.#o()&&this.#s(t),this.#i.add(t)),t}async releaseConnection(t){await this.#e.releaseConnection(t)}beginTransaction(t,r){return this.#e.beginTransaction(t,r)}commitTransaction(t){return this.#e.commitTransaction(t)}rollbackTransaction(t){return this.#e.rollbackTransaction(t)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(t=>(this.#n=void 0,Promise.reject(t)))),await this.#n)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(t){let r=t.executeQuery;t.executeQuery=async n=>{let i=p_();try{return await r.call(t,n)}catch(o){throw await this.#u(o,n,i),o}finally{await this.#d(n,i)}}}async#u(t,r,n){await this.#t.error(()=>({level:"error",error:t,query:r,queryDurationMillis:this.#c(n)}))}async#d(t,r){await this.#t.query(()=>({level:"query",query:t,queryDurationMillis:this.#c(r)}))}#c(t){return p_()-t}};var ja=class{#e;#t;constructor(t){this.#e=t}async provideConnection(t){for(;this.#t;)await this.#t;let r=this.#r(t);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(t){return await t(this.#e)}};var z0=["read uncommitted","read committed","repeatable read","serializable"];var Pde=d(["query","error"]),Vu=class{#e;#t;constructor(t){fe(t)?(this.#t=t,this.#e=d({query:!0,error:!0})):(this.#t=Uk,this.#e=d({query:t.includes("query"),error:t.includes("error")}))}isLevelEnabled(t){return this.#e[t]}async query(t){this.#e.query&&await this.#t(t())}async error(t){this.#e.error&&await this.#t(t())}};function Uk(e){e.level==="query"?(console.log(`kysely:query: ${e.query.sql}`),console.log(`kysely:query: duration: ${e.queryDurationMillis.toFixed(1)}ms`)):e.level==="error"&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${e}`))}function H0(e){return $e(e)&&fe(e.compile)}var So=class e extends po{#e;constructor(t){let r,n;if(jk(t))r={executor:t.executor},n={...t};else{let i=t.dialect,o=i.createDriver(),s=i.createQueryCompiler(),a=i.createAdapter(),u=new Vu(t.log??[]),l=new Wu(o,u),p=new ju(l),f=new Bu(s,a,p,t.plugins??[]);r={executor:f},n={config:t,executor:f,dialect:i,driver:l}}super(r),this.#e=d(n)}get schema(){return new Lu(this.#e.executor)}get dynamic(){return new Uu}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(t){return new ho({node:Xe.create(gn(t)?void 0:Sn(t))})}get fn(){return Iu()}transaction(){return new zu({...this.#e})}connection(){return new $u({...this.#e})}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new Et(t))})}withTables(){return new e({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(t,r=V()){let n=H0(t)?t.compile():t;return this.getExecutor().executeQuery(n,r)}},f_=class e extends So{#e;constructor(t){super(t),this.#e=t}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new Et(t))})}withTables(){return new e({...this.#e})}};function jk(e){return $e(e)&&$e(e.config)&&$e(e.driver)&&$e(e.executor)&&$e(e.dialect)}var $u=class{#e;constructor(t){this.#e=d(t)}async execute(t){return this.#e.executor.provideConnection(async r=>{let n=this.#e.executor.withConnectionProvider(new ja(r)),i=new So({...this.#e,executor:n});return await t(i)})}};O($u,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var zu=class e{#e;constructor(t){this.#e=d(t)}setIsolationLevel(t){return new e({...this.#e,isolationLevel:t})}async execute(t){let{isolationLevel:r,...n}=this.#e,i={isolationLevel:r};return Bk(i),this.#e.executor.provideConnection(async o=>{let s=this.#e.executor.withConnectionProvider(new ja(o)),a=new f_({...n,executor:s});try{await this.#e.driver.beginTransaction(o,i);let u=await t(a);return await this.#e.driver.commitTransaction(o),u}catch(u){throw await this.#e.driver.rollbackTransaction(o),u}})}};O(zu,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Bk(e){if(e.isolationLevel&&!z0.includes(e.isolationLevel))throw new Error(`invalid transaction isolation level ${e.isolationLevel}`)}var Tt=class e{#e;constructor(t){this.#e=d(t)}get expressionType(){}as(t){return new m_(this,t)}$castTo(){return new e({...this.#e})}castTo(){return this.$castTo()}withPlugin(t){return new e({...this.#e,plugins:this.#e.plugins!==void 0?d([...this.#e.plugins,t]):d([t])})}toOperationNode(){return this.#r(this.#t())}compile(t){return this.#n(this.#t(t))}async execute(t){let r=this.#t(t);return r.executeQuery(this.#n(r),this.#e.queryId)}#t(t){let r=t!==void 0?t.getExecutor():gi;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(t){return t.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(t){return t.compileQuery(this.#r(t),this.#e.queryId)}};O(Tt,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var m_=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return st.create(this.#e.toOperationNode(),me(this.#t)?this.#t.toOperationNode():M.create(this.#t))}};var Ze=Object.assign((e,...t)=>new Tt({queryId:V(),rawNode:Ce.create(e,t?.map(gt)??[])}),{ref(e){return new Tt({queryId:V(),rawNode:Ce.createWithChild(Ur(e))})},val(e){return new Tt({queryId:V(),rawNode:Ce.createWithChild(gt(e))})},value(e){return this.val(e)},table(e){return new Tt({queryId:V(),rawNode:Ce.createWithChild(ve(e))})},id(...e){let t=new Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",new Tt({queryId:V(),rawNode:Ce.create(t,e.map(M.create))})},lit(e){return new Tt({queryId:V(),rawNode:Ce.createWithChild(qe.createImmediate(e))})},literal(e){return this.lit(e)},raw(e){return new Tt({queryId:V(),rawNode:Ce.createWithSql(e)})},join(e,t=Ze`, `){let r=new Array(2*e.length-1),n=t.toOperationNode();for(let i=0;i<e.length;++i)r[2*i]=gt(e[i]),i!==e.length-1&&(r[2*i+1]=n);return new Tt({queryId:V(),rawNode:Ce.createWithChildren(r)})}});var Hu=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=d({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this)});visitNode=t=>{this.nodeStack.push(t),this.#e[t.kind](t),this.nodeStack.pop()}};var bo=class extends Hu{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(t){return this.#e="",this.#t=[],this.visitNode(t),d({query:t,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(t){let r=this.parentNode!==void 0&&!at.is(this.parentNode)&&!Ht.is(this.parentNode)&&!Tu.is(this.parentNode);this.parentNode===void 0&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("select "),t.distinctOn&&(this.compileDistinctOn(t.distinctOn),this.append(" ")),t.frontModifiers&&t.frontModifiers.length>0&&(this.compileList(t.frontModifiers," "),this.append(" ")),t.selections&&(this.compileList(t.selections),this.append(" ")),this.visitNode(t.from),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.groupBy&&(this.append(" "),this.visitNode(t.groupBy)),t.having&&(this.append(" "),this.visitNode(t.having)),t.setOperations&&(this.append(" "),this.compileList(t.setOperations," ")),t.orderBy&&(this.append(" "),this.visitNode(t.orderBy)),t.limit&&(this.append(" "),this.visitNode(t.limit)),t.offset&&(this.append(" "),this.visitNode(t.offset)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," ")),r&&this.append(")")}visitFrom(t){this.append("from "),this.compileList(t.froms)}visitSelection(t){this.visitNode(t.selection)}visitColumn(t){this.visitNode(t.column)}compileDistinctOn(t){this.append("distinct on ("),this.compileList(t),this.append(")")}compileList(t,r=", "){let n=t.length-1;for(let i=0;i<=n;i++)this.visitNode(t[i]),i<n&&this.append(r)}visitWhere(t){this.append("where "),this.visitNode(t.where)}visitHaving(t){this.append("having "),this.visitNode(t.having)}visitInsertQuery(t){let r=this.nodeStack.find(C.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append(t.replace?"replace":"insert"),t.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(t.into),t.columns&&(this.append(" ("),this.compileList(t.columns),this.append(")")),t.values&&(this.append(" "),this.visitNode(t.values)),t.onConflict&&(this.append(" "),this.visitNode(t.onConflict)),t.onDuplicateKey&&(this.append(" "),this.visitNode(t.onDuplicateKey)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitValues(t){this.append("values "),this.compileList(t.values)}visitDeleteQuery(t){let r=this.nodeStack.find(C.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("delete "),this.visitNode(t.from),t.using&&(this.append(" "),this.visitNode(t.using)),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.orderBy&&(this.append(" "),this.visitNode(t.orderBy)),t.limit&&(this.append(" "),this.visitNode(t.limit)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitReturning(t){this.append("returning "),this.compileList(t.selections)}visitAlias(t){this.visitNode(t.node),this.append(" as "),this.visitNode(t.alias)}visitReference(t){this.visitNode(t.table),this.append("."),this.visitNode(t.column)}visitSelectAll(t){this.append("*")}visitIdentifier(t){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(t),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(t){if(!Te(t.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(t.name))}visitAnd(t){this.visitNode(t.left),this.append(" and "),this.visitNode(t.right)}visitOr(t){this.visitNode(t.left),this.append(" or "),this.visitNode(t.right)}visitValue(t){t.immediate?this.appendImmediateValue(t.value):this.appendValue(t.value)}visitValueList(t){this.append("("),this.compileList(t.values),this.append(")")}visitPrimitiveValueList(t){this.append("(");let{values:r}=t;for(let n=0;n<r.length;++n)this.appendValue(r[n]),n!==r.length-1&&this.append(", ");this.append(")")}visitParens(t){this.append("("),this.visitNode(t.node),this.append(")")}visitJoin(t){this.append(Vk[t.joinType]),this.append(" "),this.visitNode(t.table),t.on&&(this.append(" "),this.visitNode(t.on))}visitOn(t){this.append("on "),this.visitNode(t.on)}visitRaw(t){let{sqlFragments:r,parameters:n}=t;for(let i=0;i<r.length;++i)this.append(r[i]),n.length>i&&this.visitNode(n[i])}visitOperator(t){this.append(t.operator)}visitTable(t){this.visitNode(t.table)}visitSchemableIdentifier(t){t.schema&&(this.visitNode(t.schema),this.append(".")),this.visitNode(t.identifier)}visitCreateTable(t){this.append("create "),t.frontModifiers&&t.frontModifiers.length>0&&(this.compileList(t.frontModifiers," "),this.append(" ")),t.temporary&&this.append("temporary "),this.append("table "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.table),this.append(" ("),this.compileList([...t.columns,...t.constraints??[]]),this.append(")"),t.onCommit&&(this.append(" on commit "),this.append(t.onCommit)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," "))}visitColumnDefinition(t){this.visitNode(t.column),this.append(" "),this.visitNode(t.dataType),t.unsigned&&this.append(" unsigned"),t.frontModifiers&&t.frontModifiers.length>0&&(this.append(" "),this.compileList(t.frontModifiers," ")),t.generated&&(this.append(" "),this.visitNode(t.generated)),t.defaultTo&&(this.append(" "),this.visitNode(t.defaultTo)),t.notNull&&this.append(" not null"),t.unique&&this.append(" unique"),t.primaryKey&&this.append(" primary key"),t.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),t.references&&(this.append(" "),this.visitNode(t.references)),t.check&&(this.append(" "),this.visitNode(t.check)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(t){this.append("references "),this.visitNode(t.table),this.append(" ("),this.compileList(t.columns),this.append(")"),t.onDelete&&(this.append(" on delete "),this.append(t.onDelete)),t.onUpdate&&(this.append(" on update "),this.append(t.onUpdate))}visitDropTable(t){this.append("drop table "),t.ifExists&&this.append("if exists "),this.visitNode(t.table),t.cascade&&this.append(" cascade")}visitDataType(t){this.append(t.dataType)}visitOrderBy(t){this.append("order by "),this.compileList(t.items)}visitOrderByItem(t){this.visitNode(t.orderBy),t.direction&&(this.append(" "),this.visitNode(t.direction))}visitGroupBy(t){this.append("group by "),this.compileList(t.items)}visitGroupByItem(t){this.visitNode(t.groupBy)}visitUpdateQuery(t){let r=this.nodeStack.find(C.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("update "),this.visitNode(t.table),this.append(" set "),t.updates&&this.compileList(t.updates),t.from&&(this.append(" "),this.visitNode(t.from)),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitColumnUpdate(t){this.visitNode(t.column),this.append(" = "),this.visitNode(t.value)}visitLimit(t){this.append("limit "),this.visitNode(t.limit)}visitOffset(t){this.append("offset "),this.visitNode(t.offset)}visitOnConflict(t){this.append("on conflict"),t.columns?(this.append(" ("),this.compileList(t.columns),this.append(")")):t.constraint?(this.append(" on constraint "),this.visitNode(t.constraint)):t.indexExpression&&(this.append(" ("),this.visitNode(t.indexExpression),this.append(")")),t.indexWhere&&(this.append(" "),this.visitNode(t.indexWhere)),t.doNothing===!0?this.append(" do nothing"):t.updates&&(this.append(" do update set "),this.compileList(t.updates),t.updateWhere&&(this.append(" "),this.visitNode(t.updateWhere)))}visitOnDuplicateKey(t){this.append("on duplicate key update "),this.compileList(t.updates)}visitCreateIndex(t){this.append("create "),t.unique&&this.append("unique "),this.append("index "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.name),t.table&&(this.append(" on "),this.visitNode(t.table)),t.using&&(this.append(" using "),this.visitNode(t.using)),t.columns&&(this.append(" ("),this.compileList(t.columns),this.append(")")),t.where&&(this.append(" "),this.visitNode(t.where))}visitDropIndex(t){this.append("drop index "),t.ifExists&&this.append("if exists "),this.visitNode(t.name),t.table&&(this.append(" on "),this.visitNode(t.table)),t.cascade&&this.append(" cascade")}visitCreateSchema(t){this.append("create schema "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.schema)}visitDropSchema(t){this.append("drop schema "),t.ifExists&&this.append("if exists "),this.visitNode(t.schema),t.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("primary key ("),this.compileList(t.columns),this.append(")")}visitUniqueConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("unique ("),this.compileList(t.columns),this.append(")")}visitCheckConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("check ("),this.visitNode(t.expression),this.append(")")}visitForeignKeyConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("foreign key ("),this.compileList(t.columns),this.append(") "),this.visitNode(t.references),t.onDelete&&(this.append(" on delete "),this.append(t.onDelete)),t.onUpdate&&(this.append(" on update "),this.append(t.onUpdate))}visitList(t){this.compileList(t.items)}visitWith(t){this.append("with "),t.recursive&&this.append("recursive "),this.compileList(t.expressions)}visitCommonTableExpression(t){this.visitNode(t.name),this.append(" as "),this.visitNode(t.expression)}visitCommonTableExpressionName(t){this.visitNode(t.table),t.columns&&(this.append("("),this.compileList(t.columns),this.append(")"))}visitAlterTable(t){this.append("alter table "),this.visitNode(t.table),this.append(" "),t.renameTo&&(this.append("rename to "),this.visitNode(t.renameTo)),t.setSchema&&(this.append("set schema "),this.visitNode(t.setSchema)),t.addConstraint&&this.visitNode(t.addConstraint),t.dropConstraint&&this.visitNode(t.dropConstraint),t.columnAlterations&&this.compileList(t.columnAlterations)}visitAddColumn(t){this.append("add column "),this.visitNode(t.column)}visitRenameColumn(t){this.append("rename column "),this.visitNode(t.column),this.append(" to "),this.visitNode(t.renameTo)}visitDropColumn(t){this.append("drop column "),this.visitNode(t.column)}visitAlterColumn(t){this.append("alter column "),this.visitNode(t.column),this.append(" "),t.dataType&&(this.append("type "),this.visitNode(t.dataType),t.dataTypeExpression&&(this.append("using "),this.visitNode(t.dataTypeExpression))),t.setDefault&&(this.append("set default "),this.visitNode(t.setDefault)),t.dropDefault&&this.append("drop default"),t.setNotNull&&this.append("set not null"),t.dropNotNull&&this.append("drop not null")}visitModifyColumn(t){this.append("modify column "),this.visitNode(t.column)}visitAddConstraint(t){this.append("add "),this.visitNode(t.constraint)}visitDropConstraint(t){this.append("drop constraint "),t.ifExists&&this.append("if exists "),this.visitNode(t.constraintName),t.modifier==="cascade"?this.append(" cascade"):t.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(t){this.append(t.operator),this.append(" "),t.all&&this.append("all "),this.visitNode(t.expression)}visitCreateView(t){this.append("create "),t.orReplace&&this.append("or replace "),t.materialized&&this.append("materialized "),t.temporary&&this.append("temporary "),this.append("view "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.name),this.append(" "),t.columns&&(this.append("("),this.compileList(t.columns),this.append(") ")),t.as&&(this.append("as "),this.visitNode(t.as))}visitDropView(t){this.append("drop "),t.materialized&&this.append("materialized "),this.append("view "),t.ifExists&&this.append("if exists "),this.visitNode(t.name),t.cascade&&this.append(" cascade")}visitGenerated(t){this.append("generated "),t.always&&this.append("always "),t.byDefault&&this.append("by default "),this.append("as "),t.identity&&this.append("identity"),t.expression&&(this.append("("),this.visitNode(t.expression),this.append(")")),t.stored&&this.append(" stored")}visitDefaultValue(t){this.append("default "),this.visitNode(t.defaultValue)}visitSelectModifier(t){t.rawModifier?this.visitNode(t.rawModifier):this.append(Wk[t.modifier])}visitCreateType(t){this.append("create type "),this.visitNode(t.name),t.enum&&(this.append(" as enum "),this.visitNode(t.enum))}visitDropType(t){this.append("drop type "),t.ifExists&&this.append("if exists "),this.visitNode(t.name)}visitExplain(t){this.append("explain"),(t.options||t.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),t.options&&(this.visitNode(t.options),t.format&&this.append(this.getExplainOptionsDelimiter())),t.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(t.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(t){this.append("default")}visitAggregateFunction(t){this.append(t.func),this.append("("),t.distinct&&this.append("distinct "),this.compileList(t.aggregated),this.append(")"),t.filter&&(this.append(" filter("),this.visitNode(t.filter),this.append(")")),t.over&&(this.append(" "),this.visitNode(t.over))}visitOver(t){this.append("over("),t.partitionBy&&(this.visitNode(t.partitionBy),t.orderBy&&this.append(" ")),t.orderBy&&this.visitNode(t.orderBy),this.append(")")}visitPartitionBy(t){this.append("partition by "),this.compileList(t.items)}visitPartitionByItem(t){this.visitNode(t.partitionBy)}visitBinaryOperation(t){this.visitNode(t.leftOperand),this.append(" "),this.visitNode(t.operator),this.append(" "),this.visitNode(t.rightOperand)}visitUnaryOperation(t){this.visitNode(t.operator),this.isMinusOperator(t.operator)||this.append(" "),this.visitNode(t.operand)}isMinusOperator(t){return io.is(t)&&t.operator==="-"}visitUsing(t){this.append("using "),this.compileList(t.tables)}visitFunction(t){this.append(t.func),this.append("("),this.compileList(t.arguments),this.append(")")}visitCase(t){this.append("case"),t.value&&(this.append(" "),this.visitNode(t.value)),t.when&&(this.append(" "),this.compileList(t.when," ")),t.else&&(this.append(" else "),this.visitNode(t.else)),this.append(" end"),t.isStatement&&this.append(" case")}visitWhen(t){this.append("when "),this.visitNode(t.condition),t.result&&(this.append(" then "),this.visitNode(t.result))}append(t){this.#e+=t}appendValue(t){this.addParameter(t),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(t){let r=this.getLeftIdentifierWrapper(),n=this.getRightIdentifierWrapper(),i="";for(let o of t)i+=o,o===r?i+=r:o===n&&(i+=n);return i}addParameter(t){this.#t.push(t)}appendImmediateValue(t){if(Te(t))this.append(`'${t}'`);else if(r0(t)||mu(t))this.append(t.toString());else if(hu(t))this.append("null");else if(n0(t))this.appendImmediateValue(t.toISOString());else if(i0(t))this.appendImmediateValue(t.toString());else throw new Error(`invalid immediate value ${t}`)}},Wk=d({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Vk=d({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var No=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};var Gu=class{transformQuery(t){return t.node}async transformResult(t){return t.result}};var Wa="kysely_migration",xo="kysely_migration_lock",h_="migration_lock",__=d({__noMigrations__:!0}),Qu=class{#e;constructor(t){this.#e=d(t)}async getMigrations(){let t=await this.#a(this.#n)?await this.#e.db.withPlugin(this.#o).selectFrom(this.#n).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:n,...i})=>{let o=t.find(s=>s.name===n);return{name:n,migration:i,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:t})=>t.length-1)}async migrateTo(t){return this.#t(({migrations:r})=>{if(t===__)return-1;let n=r.findIndex(i=>i.name===t);if(n===-1)throw new Error(`migration "${t}" doesn't exist`);return n})}async migrateUp(){return this.#t(({currentIndex:t,migrations:r})=>Math.min(t+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:t})=>Math.max(t-1,-1))}async#t(t){try{return await this.#s(),await this.#h(t)}catch(r){return r instanceof Ba?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#n(){return this.#e.migrationTableName??Wa}get#i(){return this.#e.migrationLockTableName??xo}get#o(){return this.#r?new Et(this.#r):new Gu}async#s(){await this.#u(),await this.#d(),await this.#c(),await this.#m()}async#u(){if(this.#r&&!await this.#l())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(t){if(!await this.#l())throw t}}async#d(){if(!await this.#a(this.#n))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#o).createTable(this.#n).ifNotExists().addColumn("name","varchar(255)",t=>t.notNull().primaryKey()).addColumn("timestamp","varchar(255)",t=>t.notNull()).execute()}catch(t){if(!await this.#a(this.#n))throw t}}async#c(){if(!await this.#a(this.#i))try{await this.#e.db.schema.withPlugin(this.#o).createTable(this.#i).ifNotExists().addColumn("id","varchar(255)",t=>t.notNull().primaryKey()).addColumn("is_locked","integer",t=>t.notNull().defaultTo(0)).execute()}catch(t){if(!await this.#a(this.#i))throw t}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#o).insertInto(this.#i).values({id:h_,is_locked:0}).execute()}catch(t){if(!await this.#p())throw t}}async#l(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(t){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(i=>i.name===t&&(!r||i.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#o).selectFrom(this.#i).where("id","=",h_).select("id").executeTakeFirst()}async#h(t){let r=this.#e.db.getExecutor().adapter,n=d({lockTable:this.#e.migrationLockTableName??xo,lockRowId:h_,lockTableSchema:this.#e.migrationTableSchema}),i=async o=>{try{await r.acquireMigrationLock(o,n);let s=await this.#_(o);if(s.migrations.length===0)return{results:[]};let a=t(s);return a===void 0?{results:[]}:a<s.currentIndex?await this.#E(o,s,a):a>s.currentIndex?await this.#v(o,s,a):{results:[]}}finally{await r.releaseMigrationLock(o,n)}};return r.supportsTransactionalDdl?this.#e.db.transaction().execute(i):this.#e.db.connection().execute(i)}async#_(t){let r=await this.#f(),n=await this.#y(t);return this.#g(r,n),d({migrations:r,currentIndex:r.findIndex(i=>i.name===o0(n))})}async#f(){let t=await this.#e.provider.getMigrations();return Object.keys(t).sort().map(r=>({...t[r],name:r}))}async#y(t){return(await t.withPlugin(this.#o).selectFrom(this.#n).select("name").orderBy("name").execute()).map(n=>n.name)}#g(t,r){for(let n of r)if(!t.some(i=>i.name===n))throw new Error(`corrupted migrations: previously executed migration ${n} is missing`);for(let n=0;n<r.length;++n)if(t[n].name!==r[n])throw new Error(`corrupted migrations: expected previously executed migration ${r[n]} to be at index ${n} but ${t[n].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#E(t,r,n){let i=[];for(let o=r.currentIndex;o>n;--o)i.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{s.down&&(await s.down(t),await t.withPlugin(this.#o).deleteFrom(this.#n).where("name","=",s.name).execute(),i[o]={migrationName:s.name,direction:"Down",status:"Success"})}catch(a){throw i[o]={migrationName:s.name,direction:"Down",status:"Error"},new Ba({error:a,results:i})}}return{results:i}}async#v(t,r,n){let i=[];for(let o=r.currentIndex+1;o<=n;++o)i.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{await s.up(t),await t.withPlugin(this.#o).insertInto(this.#n).values({name:s.name,timestamp:new Date().toISOString()}).execute(),i[o]={migrationName:s.name,direction:"Up",status:"Success"}}catch(a){throw i[o]={migrationName:s.name,direction:"Up",status:"Error"},new Ba({error:a,results:i})}}return{results:i}}},Ba=class extends Error{#e;constructor(t){super(),this.#e=t}get resultSet(){return this.#e}};var $k=/"/g,Ku=class extends bo{sanitizeIdentifier(t){return t.replace($k,'""')}};var zk=BigInt("3853314791062309107"),Ju=class extends No{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(t){await Ze`select pg_advisory_xact_lock(${Ze.lit(zk)})`.execute(t)}async releaseMigrationLock(){}};var Hk=/`/g,Yu=class extends bo{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(t){return t.replace(Hk,"``")}};var Xu=class{#e;constructor(t){this.#e=t}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(t={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",i=>i.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",Ze`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();t.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Wa).where("columns.TABLE_NAME","!=",xo));let n=await r.execute();return this.#t(n)}async getMetadata(t){return{tables:await this.getTables(t)}}#t(t){return t.reduce((r,n)=>{let i=r.find(o=>o.name===n.TABLE_NAME);return i||(i=d({name:n.TABLE_NAME,isView:n.TABLE_TYPE==="VIEW",schema:n.TABLE_SCHEMA,columns:[]}),r.push(i)),i.columns.push(d({name:n.COLUMN_NAME,dataType:n.DATA_TYPE,isNullable:n.IS_NULLABLE==="YES",isAutoIncrementing:n.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:n.COLUMN_DEFAULT!==null})),r},[])}};var G0="ea586330-2c93-47c8-908d-981d9d270f9d",Gk=60*60,Zu=class extends No{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(t){await Ze`select get_lock(${Ze.lit(G0)}, ${Ze.lit(Gk)})`.execute(t)}async releaseMigrationLock(t){await Ze`select release_lock(${Ze.lit(G0)})`.execute(t)}};var ed=class{#e;constructor(t){this.#e=t}async init(){}async acquireConnection(){return new y_(this.#e)}async beginTransaction(t){await t.beginTransaction()}async commitTransaction(t){await t.commitTransaction()}async rollbackTransaction(t){await t.rollbackTransaction()}async releaseConnection(t){}async destroy(){}},y_=class{#e;#t;constructor(t){this.#e=t}async beginTransaction(){let t=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=t.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(t){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:t.sql,parameters:t.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((s,a)=>[r.columnMetadata[a].label||r.columnMetadata[a].name,s.isNull?null:s.stringValue??s.doubleValue??s.longValue??s.booleanValue??this.#r(s.arrayValue)??s.blobValue??null])))||[]}}async*streamQuery(t,r){throw new Error("Data API does not support streaming")}#r(t){if(t)return t.stringValues??t.doubleValues??t.longValues??t.booleanValues??t.arrayValues?.map(this.#r)}};var td=class extends Ku{appendValue(t){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Q0(t)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}},rd=class extends Yu{appendValue(t){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Q0(t)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};function Q0(e){switch(typeof e){case"bigint":return{value:{doubleValue:Number(e)}};case"boolean":return{value:{booleanValue:e}};case"number":return Number.isInteger(e)?{value:{longValue:e}}:{value:{doubleValue:e}};case"object":if(e==null)return{value:{isNull:!0}};if(Buffer.isBuffer(e))return{value:{blobValue:e}};if(e instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:K0(e.toISOString())}};if(e?.value&&Jk(e.value))return e.typeHint&&e.value.stringValue&&typeof e.value.stringValue=="string"&&(e.value.stringValue=Qk(e.typeHint,e.value.stringValue)),e;break;case"string":return{value:{stringValue:e}}}throw new E_("Could not serialize value")}function Qk(e,t){switch(e){case"DATE":return g_(t).slice(0,10);case"TIME":return t.match(/^\d{4}-\d{2}-\d{2}/)?g_(t).slice(11,23):Kk(t);case"TIMESTAMP":return K0(g_(t))}return t}function Kk(e){let t=(e||"00:00:00").split(":");for(;t.length<3;)t.push("00");return t.join(":").slice(0,12)}function K0(e){return e.replace("T"," ").slice(0,23)}function g_(e){return new Date(Date.parse(e)).toISOString()}function Jk(e){for(let t of Xk)if(e[t])return!0;if(e.arrayValue){for(let t of Yk)if(e.arrayValue?.[t])return!0}return!1}var E_=class e extends Error{constructor(t){super(t),this.name=e.name}},Yk=["booleanValues","doubleValues","longValues","stringValues"],Xk=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var nd=class{#e;constructor(t){this.#e=t}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(t={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(Ze`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",Ze`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(i=>i.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();t.withInternalKyselyTables||(r=r.where("c.relname","!=",Wa).where("c.relname","!=",xo));let n=await r.execute();return this.#t(n)}async getMetadata(t){return{tables:await this.getTables(t)}}#t(t){return t.reduce((r,n)=>{let i=r.find(o=>o.name===n.table&&o.schema===n.schema);return i||(i=Object.freeze({name:n.table,isView:n.table_type==="v",schema:n.schema,columns:[]}),r.push(i)),i.columns.push(Object.freeze({name:n.column,dataType:n.type,dataTypeSchema:n.type_schema,isNullable:!n.not_null,isAutoIncrementing:!!n.auto_incrementing,hasDefaultValue:n.has_default})),r},[])}};var id=class{#e;constructor(t){this.#e=t}createAdapter(){if(this.#e.mode==="postgres")return new Ju;if(this.#e.mode==="mysql")return new Zu;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new ed(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new td;if(this.#e.mode==="mysql")return new rd;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(t){if(this.#e.mode==="postgres")return new nd(t);if(this.#e.mode==="mysql")return new Xu(t);throw new Error("Unknown mode "+this.#e.mode)}};var ik=pk(nk(),1);import YY from"url";async function w0e(e){console.log("initializing db");let t=new So({dialect:new id({mode:process.env.RDS_ENGINE_MODE,driver:{client:new ik.RDSData({}),database:e?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new Qu({db:t,provider:new Xw(JY.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",e),!e.type||e.type==="latest"){console.log("migrating to latest");let n=await r.migrateToLatest(),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(e.type==="to"){if(console.log("migrating to",e.data.name),!e.data.name)return await r.migrateTo(__);let n=await r.migrateTo(e.data.name),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(e.type==="list")return console.log("listing migrations"),await r.getMigrations()}var Xw=class{#e;constructor(t){this.#e=t}async getMigrations(){let t=await import("fs/promises"),r=await import("path"),n={},i=await t.readdir(this.#e);for(let o of i)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[s]=r.basename(o).split("."),a=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let l=await import(a);n[s]=l;continue}let u=a.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await t.copyFile(a,u);let l=await import(YY.pathToFileURL(u).href);n[s]=l}catch(l){console.error(l)}await t.rm(u)}return n}};export{w0e as handler};
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
